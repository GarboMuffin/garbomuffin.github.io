/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/3rd-party/stableSort.ts":
/*!*************************************!*\
  !*** ./src/3rd-party/stableSort.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n// https://gist.github.com/fsufitch/18bb4692d5f46b649890f8fd58765fbc with minor style changes\nconst defaultCmp = (a, b) => a - b;\nArray.prototype.stableSort = function (cmp = defaultCmp) {\n    const stabilized = this.map((el, index) => ([el, index]));\n    const stableCmp = (a, b) => {\n        const order = cmp(a[0], b[0]);\n        if (order !== 0) {\n            return order;\n        }\n        return a[1] - b[1];\n    };\n    stabilized.sort(stableCmp);\n    for (let i = 0; i < this.length; i++) {\n        this[i] = stabilized[i][0];\n    }\n    return this;\n};\n\n\n//# sourceURL=webpack:///./src/3rd-party/stableSort.ts?");

/***/ }),

/***/ "./src/blockmap.ts":
/*!*************************!*\
  !*** ./src/blockmap.ts ***!
  \*************************/
/*! exports provided: blockMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blockMap\", function() { return blockMap; });\n/* harmony import */ var _game_sprites_blocks_black__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game/sprites/blocks/black */ \"./src/game/sprites/blocks/black.ts\");\n/* harmony import */ var _game_sprites_blocks_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game/sprites/blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _game_sprites_blocks_blockswitchspawner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game/sprites/blocks/blockswitchspawner */ \"./src/game/sprites/blocks/blockswitchspawner.ts\");\n/* harmony import */ var _game_sprites_blocks_coinspawner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game/sprites/blocks/coinspawner */ \"./src/game/sprites/blocks/coinspawner.ts\");\n/* harmony import */ var _game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./game/sprites/blocks/corner */ \"./src/game/sprites/blocks/corner.ts\");\n/* harmony import */ var _game_sprites_blocks_crumble__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./game/sprites/blocks/crumble */ \"./src/game/sprites/blocks/crumble.ts\");\n/* harmony import */ var _game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./game/sprites/blocks/falling */ \"./src/game/sprites/blocks/falling.ts\");\n/* harmony import */ var _game_sprites_blocks_grass__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./game/sprites/blocks/grass */ \"./src/game/sprites/blocks/grass.ts\");\n/* harmony import */ var _game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./game/sprites/blocks/lightblock */ \"./src/game/sprites/blocks/lightblock.ts\");\n/* harmony import */ var _game_sprites_blocks_lightswitch__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./game/sprites/blocks/lightswitch */ \"./src/game/sprites/blocks/lightswitch.ts\");\n/* harmony import */ var _game_sprites_blocks_oneway__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./game/sprites/blocks/oneway */ \"./src/game/sprites/blocks/oneway.ts\");\n/* harmony import */ var _game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./game/sprites/blocks/spike */ \"./src/game/sprites/blocks/spike.ts\");\n/* harmony import */ var _game_sprites_blocks_tallgrass__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./game/sprites/blocks/tallgrass */ \"./src/game/sprites/blocks/tallgrass.ts\");\n\n\n\n\n\n\n// tslint:disable-next-line\n\n\n// tslint:disable-next-line\n\n\n\n\n\nfunction special(type, texture) {\n    return {\n        type, texture,\n    };\n}\nfunction solid(texture) {\n    return {\n        type: _game_sprites_blocks_block__WEBPACK_IMPORTED_MODULE_1__[\"StaticSolidBlock\"],\n        texture,\n    };\n}\nconst blockMap = {\n    \"a\": special(_game_sprites_blocks_black__WEBPACK_IMPORTED_MODULE_0__[\"BlackBlock\"], \"blocks/a\"),\n    \"b\": solid(\"blocks/b\"),\n    \"c\": solid(\"blocks/c\"),\n    \"d\": solid(\"blocks/d\"),\n    \"e\": solid(\"blocks/e\"),\n    \"f\": solid(\"blocks/f\"),\n    \"g\": solid(\"blocks/g\"),\n    \"h\": solid(\"blocks/h\"),\n    \"i\": solid(\"blocks/i\"),\n    \"j\": special(_game_sprites_blocks_grass__WEBPACK_IMPORTED_MODULE_7__[\"GrassBlock\"], \"blocks/j\"),\n    \"k\": special(_game_sprites_blocks_grass__WEBPACK_IMPORTED_MODULE_7__[\"GrassBlock\"], \"blocks/k\"),\n    \"l\": special(_game_sprites_blocks_grass__WEBPACK_IMPORTED_MODULE_7__[\"GrassBlock\"], \"blocks/l\"),\n    \"m\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"RotatedCornerBlock\"], \"blocks/m\"),\n    \"]\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"SolidRotatedCornerBlock\"], \"blocks/m\"),\n    \"n\": special(_game_sprites_blocks_coinspawner__WEBPACK_IMPORTED_MODULE_3__[\"AboveLevelUpCoinSpawnerBlock\"], \"blocks/n\"),\n    \"o\": special(_game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__[\"UpSpikeBlock\"], \"blocks/spikes/up\"),\n    \"p\": special(_game_sprites_blocks_tallgrass__WEBPACK_IMPORTED_MODULE_12__[\"TallGrassBlock\"], \"blocks/p\"),\n    \"q\": special(_game_sprites_blocks_tallgrass__WEBPACK_IMPORTED_MODULE_12__[\"TallGrassBlock\"], \"blocks/q\"),\n    \"r\": solid(\"blocks/r\"),\n    \"s\": solid(\"blocks/s\"),\n    \"t\": special(_game_sprites_blocks_crumble__WEBPACK_IMPORTED_MODULE_5__[\"CrumblingBlock\"], \"blocks/crumble/1\"),\n    \"u\": special(_game_sprites_blocks_blockswitchspawner__WEBPACK_IMPORTED_MODULE_2__[\"RedGreenBlockSwitchSpawner\"], \"blocks/button/redgreen/spawner\"),\n    \"U\": special(_game_sprites_blocks_blockswitchspawner__WEBPACK_IMPORTED_MODULE_2__[\"AquaOrangeBlockSwitchSpawner\"], \"blocks/button/aquaorange/spawner\"),\n    \"v\": solid(\"blocks/v\"),\n    \"w\": special(_game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__[\"RedGreenVibratingFallingBlock\"], \"blocks/w\"),\n    \"W\": special(_game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__[\"AquaOrangeVibratingFallingBlock\"], \"blocks/capitalw\"),\n    \"[\": special(_game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__[\"RedGreenInstantFallingBlock\"], \"blocks/w\"),\n    \"{\": special(_game_sprites_blocks_falling__WEBPACK_IMPORTED_MODULE_6__[\"AquaOrangeInstantFallingBlock\"], \"blocks/capitalw\"),\n    \"x\": special(_game_sprites_blocks_lightswitch__WEBPACK_IMPORTED_MODULE_9__[\"RedGreenLightSwitchBlock\"], \"blocks/lightbutton/1\"),\n    \"y\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"DisabledLightBlock1\"], \"blocks/editory\"),\n    \"z\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"EnabledLightBlock1\"], \"blocks/z\"),\n    \"Y\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"DisabledLightBlock2\"], \"blocks/capitaly\"),\n    \"Z\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"EnabledLightBlock2\"], \"blocks/capitalz\"),\n    \"O\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"DisabledLightBlock3\"], \"blocks/capitalo\"),\n    \"P\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"EnabledLightBlock3\"], \"blocks/capitalp\"),\n    \"Q\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"EnabledLightBlock4\"], \"blocks/capitalq\"),\n    \"R\": special(_game_sprites_blocks_lightblock__WEBPACK_IMPORTED_MODULE_8__[\"DisabledLightBlock4\"], \"blocks/capitalr\"),\n    // Post sword\n    \"1\": solid(\"blocks/1\"),\n    \"2\": solid(\"blocks/2\"),\n    \"3\": solid(\"blocks/3\"),\n    \"4\": solid(\"blocks/4\"),\n    \"5\": solid(\"blocks/5\"),\n    \"6\": solid(\"blocks/6\"),\n    \"7\": solid(\"blocks/7\"),\n    \"8\": solid(\"blocks/8\"),\n    \"9\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"RotatedCornerBlock\"], \"blocks/9\"),\n    \"@\": special(_game_sprites_blocks_coinspawner__WEBPACK_IMPORTED_MODULE_3__[\"BelowLevelUpCoinSpawnerBlock\"], \"blocks/n\"),\n    \"!\": special(_game_sprites_blocks_oneway__WEBPACK_IMPORTED_MODULE_10__[\"OneWayBlock\"], \"blocks/!\"),\n    \"#\": special(_game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__[\"LeftSpikeBlock\"], \"blocks/spikes/left\"),\n    \"$\": special(_game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__[\"RightSpikeBlock\"], \"blocks/spikes/right\"),\n    \"%\": special(_game_sprites_blocks_spike__WEBPACK_IMPORTED_MODULE_11__[\"DownSpikeBlock\"], \"blocks/spikes/down\"),\n    // Castle\n    \"^\": special(_game_sprites_blocks_block__WEBPACK_IMPORTED_MODULE_1__[\"PseudoSolidBlock\"], \"blocks/caret\"),\n    \"&\": solid(\"blocks/ampersand\"),\n    \"*\": solid(\"blocks/asterisk\"),\n    \"(\": solid(\"blocks/(\"),\n    \")\": solid(\"blocks/)\"),\n    \"-\": solid(\"blocks/-\"),\n    \"_\": solid(\"blocks/underscore\"),\n    \"=\": solid(\"blocks/=\"),\n    \"+\": solid(\"blocks/+\"),\n    \"`\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"CastleCornerBlock\"], \"blocks/grave\"),\n    \"S\": solid(\"blocks/capitals\"),\n    \"T\": solid(\"blocks/capitalt\"),\n    \"V\": solid(\"blocks/capitalv\"),\n    \"}\": solid(\"blocks/closingcurlybracket\"),\n    \"|\": solid(\"blocks/pipe\"),\n    \"'\": solid(\"blocks/singlequote\"),\n    // New blocks!\n    \"A\": solid(\"blocks/capitala\"),\n    \"B\": solid(\"blocks/capitalb\"),\n    \"C\": solid(\"blocks/capitalc\"),\n    \"D\": solid(\"blocks/capitald\"),\n    \"E\": solid(\"blocks/capitale\"),\n    \"F\": solid(\"blocks/capitalf\"),\n    \"G\": solid(\"blocks/capitalg\"),\n    \"H\": solid(\"blocks/capitalh\"),\n    \"I\": special(_game_sprites_blocks_corner__WEBPACK_IMPORTED_MODULE_4__[\"RotatedCornerBlock\"], \"blocks/capitali\"),\n    \"J\": solid(\"blocks/capitalj\"),\n    \"K\": solid(\"blocks/capitalk\"),\n    \"L\": solid(\"blocks/capitall\"),\n    \"M\": solid(\"blocks/capitalm\"),\n    \"N\": solid(\"blocks/capitaln\"),\n};\n\n\n//# sourceURL=webpack:///./src/blockmap.ts?");

/***/ }),

/***/ "./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/
/*! exports provided: BLOCK_HEIGHT, BLOCK_WIDTH, LEVEL_HEIGHT, LEVEL_WIDTH, GRAVITY, FRICTION, CHEATS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BLOCK_HEIGHT\", function() { return BLOCK_HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BLOCK_WIDTH\", function() { return BLOCK_WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LEVEL_HEIGHT\", function() { return LEVEL_HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LEVEL_WIDTH\", function() { return LEVEL_WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GRAVITY\", function() { return GRAVITY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FRICTION\", function() { return FRICTION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CHEATS\", function() { return CHEATS; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n\n/*\n * Config values that are global to the whole game\n * Options to one specific thing are in its file\n */\nconst BLOCK_HEIGHT = 16;\nconst BLOCK_WIDTH = 16;\nconst LEVEL_HEIGHT = 23;\nconst LEVEL_WIDTH = 30;\nconst GRAVITY = 0.195;\nconst FRICTION = 0.75;\nconst CHEATS = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getSearchParam\"])(\"cheats\") === \"on\";\n\n\n//# sourceURL=webpack:///./src/config.ts?");

/***/ }),

/***/ "./src/editor/blockmapkeys.ts":
/*!************************************!*\
  !*** ./src/editor/blockmapkeys.ts ***!
  \************************************/
/*! exports provided: BLOCK_MAP_KEYS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BLOCK_MAP_KEYS\", function() { return BLOCK_MAP_KEYS; });\n// Not relying on Object.keys allows us to control the order\n// and organize the blocks in the gallery how I want.\nconst BLOCK_MAP_KEYS = [\n    // Theme 1\n    \"b\",\n    \"e\",\n    \"g\",\n    \"m\",\n    \"c\",\n    \"a\",\n    \"h\",\n    \"]\",\n    \"d\",\n    \"f\",\n    \"i\",\n    \"empty\",\n    \"v\",\n    \"A\",\n    \"}\",\n    \"empty\",\n    // Theme 2\n    \"1\",\n    \"4\",\n    \"6\",\n    \"9\",\n    \"2\",\n    \"a\",\n    \"7\",\n    \"empty\",\n    \"3\",\n    \"5\",\n    \"8\",\n    \"empty\",\n    \"C\",\n    \"B\",\n    \"'\",\n    \"empty\",\n    // Castle Theme\n    \"&\",\n    \")\",\n    \"_\",\n    \"`\",\n    \"*\",\n    \"^\",\n    \"=\",\n    \"empty\",\n    \"(\",\n    \"-\",\n    \"+\",\n    \"empty\",\n    \"T\",\n    \"V\",\n    \"S\",\n    \"empty\",\n    // Green Theme... hoorary\n    \"L\",\n    \"D\",\n    \"F\",\n    \"I\",\n    \"M\",\n    \"a\",\n    \"G\",\n    \"empty\",\n    \"N\",\n    \"E\",\n    \"H\",\n    \"empty\",\n    \"K\",\n    \"J\",\n    \"|\",\n    \"empty\",\n    // Grass\n    \"j\",\n    \"k\",\n    \"l\",\n    // Tall grass\n    \"p\",\n    \"q\",\n    \"t\",\n    \"!\",\n    // Light blocks\n    \"x\",\n    \"y\",\n    \"z\",\n    \"Y\",\n    \"Z\",\n    \"O\",\n    \"P\",\n    \"R\",\n    \"Q\",\n    \"o\",\n    \"%\",\n    \"#\",\n    \"$\",\n    \"n\",\n    \"@\",\n    \"r\",\n    \"s\",\n    \"u\",\n    \"w\",\n    \"[\",\n    \"empty\",\n    \"U\",\n    \"W\",\n    \"{\",\n];\n\n\n//# sourceURL=webpack:///./src/editor/blockmapkeys.ts?");

/***/ }),

/***/ "./src/editor/editor.ts":
/*!******************************!*\
  !*** ./src/editor/editor.ts ***!
  \******************************/
/*! exports provided: NightlightLevelEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NightlightLevelEditor\", function() { return NightlightLevelEditor; });\n/* harmony import */ var _blockmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blockmap */ \"./src/blockmap.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../engine/runtime */ \"./src/engine/runtime.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _levelcode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../levelcode */ \"./src/levelcode.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _blockmapkeys__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./blockmapkeys */ \"./src/editor/blockmapkeys.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _sprites_BlockSelectorSprite__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sprites/BlockSelectorSprite */ \"./src/editor/sprites/BlockSelectorSprite.ts\");\n/* harmony import */ var _sprites_BossSelectorSprite__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sprites/BossSelectorSprite */ \"./src/editor/sprites/BossSelectorSprite.ts\");\n/* harmony import */ var _sprites_JumpLightSelectorSprite__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./sprites/JumpLightSelectorSprite */ \"./src/editor/sprites/JumpLightSelectorSprite.ts\");\n/* harmony import */ var _sprites_LevelRenderer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./sprites/LevelRenderer */ \"./src/editor/sprites/LevelRenderer.ts\");\n/* harmony import */ var _sprites_PlayerSpawnSelectorSprite__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./sprites/PlayerSpawnSelectorSprite */ \"./src/editor/sprites/PlayerSpawnSelectorSprite.ts\");\n/* harmony import */ var _sprites_TextSelectorSprite__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./sprites/TextSelectorSprite */ \"./src/editor/sprites/TextSelectorSprite.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass NightlightLevelEditor extends _engine_runtime__WEBPACK_IMPORTED_MODULE_2__[\"GameRuntime\"] {\n    constructor() {\n        super(Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"canvas\"));\n        this.levelData = [];\n        this.jumpLights = [];\n        this.text = [];\n        this.mode = _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].Blocks;\n        this.ui = {\n            container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-ui\"),\n            getJsonCodeButton: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-get-json-code\"),\n            importCodeButton: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-import-code\"),\n            openLevel: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-open-level\"),\n            codeOutput: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-code-output\"),\n            modeSelect: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-mode\"),\n            welcome: {\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-welcome\"),\n                content: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-welcome-content\"),\n                toggleButton: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-welcome-toggle\"),\n            },\n            options: {\n                dark: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-dark\"),\n                stars: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-stars\"),\n                background: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-background\"),\n                music: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-option-music\"),\n            },\n            jumpLights: {\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-jump-lights\"),\n                snapToGrid: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-jump-lights-snap\"),\n            },\n            blocks: {\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-block\"),\n                activeBlockImage: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-active-block-image\"),\n                gallery: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-block-gallery\"),\n                activeBlockDescription: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-active-block-description\"),\n            },\n            text: {\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-text\"),\n                snapToGrid: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-text-snap\"),\n            },\n            boss: {\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-boss\"),\n                selection: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-selection\"),\n                sword: {\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-sword\"),\n                    blocksFromTop: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-sword-blocks-from-top\"),\n                    health: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-sword-health\"),\n                },\n                noss1: {\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-noss1\"),\n                },\n                noss2: {\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-boss-noss2\"),\n                },\n            },\n            playerSpawn: {\n                container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-mode-spawn\"),\n                spawnSelect: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-select\"),\n                alwaysShow: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-always-show\"),\n                random: {\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random\"),\n                    minX: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random-min-x\"),\n                    maxX: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random-max-x\"),\n                    minY: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random-min-y\"),\n                    maxY: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-random-max-y\"),\n                },\n                range: {\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-range\"),\n                    minX: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-range-min-x\"),\n                    maxX: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-range-max-x\"),\n                    requireSolid: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-range-solid\"),\n                },\n                point: {\n                    container: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point\"),\n                    x: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point-x\"),\n                    y: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point-y\"),\n                    select: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point-select\"),\n                    gridAlign: Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"level-editor-spawn-point-select-align\"),\n                },\n            },\n        };\n        this.blockOffsetY = this.canvas.height % _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"];\n        this.background = \"white\";\n        this.canvas.style.border = \"1px solid black\";\n        this.ui.getJsonCodeButton.addEventListener(\"click\", () => this.handleGetJsonCodeButton());\n        this.ui.importCodeButton.addEventListener(\"click\", () => this.handleImportLevelCodeButton());\n        this.ui.openLevel.addEventListener(\"click\", () => this.openLevelInNewTab());\n        this.ui.modeSelect.addEventListener(\"change\", () => this.setMode(+this.ui.modeSelect.value));\n        Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getElementById\"])(\"ingame-interface-container\").style.display = \"none\";\n        this.setMode(this.mode);\n        this.ui.welcome.container.style.display = \"block\";\n        this.ui.welcome.toggleButton.addEventListener(\"click\", () => this.toggleWelcomeTextVisibility());\n        this.setWelcomeTextVisibility(!!Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getSearchParam\"])(\"welcome\"));\n        for (let y = 0; y < _config__WEBPACK_IMPORTED_MODULE_1__[\"LEVEL_HEIGHT\"]; y++) {\n            const row = Array(_config__WEBPACK_IMPORTED_MODULE_1__[\"LEVEL_WIDTH\"]).fill(\".\");\n            this.levelData.push(row);\n        }\n        window.editor = this;\n    }\n    start() {\n        super.start();\n        this.ui.container.style.display = \"block\";\n        this.levelRenderer = new _sprites_LevelRenderer__WEBPACK_IMPORTED_MODULE_11__[\"LevelRenderer\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\n        });\n        this.levelRenderer.updateLevel();\n        this.blockSelector = new _sprites_BlockSelectorSprite__WEBPACK_IMPORTED_MODULE_8__[\"BlockSelectorSprite\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\n            texture: this.getImage(\"blocks/a\"),\n        });\n        this.jumpLightSelector = new _sprites_JumpLightSelectorSprite__WEBPACK_IMPORTED_MODULE_10__[\"JumpLightSelectorSprite\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\n            texture: this.getImage(\"blackjumplight\"),\n        });\n        this.bossSelector = new _sprites_BossSelectorSprite__WEBPACK_IMPORTED_MODULE_9__[\"BossSelectorSprite\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\n            texture: this.getImage(\"boss/noss/noss\"),\n        });\n        this.playerSpawnSelector = new _sprites_PlayerSpawnSelectorSprite__WEBPACK_IMPORTED_MODULE_12__[\"PlayerSpawnSelectorSprite\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\n            texture: this.getImage(\"player/idle\"),\n        });\n        this.textSelector = new _sprites_TextSelectorSprite__WEBPACK_IMPORTED_MODULE_13__[\"TextSelectorSprite\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\n            texture: this.getImage(\"text/a\"),\n        });\n        this.initGallery();\n        const levelSearchParam = Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"getSearchParam\"])(\"level\");\n        if (levelSearchParam) {\n            this.importLevelCode(levelSearchParam);\n        }\n    }\n    getJsonLevelCode() {\n        const dark = this.ui.options.dark.checked;\n        const stars = this.ui.options.stars.checked;\n        const background = this.ui.options.background.value;\n        const music = this.ui.options.music.value.split(\",\");\n        const boss = this.bossSelector.selection;\n        const spawn = this.playerSpawnSelector.selection;\n        const text = this.text;\n        const levelData = Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"clone\"])(this.levelData);\n        const code = levelData.reverse().map((s) => s.join(\"\")).join(\"\");\n        return {\n            levelData: code,\n            dark,\n            stars,\n            background,\n            jumpLights: this.jumpLights.length > 0 ? this.jumpLights : undefined,\n            backgroundMusic: music,\n            boss: boss,\n            spawn,\n            text: text.length > 0 ? this.text : undefined,\n        };\n    }\n    handleGetJsonCodeButton() {\n        this.ui.codeOutput.value = JSON.stringify(this.getJsonLevelCode());\n    }\n    handleImportLevelCodeButton() {\n        const code = prompt(\"Enter the level code:\");\n        if (code === null) {\n            return;\n        }\n        const levelDataBackup = this.levelData;\n        try {\n            this.importLevelCode(code);\n        }\n        catch (e) {\n            alert(`Error: ${e.message}`);\n            this.levelData = levelDataBackup;\n            this.levelRenderer.updateLevel();\n        }\n    }\n    importLevelCode(str) {\n        const level = Object(_levelcode__WEBPACK_IMPORTED_MODULE_4__[\"getLevelForCode\"])(str);\n        this.ui.options.stars.checked = level.stars;\n        this.ui.options.dark.checked = level.dark;\n        this.ui.options.background.value = level.background;\n        this.ui.options.music.value = (level.backgroundMusic || []).join(\",\");\n        this.jumpLights = level.jumpLights || [];\n        this.bossSelector.selection = level.boss;\n        this.playerSpawnSelector.selection = level.spawn || { type: \"default\" };\n        this.text = level.text || [];\n        this.levelData = Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"splitToChunks\"])(level.levelData, _config__WEBPACK_IMPORTED_MODULE_1__[\"LEVEL_WIDTH\"]).map((i) => i.split(\"\")).reverse();\n        this.levelRenderer.updateLevel();\n    }\n    handleGallerySelection(char) {\n        this.blockSelector.setSelection(char);\n    }\n    initGallery() {\n        const getImage = (src) => {\n            const link = document.createElement(\"a\");\n            link.href = \"\";\n            link.className = \"level-editor-gallery-item\";\n            link.onclick = () => false;\n            const image = document.createElement(\"img\");\n            image.src = src;\n            image.className = \"level-editor-block-gallery-item\";\n            link.appendChild(image);\n            return link;\n        };\n        for (const key of _blockmapkeys__WEBPACK_IMPORTED_MODULE_6__[\"BLOCK_MAP_KEYS\"]) {\n            if (key === \"empty\") {\n                const el = document.createElement(\"div\");\n                el.className = \"level-editor-gallery-item\";\n                this.ui.blocks.gallery.appendChild(el);\n                continue;\n            }\n            const val = _blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][key];\n            const texture = this.getImage(val.texture);\n            const image = getImage(texture.src);\n            image.addEventListener(\"click\", () => this.handleGallerySelection(key));\n            this.ui.blocks.gallery.appendChild(image);\n        }\n    }\n    setMode(m) {\n        this.mode = m;\n        this.ui.blocks.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].Blocks ? \"block\" : \"\";\n        this.ui.jumpLights.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].JumpLights ? \"block\" : \"\";\n        this.ui.text.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].Text ? \"block\" : \"\";\n        this.ui.boss.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].Boss ? \"block\" : \"\";\n        this.ui.playerSpawn.container.style.display = m === _mode__WEBPACK_IMPORTED_MODULE_7__[\"LevelEditorMode\"].PlayerSpawn ? \"block\" : \"\";\n    }\n    openLevelInNewTab() {\n        const code = escape(JSON.stringify(this.getJsonLevelCode()));\n        window.open(`?autorun=1&level=${code}`, \"_blank\");\n    }\n    setWelcomeTextVisibility(visible) {\n        this.ui.welcome.content.style.display = visible ? \"block\" : \"none\";\n        this.ui.welcome.toggleButton.textContent = (visible ? \"hide\" : \"show\") + \" welcome text\";\n        Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"setSearchParam\"])(\"welcome\", visible ? \"1\" : \"\");\n    }\n    toggleWelcomeTextVisibility() {\n        const isVisible = this.ui.welcome.content.style.display === \"block\";\n        this.setWelcomeTextVisibility(!isVisible);\n        return false;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/editor/editor.ts?");

/***/ }),

/***/ "./src/editor/mode.ts":
/*!****************************!*\
  !*** ./src/editor/mode.ts ***!
  \****************************/
/*! exports provided: LevelEditorMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LevelEditorMode\", function() { return LevelEditorMode; });\nvar LevelEditorMode;\n(function (LevelEditorMode) {\n    LevelEditorMode[LevelEditorMode[\"Blocks\"] = 0] = \"Blocks\";\n    LevelEditorMode[LevelEditorMode[\"JumpLights\"] = 1] = \"JumpLights\";\n    LevelEditorMode[LevelEditorMode[\"Text\"] = 2] = \"Text\";\n    LevelEditorMode[LevelEditorMode[\"Boss\"] = 3] = \"Boss\";\n    LevelEditorMode[LevelEditorMode[\"PlayerSpawn\"] = 4] = \"PlayerSpawn\";\n})(LevelEditorMode || (LevelEditorMode = {}));\n\n\n//# sourceURL=webpack:///./src/editor/mode.ts?");

/***/ }),

/***/ "./src/editor/sprites/BlockSelectorSprite.ts":
/*!***************************************************!*\
  !*** ./src/editor/sprites/BlockSelectorSprite.ts ***!
  \***************************************************/
/*! exports provided: BlockSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlockSelectorSprite\", function() { return BlockSelectorSprite; });\n/* harmony import */ var _blockmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blockmap */ \"./src/blockmap.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _blockmapkeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../blockmapkeys */ \"./src/editor/blockmapkeys.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\n\n\n\n\n\nclass BlockSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_2__[\"ImageSprite\"] {\n    constructor(options) {\n        super(options);\n        this.selection = \"c\";\n        this.selectionIndex = 4; // 4 is block type \"c\"\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_5__[\"LevelEditorIndexes\"].Selector;\n        this.addTask(() => this.run());\n        this.width = _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"];\n        this.height = _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"];\n        this.texture = this.runtime.getImage(_blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][this.selection].texture);\n        this.updateSelection();\n        document.addEventListener(\"keydown\", (e) => {\n            if (_blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][e.key] && e.target === document.body) {\n                this.setSelection(e.key);\n            }\n        });\n    }\n    updateSelection() {\n        this.selection = _blockmapkeys__WEBPACK_IMPORTED_MODULE_3__[\"BLOCK_MAP_KEYS\"][this.selectionIndex];\n        const blockDetails = _blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][this.selection];\n        const texture = this.runtime.getImage(blockDetails.texture);\n        this.texture = texture;\n        this.runtime.ui.blocks.activeBlockImage.src = texture.src;\n        this.runtime.ui.blocks.activeBlockImage.height = this.texture.height * 6;\n        this.runtime.ui.blocks.activeBlockImage.width = this.texture.width * 6;\n        this.runtime.ui.blocks.activeBlockDescription.textContent = blockDetails.type.name + \", \" + this.selection;\n        this.updateDimensions();\n    }\n    setBlock(x, y, char) {\n        const row = this.runtime.levelData[y];\n        if (!row) {\n            return;\n        }\n        const existingChar = row[x];\n        if (!existingChar) {\n            return;\n        }\n        row[x] = char;\n        this.runtime.levelRenderer.updateLevel();\n    }\n    run() {\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_4__[\"LevelEditorMode\"].Blocks) {\n            this.visible = false;\n            return;\n        }\n        this.visible = true;\n        // get hovered block\n        const mouseX = this.runtime.mouse.position.x;\n        const mouseY = this.runtime.mouse.position.y - this.runtime.blockOffsetY;\n        const blockX = Math.floor(mouseX / _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"]);\n        const blockY = Math.ceil(mouseY / _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"]);\n        this.x = blockX * _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"];\n        this.y = blockY * _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"] - this.runtime.blockOffsetY;\n        // drawing\n        if (this.runtime.mouse.left.isDown) {\n            this.opacity = 1;\n            this.setBlock(blockX, blockY, this.selection);\n        }\n        else if (this.runtime.mouse.right.isDown) {\n            this.opacity = 0;\n            this.setBlock(blockX, blockY, \".\");\n        }\n        else {\n            this.opacity = 0.5;\n        }\n    }\n    setSelection(char) {\n        const index = _blockmapkeys__WEBPACK_IMPORTED_MODULE_3__[\"BLOCK_MAP_KEYS\"].indexOf(char);\n        if (index === -1) {\n            throw new Error(char + \" is not in BLOCK_MAP_KEYS\");\n        }\n        this.selection = char;\n        this.selectionIndex = index;\n        this.updateSelection();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/editor/sprites/BlockSelectorSprite.ts?");

/***/ }),

/***/ "./src/editor/sprites/BossSelectorSprite.ts":
/*!**************************************************!*\
  !*** ./src/editor/sprites/BossSelectorSprite.ts ***!
  \**************************************************/
/*! exports provided: BossSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BossSelectorSprite\", function() { return BossSelectorSprite; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\n\n\n\nclass BossSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__[\"ImageSprite\"] {\n    constructor(options) {\n        super(options);\n        this.ui = this.runtime.ui.boss;\n        this.type = \"\";\n        this.shouldBeVisible = false;\n        this.sword = {\n            blocksFromTop: 0,\n            health: 0,\n        };\n        this.noss1 = {};\n        this.noss2 = {};\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_3__[\"LevelEditorIndexes\"].Selector;\n        this.addTask(() => this.run());\n        this.opacity = 0.5;\n        this.type = this.ui.selection.value;\n        this.sword.blocksFromTop = +this.ui.sword.blocksFromTop.value;\n        this.sword.health = +this.ui.sword.health.value;\n        this.ui.selection.addEventListener(\"change\", () => this.updateSelection());\n        this.ui.sword.blocksFromTop.addEventListener(\"change\", () => this.updateSelection());\n        this.ui.sword.health.addEventListener(\"change\", () => this.updateSelection());\n    }\n    updateSelection() {\n        const type = this.ui.selection.value;\n        this.type = type;\n        if (type === \"\") {\n            this.visible = false;\n            return;\n        }\n        this.ui.sword.container.style.display = type === \"sword\" ? \"block\" : \"\";\n        this.ui.noss1.container.style.display = type === \"noss1\" ? \"block\" : \"\";\n        this.ui.noss2.container.style.display = type === \"noss2\" ? \"block\" : \"\";\n        if (type === \"sword\") {\n            this.shouldBeVisible = true;\n            this.texture = this.runtime.getImage(\"boss/sword/sword\");\n            this.updateDimensions();\n            this.x = this.runtime.canvas.width / 2 - this.width / 2;\n            const blocksFromTop = +this.ui.sword.blocksFromTop.value;\n            this.y = blocksFromTop * _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\n            this.sword.blocksFromTop = blocksFromTop;\n            this.sword.health = +this.ui.sword.health.value;\n        }\n        else if (type === \"noss1\") {\n            this.shouldBeVisible = true;\n            this.texture = this.runtime.getImage(\"boss/noss/noss\");\n            this.updateDimensions();\n        }\n        else if (type === \"noss2\") {\n            this.shouldBeVisible = true;\n            this.texture = this.runtime.getImage(\"boss/noss/noss\");\n            this.updateDimensions();\n        }\n        else {\n            throw new Error(`${type} is not a valid boss type`);\n        }\n    }\n    run() {\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_2__[\"LevelEditorMode\"].Boss) {\n            this.visible = false;\n            return;\n        }\n        this.visible = this.shouldBeVisible;\n    }\n    get selection() {\n        const type = this.ui.selection.value;\n        if (type === \"\") {\n            return undefined;\n        }\n        else if (type === \"sword\") {\n            return {\n                type,\n                blocksFromTop: this.sword.blocksFromTop,\n                health: this.sword.health,\n            };\n        }\n        else if (type === \"noss1\") {\n            return {\n                type,\n            };\n        }\n        else if (type === \"noss2\") {\n            return {\n                type,\n            };\n        }\n        else {\n            throw new Error(`${type} is not a valid boss type`);\n        }\n    }\n    set selection(selection) {\n        if (typeof selection === \"undefined\") {\n            this.ui.selection.value = \"\";\n            return;\n        }\n        const type = selection.type;\n        this.ui.selection.value = type;\n        if (type === \"sword\") {\n            const s = selection;\n            this.ui.sword.blocksFromTop.value = (s.blocksFromTop || 14).toString();\n            this.ui.sword.health.value = (s.health || 3).toString();\n        }\n        else if (type === \"noss1\") {\n        }\n        else if (type === \"noss2\") {\n        }\n        else {\n            throw new Error(`${type} is not a valid boss type`);\n        }\n        this.updateSelection();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/editor/sprites/BossSelectorSprite.ts?");

/***/ }),

/***/ "./src/editor/sprites/JumpLightSelectorSprite.ts":
/*!*******************************************************!*\
  !*** ./src/editor/sprites/JumpLightSelectorSprite.ts ***!
  \*******************************************************/
/*! exports provided: JumpLightSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"JumpLightSelectorSprite\", function() { return JumpLightSelectorSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\n\n\n\nclass JumpLightSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(opts) {\n        super(opts);\n        this.outlinePoint = null;\n        this.snapToGrid = true;\n        this.moving = false;\n        this.opacity = 0.5;\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_3__[\"LevelEditorIndexes\"].Selector;\n        this.addTask(() => this.run());\n        this.runtime.ui.jumpLights.snapToGrid.addEventListener(\"change\", () => {\n            this.snapToGrid = this.runtime.ui.jumpLights.snapToGrid.checked;\n        });\n        this.snapToGrid = this.runtime.ui.jumpLights.snapToGrid.checked;\n    }\n    run() {\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_2__[\"LevelEditorMode\"].JumpLights) {\n            this.visible = false;\n            return;\n        }\n        const mouseX = this.runtime.mouse.position.x;\n        const mouseY = this.runtime.mouse.position.y;\n        if (this.snapToGrid) {\n            const distanceFromBottom = this.runtime.canvas.height - mouseY;\n            this.x = Math.round(mouseX / 8) * 8;\n            this.y = this.runtime.canvas.height - (Math.round(distanceFromBottom / 8) * 8);\n        }\n        else {\n            this.x = mouseX;\n            this.y = mouseY;\n        }\n        this.x -= (this.width / 2);\n        this.y -= (this.height / 2);\n        const hovered = this.findHovered(mouseX, mouseY);\n        if (hovered) {\n            this.visible = false;\n            this.outlinePoint = hovered;\n            this.runtime.cursor = \"pointer\";\n            if (this.runtime.mouse.isClick) {\n                this.removePoint(hovered);\n                this.moving = true;\n            }\n            else if (this.runtime.mouse.right.isClick) {\n                this.removePoint(hovered);\n                this.outlinePoint = null;\n            }\n        }\n        else {\n            this.visible = true;\n            if (!this.moving) {\n                this.outlinePoint = null;\n            }\n            if (this.runtime.mouse.isClick) {\n                this.moving = false;\n                this.addPoint(new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.x, this.y));\n            }\n        }\n    }\n    findHovered(mx, my) {\n        const width = this.width;\n        const height = this.height;\n        for (const p of this.runtime.jumpLights) {\n            const intersects = p.x < mx &&\n                p.x + width > mx &&\n                p.y < my &&\n                p.y + height > my;\n            if (intersects) {\n                return p;\n            }\n        }\n        return null;\n    }\n    removePoint(p) {\n        const index = this.runtime.jumpLights.indexOf(p);\n        if (index === -1) {\n            throw new Error(\"couldn't find point\");\n        }\n        this.runtime.jumpLights.splice(index, 1);\n        this.runtime.levelRenderer.updateLevel();\n    }\n    addPoint(p) {\n        this.runtime.jumpLights.push(p);\n        this.runtime.levelRenderer.updateLevel();\n    }\n    render(ctx) {\n        super.render(ctx);\n        if (this.outlinePoint) {\n            ctx.strokeStyle = \"black\";\n            ctx.lineWidth = 1;\n            ctx.strokeRect(this.outlinePoint.x, this.outlinePoint.y, this.width, this.height);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/editor/sprites/JumpLightSelectorSprite.ts?");

/***/ }),

/***/ "./src/editor/sprites/LevelEditorIndexes.ts":
/*!**************************************************!*\
  !*** ./src/editor/sprites/LevelEditorIndexes.ts ***!
  \**************************************************/
/*! exports provided: LevelEditorIndexes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LevelEditorIndexes\", function() { return LevelEditorIndexes; });\nvar LevelEditorIndexes;\n(function (LevelEditorIndexes) {\n    LevelEditorIndexes[LevelEditorIndexes[\"Level\"] = 5] = \"Level\";\n    LevelEditorIndexes[LevelEditorIndexes[\"Selector\"] = 10] = \"Selector\";\n})(LevelEditorIndexes || (LevelEditorIndexes = {}));\n\n\n//# sourceURL=webpack:///./src/editor/sprites/LevelEditorIndexes.ts?");

/***/ }),

/***/ "./src/editor/sprites/LevelRenderer.ts":
/*!*********************************************!*\
  !*** ./src/editor/sprites/LevelRenderer.ts ***!
  \*********************************************/
/*! exports provided: LevelRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LevelRenderer\", function() { return LevelRenderer; });\n/* harmony import */ var _blockmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../blockmap */ \"./src/blockmap.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../game/sprites/text/NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\n\n\n\n\nclass LevelRenderer extends _engine_sprite__WEBPACK_IMPORTED_MODULE_2__[\"AbstractSprite\"] {\n    constructor(options) {\n        super(options);\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_4__[\"LevelEditorIndexes\"].Level;\n        const { ctx, canvas } = this.runtime.createCanvas();\n        this.canvas = canvas;\n        this.ctx = ctx;\n    }\n    updateLevel() {\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        const data = this.runtime.levelData;\n        const height = this.runtime.canvas.height;\n        for (let y = 0; y < data.length; y++) {\n            const row = data[y];\n            const blockY = y * _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"] - this.runtime.blockOffsetY;\n            for (let x = 0; x < row.length; x++) {\n                const char = row[x];\n                if (char === \".\") {\n                    continue;\n                }\n                const blockX = _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"] * x;\n                const texture = this.runtime.getImage(_blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][char].texture);\n                this.ctx.drawImage(texture, blockX, blockY);\n            }\n        }\n        const jumpLightTexture = this.runtime.getImage(\"blackjumplight\");\n        for (const position of this.runtime.jumpLights) {\n            this.ctx.drawImage(jumpLightTexture, position.x, position.y);\n        }\n        for (const opt of this.runtime.text) {\n            this.drawText(this.ctx, opt.text, opt.position);\n        }\n    }\n    drawText(ctx, text, pos) {\n        for (let i = 0; i < text.length; i++) {\n            const originalChar = text[i].toLowerCase();\n            const char = _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"CHAR_MAP\"][originalChar] || originalChar;\n            if (char === \"skip\") {\n                continue;\n            }\n            const x = pos.x + (i * _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"CHAR_WIDTH\"]);\n            const texture = this.runtime.getImage(\"text/\" + char);\n            ctx.drawImage(texture, x, pos.y, Math.max(_game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"CHAR_WIDTH\"], texture.width), _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"CHAR_HEIGHT\"]);\n        }\n    }\n    render(ctx) {\n        ctx.drawImage(this.canvas, 0, 0);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/editor/sprites/LevelRenderer.ts?");

/***/ }),

/***/ "./src/editor/sprites/PlayerSpawnSelectorSprite.ts":
/*!*********************************************************!*\
  !*** ./src/editor/sprites/PlayerSpawnSelectorSprite.ts ***!
  \*********************************************************/
/*! exports provided: PlayerSpawnSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerSpawnSelectorSprite\", function() { return PlayerSpawnSelectorSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\n\n\nvar Mode;\n(function (Mode) {\n    Mode[Mode[\"None\"] = 0] = \"None\";\n    Mode[Mode[\"SelectingSpawnPoint\"] = 1] = \"SelectingSpawnPoint\";\n})(Mode || (Mode = {}));\nclass PlayerSpawnSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(options) {\n        super(options);\n        this.mode = Mode.None;\n        this.ui = this.runtime.ui.playerSpawn;\n        this.alwaysShow = this.ui.alwaysShow.checked;\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_2__[\"LevelEditorIndexes\"].Selector;\n        this.opacity = 0.5;\n        this.ui.spawnSelect.addEventListener(\"change\", () => this.selectionChanged());\n        this.ui.alwaysShow.addEventListener(\"change\", () => this.alwaysShow = this.ui.alwaysShow.checked);\n        this.ui.point.select.addEventListener(\"click\", () => this.mode = Mode.SelectingSpawnPoint);\n        this.addTask(() => this.run());\n    }\n    run() {\n        this.visible = false;\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_1__[\"LevelEditorMode\"].PlayerSpawn) {\n            return;\n        }\n        if (this.mode === Mode.SelectingSpawnPoint) {\n            const align = this.ui.point.gridAlign.checked;\n            this.visible = true;\n            const mouseX = this.runtime.mouse.position.x;\n            const mouseY = this.runtime.mouse.position.y;\n            if (align) {\n                const distanceFromButton = this.runtime.canvas.height - mouseY;\n                this.x = Math.round(mouseX / 8) * 8;\n                this.y = this.runtime.canvas.height - (Math.round(distanceFromButton / 8) * 8);\n            }\n            else {\n                this.x = mouseX;\n                this.y = mouseY;\n            }\n            this.x -= (this.width / 2);\n            this.y -= (this.height / 2);\n            if (this.runtime.mouse.isClick) {\n                this.mode = Mode.None;\n                this.ui.point.x.value = this.x.toString();\n                this.ui.point.y.value = this.y.toString();\n            }\n        }\n        else if (this.mode === Mode.None) {\n            const type = this.ui.spawnSelect.value;\n            if (type === \"point\") {\n                this.visible = true;\n                this.x = +this.ui.point.x.value;\n                this.y = +this.ui.point.y.value;\n            }\n        }\n    }\n    selectionChanged() {\n        const type = this.ui.spawnSelect.value;\n        this.ui.point.container.style.display = type === \"point\" ? \"block\" : \"\";\n        this.ui.random.container.style.display = type === \"random\" ? \"block\" : \"\";\n        this.ui.range.container.style.display = type === \"range\" ? \"block\" : \"\";\n    }\n    get selection() {\n        const type = this.ui.spawnSelect.value;\n        if (type === \"default\") {\n            return undefined;\n        }\n        else if (type === \"random\") {\n            return {\n                type: \"random\",\n                minX: +this.ui.random.minX.value,\n                maxX: +this.ui.random.maxX.value,\n                minY: +this.ui.random.minY.value,\n                maxY: +this.ui.random.maxY.value,\n            };\n        }\n        else if (type === \"range\") {\n            return {\n                type: \"range\",\n                minX: +this.ui.range.minX.value,\n                maxX: +this.ui.range.maxX.value,\n                requireSolid: this.ui.range.requireSolid.checked ? undefined : false,\n            };\n        }\n        else if (type === \"point\") {\n            return {\n                type: \"point\",\n                x: +this.ui.point.x.value,\n                y: +this.ui.point.y.value,\n            };\n        }\n        else {\n            throw new Error(`${type} is not a valid spawn or whatever`);\n        }\n    }\n    set selection(selection) {\n        if (typeof selection === \"undefined\") {\n            // default type, nothing to do\n            return;\n        }\n        const type = selection.type;\n        this.ui.spawnSelect.value = type;\n        if (type === \"default\") {\n            // do nothing???\n        }\n        else if (type === \"random\") {\n            const s = selection;\n            this.ui.random.minX.value = s.minX.toString();\n            this.ui.random.maxX.value = s.maxX.toString();\n            this.ui.random.minY.value = s.minY.toString();\n            this.ui.random.maxY.value = s.maxY.toString();\n        }\n        else if (type === \"range\") {\n            const s = selection;\n            this.ui.range.minX.value = s.minX.toString();\n            this.ui.range.maxX.value = s.maxX.toString();\n            this.ui.range.requireSolid.checked = typeof s.requireSolid === \"undefined\" || s.requireSolid ? true : false;\n        }\n        else if (type === \"point\") {\n            const s = selection;\n            this.ui.point.x.value = s.x.toString();\n            this.ui.point.y.value = s.y.toString();\n        }\n        else {\n            throw new Error(`${type} is not a valid spawn or whatever`);\n        }\n        this.selectionChanged();\n    }\n    render(ctx) {\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_1__[\"LevelEditorMode\"].PlayerSpawn && !this.alwaysShow) {\n            return;\n        }\n        const fillRect = (x, y, x2, y2) => {\n            ctx.globalAlpha = 0.25;\n            ctx.fillStyle = \"aqua\";\n            ctx.fillRect(x, y, x2 - x, y2 - y);\n            ctx.globalAlpha = 1;\n        };\n        const selection = this.selection;\n        if (selection === undefined || selection.type === \"default\") {\n            // do nothing\n        }\n        else if (selection.type === \"point\") {\n            if (this.mode === Mode.SelectingSpawnPoint) {\n                // do nothing\n            }\n            else {\n                this.x = selection.x;\n                this.y = selection.y;\n            }\n            super.render(ctx);\n        }\n        else if (selection.type === \"random\") {\n            fillRect(selection.minX, selection.minY, selection.maxX, selection.maxY);\n        }\n        else if (selection.type === \"range\") {\n            fillRect(selection.minX, 0, selection.maxX, ctx.canvas.height);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/editor/sprites/PlayerSpawnSelectorSprite.ts?");

/***/ }),

/***/ "./src/editor/sprites/TextSelectorSprite.ts":
/*!**************************************************!*\
  !*** ./src/editor/sprites/TextSelectorSprite.ts ***!
  \**************************************************/
/*! exports provided: TextSelectorSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TextSelectorSprite\", function() { return TextSelectorSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../game/sprites/text/NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mode */ \"./src/editor/mode.ts\");\n/* harmony import */ var _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LevelEditorIndexes */ \"./src/editor/sprites/LevelEditorIndexes.ts\");\n\n\n\n\n\nclass TextSelectorSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(opts) {\n        super(opts);\n        this.snapToGrid = true;\n        this.outline = null;\n        this.moving = null;\n        this.opacity = 0.5;\n        this.z = _LevelEditorIndexes__WEBPACK_IMPORTED_MODULE_4__[\"LevelEditorIndexes\"].Selector;\n        this.initTexture = this.texture;\n        this.addTask(() => this.run());\n        this.runtime.ui.text.snapToGrid.addEventListener(\"change\", () => {\n            this.snapToGrid = this.runtime.ui.text.snapToGrid.checked;\n        });\n        this.snapToGrid = this.runtime.ui.text.snapToGrid.checked;\n    }\n    run() {\n        if (this.runtime.mode !== _mode__WEBPACK_IMPORTED_MODULE_3__[\"LevelEditorMode\"].Text) {\n            this.visible = false;\n            return;\n        }\n        const mouseX = this.runtime.mouse.position.x;\n        const mouseY = this.runtime.mouse.position.y;\n        if (this.snapToGrid) {\n            const distanceFromBottom = this.runtime.canvas.height - mouseY;\n            const x = Math.floor(mouseX / 8) * 8;\n            const y = Math.floor(mouseY / 8) * 8;\n            this.x = x;\n            this.y = y;\n        }\n        else {\n            this.x = mouseX - (this.width / 2);\n            this.y = mouseY - (this.height / 2);\n        }\n        const hovered = this.getHovered();\n        if (hovered === null) {\n            this.visible = true;\n            if (this.moving) {\n                if (this.runtime.mouse.isClick) {\n                    this.moving.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\n                    this.runtime.text.push(this.moving);\n                    this.runtime.levelRenderer.updateLevel();\n                    this.moving = null;\n                }\n            }\n            else {\n                this.outline = null;\n                if (this.runtime.mouse.isClick) {\n                    const text = prompt(\"Type the text:\");\n                    if (text === null) {\n                        return;\n                    }\n                    if (!this.isValidText(text)) {\n                        alert(\"Unsupported characters\");\n                        return;\n                    }\n                    const textObj = {\n                        text,\n                        position: new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position),\n                    };\n                    this.runtime.text.push(textObj);\n                    this.runtime.levelRenderer.updateLevel();\n                }\n            }\n        }\n        else {\n            this.visible = false;\n            this.outline = hovered;\n            this.runtime.cursor = \"pointer\";\n            if (this.runtime.mouse.isClick) {\n                const text = prompt(\"Enter the new text:\", hovered.text);\n                if (text) {\n                    if (!this.isValidText(text)) {\n                        alert(\"Unsupported characters\");\n                        return;\n                    }\n                    hovered.text = text;\n                    this.runtime.levelRenderer.updateLevel();\n                }\n            }\n            else if (this.runtime.mouse.middle.isClick) {\n                this.remove(hovered);\n                this.moving = hovered;\n            }\n            else if (this.runtime.mouse.right.isClick) {\n                this.remove(hovered);\n            }\n        }\n    }\n    remove(obj) {\n        const index = this.runtime.text.indexOf(obj);\n        this.runtime.text.splice(index, 1);\n        this.runtime.levelRenderer.updateLevel();\n    }\n    isValidText(text) {\n        for (const c of text) {\n            try {\n                const char = _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_MAP\"][c] || c;\n                if (char === \"skip\") {\n                    continue;\n                }\n                this.runtime.getImage(\"text/\" + char);\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        return true;\n    }\n    getHovered() {\n        for (const text of this.runtime.text) {\n            const width = text.text.length * _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_WIDTH\"];\n            const height = _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_HEIGHT\"];\n            const obj = {\n                x: text.position.x,\n                y: text.position.y,\n                width,\n                height,\n            };\n            const intersects = this.x < obj.x + obj.width &&\n                this.x + this.width > obj.x &&\n                this.y < obj.y + obj.height &&\n                this.y + this.height > obj.y;\n            if (intersects) {\n                return text;\n            }\n        }\n        return null;\n    }\n    render(ctx) {\n        super.render(ctx);\n        if (this.outline) {\n            const width = this.outline.text.length * _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_WIDTH\"];\n            const height = _game_sprites_text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_HEIGHT\"];\n            ctx.strokeStyle = \"black\";\n            ctx.lineWidth = 1;\n            ctx.strokeRect(this.outline.position.x, this.outline.position.y, width, height);\n        }\n        if (this.moving) {\n            this.runtime.levelRenderer.drawText(ctx, this.moving.text, this.position);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/editor/sprites/TextSelectorSprite.ts?");

/***/ }),

/***/ "./src/engine/drivers/keyboard/base.ts":
/*!*********************************************!*\
  !*** ./src/engine/drivers/keyboard/base.ts ***!
  \*********************************************/
/*! exports provided: AbstractKeyboard, Key */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractKeyboard\", function() { return AbstractKeyboard; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Key\", function() { return Key; });\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../task */ \"./src/engine/task.ts\");\n\n/*\n * A few base classes and things to extend for keyboard drivers\n *\n * Currently there's only one driver for computers but I want to add one for mobile.\n */\nclass AbstractKeyboard extends _task__WEBPACK_IMPORTED_MODULE_0__[\"TaskRunner\"] {\n    constructor(runtime) {\n        super();\n        this.keys = [];\n        runtime.addTask(() => this.update());\n        for (let i = 0; i < AbstractKeyboard.KEY_COUNT; i++) {\n            this.keys[i] = new Key(this);\n        }\n    }\n    update() {\n        this.runTasks();\n    }\n}\nAbstractKeyboard.KEY_COUNT = 256;\nclass Key {\n    constructor(keyboard) {\n        this.isPressed = false;\n        this.framesDown = 0;\n        keyboard.addTask(() => this.update());\n    }\n    update() {\n        if (this.isPressed) {\n            this.framesDown++;\n        }\n        else {\n            this.framesDown = 0;\n        }\n    }\n    get justPressed() {\n        return this.framesDown === 1;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/drivers/keyboard/base.ts?");

/***/ }),

/***/ "./src/engine/drivers/keyboard/keyboard.ts":
/*!*************************************************!*\
  !*** ./src/engine/drivers/keyboard/keyboard.ts ***!
  \*************************************************/
/*! exports provided: Keyboard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Keyboard\", function() { return Keyboard; });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./src/engine/drivers/keyboard/base.ts\");\n\n/*\n * The keyboard driver for computers\n */\nclass Keyboard extends _base__WEBPACK_IMPORTED_MODULE_0__[\"AbstractKeyboard\"] {\n    constructor(runtime) {\n        super(runtime);\n        document.addEventListener(\"keydown\", (e) => {\n            const keyCode = e.keyCode;\n            if (Keyboard.PREVENT.indexOf(keyCode) > -1) {\n                e.preventDefault();\n            }\n            this.keys[keyCode].isPressed = true;\n        });\n        document.addEventListener(\"keyup\", (e) => {\n            const keyCode = e.keyCode;\n            if (Keyboard.PREVENT.indexOf(keyCode) > -1) {\n                e.preventDefault();\n            }\n            this.keys[keyCode].isPressed = false;\n        });\n    }\n}\nKeyboard.PREVENT = [\n    32,\n    37,\n    38,\n    39,\n    40,\n];\n\n\n//# sourceURL=webpack:///./src/engine/drivers/keyboard/keyboard.ts?");

/***/ }),

/***/ "./src/engine/drivers/mouse/base.ts":
/*!******************************************!*\
  !*** ./src/engine/drivers/mouse/base.ts ***!
  \******************************************/
/*! exports provided: BaseMouse, BaseMouseButton, EmptyMouseButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BaseMouse\", function() { return BaseMouse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BaseMouseButton\", function() { return BaseMouseButton; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EmptyMouseButton\", function() { return EmptyMouseButton; });\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../task */ \"./src/engine/task.ts\");\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../vector */ \"./src/engine/vector.ts\");\n\n\nclass BaseMouse extends _task__WEBPACK_IMPORTED_MODULE_0__[\"TaskRunner\"] {\n    constructor(runtime) {\n        super();\n        this.position = new _vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](0, 0);\n        this.runtime = runtime;\n    }\n    update() {\n        this.runTasks();\n    }\n    get isDown() {\n        return this.left.isDown;\n    }\n    get isUp() {\n        return this.left.isUp;\n    }\n    get isClick() {\n        return this.left.isClick;\n    }\n    get framesDown() {\n        return this.left.framesDown;\n    }\n}\nclass BaseMouseButton {\n    constructor(mouse) {\n        this.isDown = false;\n        this.framesDown = 0;\n        mouse.addTask(() => this.update());\n    }\n    update() {\n        if (this.isDown) {\n            this.framesDown++;\n        }\n        else {\n            this.framesDown = 0;\n        }\n    }\n    get isUp() {\n        return !this.isDown;\n    }\n    get isClick() {\n        return this.framesDown === 1;\n    }\n}\n// A mouse button that doesn't do anything and always returns basic defaults\n// Used by mobile mouse support as only left click is supported there\nclass EmptyMouseButton {\n    constructor() {\n        this.isDown = false;\n        this.isUp = true;\n        this.isClick = false;\n        this.framesDown = 0;\n    }\n    update() { }\n}\n\n\n//# sourceURL=webpack:///./src/engine/drivers/mouse/base.ts?");

/***/ }),

/***/ "./src/engine/drivers/mouse/mouse.ts":
/*!*******************************************!*\
  !*** ./src/engine/drivers/mouse/mouse.ts ***!
  \*******************************************/
/*! exports provided: Mouse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Mouse\", function() { return Mouse; });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./src/engine/drivers/mouse/base.ts\");\n\n/*\n * A mouse driver for computers\n */\nvar Button;\n(function (Button) {\n    Button[Button[\"left\"] = 0] = \"left\";\n    Button[Button[\"middle\"] = 1] = \"middle\";\n    Button[Button[\"right\"] = 2] = \"right\";\n})(Button || (Button = {}));\nclass MouseButton extends _base__WEBPACK_IMPORTED_MODULE_0__[\"BaseMouseButton\"] {\n    constructor(mouse, button) {\n        super(mouse); // It's a bird! It's a plane! No it's Supermouse!\n        // The choice of adding listeners to canvas and document is very intentional\n        mouse.runtime.canvas.addEventListener(\"mousedown\", (e) => {\n            if (e.button === button) {\n                this.isDown = true;\n            }\n        });\n        document.addEventListener(\"mouseup\", (e) => {\n            if (e.button === button) {\n                this.isDown = false;\n            }\n        });\n    }\n}\nclass Mouse extends _base__WEBPACK_IMPORTED_MODULE_0__[\"BaseMouse\"] {\n    constructor(runtime) {\n        super(runtime);\n        this.right = new MouseButton(this, Button.right);\n        this.middle = new MouseButton(this, Button.middle);\n        this.left = new MouseButton(this, Button.left);\n        runtime.canvas.addEventListener(\"mousemove\", (e) => {\n            this.position.x = e.layerX;\n            this.position.y = e.layerY;\n        });\n        runtime.canvas.addEventListener(\"mousedown\", (e) => {\n            e.preventDefault();\n        });\n        runtime.canvas.addEventListener(\"contextmenu\", (e) => {\n            e.preventDefault();\n        });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/drivers/mouse/mouse.ts?");

/***/ }),

/***/ "./src/engine/drivers/mouse/touchscreen.ts":
/*!*************************************************!*\
  !*** ./src/engine/drivers/mouse/touchscreen.ts ***!
  \*************************************************/
/*! exports provided: TouchscreenMouse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TouchscreenMouse\", function() { return TouchscreenMouse; });\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base */ \"./src/engine/drivers/mouse/base.ts\");\n\n\n/*\n * A mouse driver for touchscreens\n *\n * A little buggy but it does get the job done\n */\nclass TouchscreenButton extends _base__WEBPACK_IMPORTED_MODULE_1__[\"BaseMouseButton\"] {\n    constructor(mouse) {\n        super(mouse); // It's a bird! It's a plane! No it's Supermouse!\n        document.addEventListener(\"touchstart\", (e) => {\n            this.isDown = true;\n        });\n        document.addEventListener(\"touchend\", (e) => {\n            this.isDown = false;\n        });\n        document.addEventListener(\"touchcancel\", (e) => {\n            this.isDown = false;\n        });\n    }\n}\nclass TouchscreenMouse extends _base__WEBPACK_IMPORTED_MODULE_1__[\"BaseMouse\"] {\n    constructor(runtime) {\n        super(runtime);\n        // only the left mouse button does stuff\n        this.left = new TouchscreenButton(this);\n        this.middle = new _base__WEBPACK_IMPORTED_MODULE_1__[\"EmptyMouseButton\"]();\n        this.right = new _base__WEBPACK_IMPORTED_MODULE_1__[\"EmptyMouseButton\"]();\n        // stop scrolling, zooming, or other stuff that you can do with your fingers\n        runtime.canvas.addEventListener(\"touchmove\", (e) => this.handleEvent(e));\n        runtime.canvas.addEventListener(\"touchstart\", (e) => this.handleEvent(e));\n        runtime.canvas.addEventListener(\"touchend\", (e) => this.handleEvent(e));\n        runtime.canvas.addEventListener(\"touchcancel\", (e) => this.handleEvent(e));\n    }\n    handleEvent(e) {\n        e.preventDefault();\n        const offset = this.findOffset(this.runtime.canvas);\n        this.position.x = e.changedTouches[0].clientX - offset.x;\n        this.position.y = e.changedTouches[0].clientY - offset.y;\n    }\n    // https://developer.mozilla.org/en-US/docs/Web/API/Touch_events with minor modifications\n    findOffset(el) {\n        let curleft = 0;\n        let curtop = 0;\n        while (el.offsetParent) {\n            curleft += el.offsetLeft;\n            curtop += el.offsetTop;\n            el = el.offsetParent;\n        }\n        return new _vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](curleft - document.body.scrollLeft, curtop - document.body.scrollTop);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/drivers/mouse/touchscreen.ts?");

/***/ }),

/***/ "./src/engine/errors/exit.ts":
/*!***********************************!*\
  !*** ./src/engine/errors/exit.ts ***!
  \***********************************/
/*! exports provided: ExitError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ExitError\", function() { return ExitError; });\n/*\n * When calling runtime.exit() this error is thrown\n * It is handled by the game better and calls onexit()\n */\nclass ExitError extends Error {\n    constructor() {\n        super(\"Stopping game execution\");\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/errors/exit.ts?");

/***/ }),

/***/ "./src/engine/runtime.ts":
/*!*******************************!*\
  !*** ./src/engine/runtime.ts ***!
  \*******************************/
/*! exports provided: CANVAS_WIDTH, CANVAS_HEIGHT, GameRuntime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CANVAS_WIDTH\", function() { return CANVAS_WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CANVAS_HEIGHT\", function() { return CANVAS_HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameRuntime\", function() { return GameRuntime; });\n/* harmony import */ var _3rd_party_stableSort__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../3rd-party/stableSort */ \"./src/3rd-party/stableSort.ts\");\n/* harmony import */ var _3rd_party_stableSort__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_3rd_party_stableSort__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _drivers_keyboard_keyboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./drivers/keyboard/keyboard */ \"./src/engine/drivers/keyboard/keyboard.ts\");\n/* harmony import */ var _drivers_mouse_mouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./drivers/mouse/mouse */ \"./src/engine/drivers/mouse/mouse.ts\");\n/* harmony import */ var _drivers_mouse_touchscreen__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./drivers/mouse/touchscreen */ \"./src/engine/drivers/mouse/touchscreen.ts\");\n/* harmony import */ var _errors_exit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./errors/exit */ \"./src/engine/errors/exit.ts\");\n/* harmony import */ var _sprite__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./state */ \"./src/engine/state.ts\");\n/* harmony import */ var _staticRenderer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./staticRenderer */ \"./src/engine/staticRenderer.ts\");\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./task */ \"./src/engine/task.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils */ \"./src/engine/utils.ts\");\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./vector */ \"./src/engine/vector.ts\");\n\n\n\n\n\n\n\n\n\n\n\n/*\n * The main game runtime object\n */\n// Dimensions of the canvas\nconst CANVAS_WIDTH = 480;\nconst CANVAS_HEIGHT = 360;\n// Format of images\n// .jpg might work but don't, just don't\nconst IMAGE_FORMAT = \"png\";\n// Format of sounds\n// mp3 has very wide browser support: https://caniuse.com/#feat=mp3\nconst SOUND_FORMAT = \"mp3\";\nclass GameRuntime extends _task__WEBPACK_IMPORTED_MODULE_8__[\"TaskRunner\"] {\n    constructor(container) {\n        super();\n        // debug config variables\n        this._DEBUG_NON_STATIC_OUTLINE = false;\n        this._DEBUG_STATIC_OUTLINE = false;\n        this.isMobile = Object(_utils__WEBPACK_IMPORTED_MODULE_9__[\"isMobile\"])();\n        this.images = new Map();\n        this.sounds = new Map();\n        this.sprites = [];\n        this.frames = 0;\n        this.started = false;\n        this.background = \"white\";\n        this.defaultState = new _state__WEBPACK_IMPORTED_MODULE_6__[\"GameState\"]();\n        this.cursor = \"default\";\n        this._volume = 0;\n        this._assetPromises = [];\n        // make the main canvas and add it to the DOM\n        const { canvas, ctx } = this.createCanvas({ alpha: false });\n        this.canvas = canvas;\n        this.ctx = ctx;\n        container.appendChild(this.canvas);\n        // init static rendering optimizations\n        const { canvas: staticCanvas, ctx: staticCtx } = this.createCanvas();\n        this.staticCanvas = staticCanvas;\n        this.staticCtx = staticCtx;\n        // collision canvas\n        const { canvas: collisionCanvas, ctx: collisionCtx } = this.createCanvas();\n        this.collisionCanvas = collisionCanvas;\n        this.collisionCtx = collisionCtx;\n        // mouse driver, support pc and mobile to some degree\n        if (this.isMobile) {\n            // console.log(\"mobile\");\n            this.mouse = new _drivers_mouse_touchscreen__WEBPACK_IMPORTED_MODULE_3__[\"TouchscreenMouse\"](this);\n        }\n        else {\n            // console.log(\"pc\");\n            this.mouse = new _drivers_mouse_mouse__WEBPACK_IMPORTED_MODULE_2__[\"Mouse\"](this);\n        }\n        this.addTask(() => this.mouse.update());\n        this.keyboard = new _drivers_keyboard_keyboard__WEBPACK_IMPORTED_MODULE_1__[\"Keyboard\"](this);\n        // set the current runtime on some objects\n        // i dont want to do this but it works\n        // FIXME: GameRuntime.instance instead of this.runtime\n        _sprite__WEBPACK_IMPORTED_MODULE_5__[\"AbstractSprite\"].runtime = this;\n        // set inital variables that have to happen after other things here\n        this.volume = 0.5;\n    }\n    ///\n    /// ASSETS\n    ///\n    // add an asset and start loading it\n    addImage(src) {\n        // uses the original src for storage\n        // TODO: consider using the new src and adding that into getAsset?\n        const originalSrc = src;\n        // add the extension and folder\n        src = `assets/${src}`;\n        if (src.indexOf(\".\") === -1) {\n            src += \".\" + IMAGE_FORMAT;\n        }\n        // console.log(\"adding image\", src);\n        const promise = new Promise((resolve, reject) => {\n            const image = new Image();\n            image.src = src;\n            image.onload = () => resolve();\n            image.onerror = () => reject();\n            this.images.set(originalSrc, image);\n        });\n        this._assetPromises.push(promise);\n        return promise;\n    }\n    // see: addImage()\n    addSound(src) {\n        const originalSrc = src;\n        // add the extension and folder\n        src = `assets/sounds/${src}`;\n        if (src.indexOf(\".\") === -1) {\n            src += \".\" + SOUND_FORMAT;\n        }\n        // console.log(\"adding sound\", src);\n        const promise = new Promise((resolve, reject) => {\n            const sound = new Audio(src);\n            sound.oncanplaythrough = () => resolve();\n            sound.onerror = () => reject();\n            sound.preload = \"auto\";\n            this.sounds.set(originalSrc, sound);\n        });\n        // music doesn't need to load for the game to work\n        // it can load in the background when it starts to play\n        // this._assetPromises.push(promise);\n        return promise;\n    }\n    // wait for all assets to load\n    waitForAssets(handler = () => { }) {\n        // progress reporting\n        const total = this._assetPromises.length;\n        let current = 0;\n        for (const promise of this._assetPromises) {\n            promise.then(() => {\n                current++;\n                handler(current / total);\n            });\n        }\n        // the actual loading stuff\n        return Promise.all(this._assetPromises)\n            .then(() => {\n            // console.log(\"loaded assets\");\n            this._assetPromises = [];\n        });\n    }\n    // get an asset with a name\n    getImage(src) {\n        const image = this.images.get(src);\n        if (!image) {\n            throw new Error(`Couldn't get image with name ${src}`);\n        }\n        return image;\n    }\n    // get a sound with a name\n    getSound(src, clone = false) {\n        const val = this.sounds.get(src);\n        if (!val) {\n            throw new Error(`Couldn't get audio with name ${src}`);\n        }\n        if (clone) {\n            return val.cloneNode();\n        }\n        else {\n            return val;\n        }\n    }\n    // plays a sound and resets its currentTime to 0\n    playSound(src, clone = false) {\n        if (typeof src === \"string\") {\n            src = this.getSound(src, clone);\n        }\n        src.currentTime = 0;\n        src.volume = this.volume;\n        src.play();\n        return src;\n    }\n    // stops a sound and resets its currentTime to 0\n    stopSound(src) {\n        if (typeof src === \"string\") {\n            src = this.getSound(src);\n        }\n        src.currentTime = 0;\n        src.pause();\n        return src;\n    }\n    ///\n    /// CORE\n    ///\n    // resets things and starts the loop\n    start() {\n        // console.log(\"starting loop\");\n        this.loop();\n        this.updateStatic();\n        this.started = true;\n        new _staticRenderer__WEBPACK_IMPORTED_MODULE_7__[\"StaticRendererSprite\"]({\n            position: new _vector__WEBPACK_IMPORTED_MODULE_10__[\"Vector\"](0, 0, -1),\n            persistent: true,\n        });\n    }\n    // the main loop - calls all tasks in all sprites\n    loop() {\n        // update sprites and this\n        this.frames++;\n        try {\n            this.update();\n        }\n        catch (e) {\n            // handle exiting\n            if (e instanceof _errors_exit__WEBPACK_IMPORTED_MODULE_4__[\"ExitError\"]) {\n                this.onexit();\n                return;\n            }\n            else {\n                throw e;\n            }\n        }\n        // render\n        this.render();\n        // request the next frame to render\n        requestAnimationFrame(() => this.loop());\n    }\n    update() {\n        this.cursor = \"default\";\n        // all non-core details should be implemented using this.addTask\n        // the only core things right now are sprite ticking and rendering (partly due to ordering reasons)\n        // all tasks added on here are executed BEFORE sprites\n        this.runTasks();\n        // all sprites\n        for (const sprite of this.sprites) {\n            if (sprite.gameState && !sprite.gameState.updatingEnabled) {\n                continue;\n            }\n            sprite.update();\n        }\n    }\n    stopAllSounds() {\n        for (const sound of this.sounds.values()) {\n            this.stopSound(sound);\n        }\n    }\n    // throws an error that is handled gracefully by the update function\n    // stops ALL execution\n    exit() {\n        this.stopAllSounds();\n        console.warn(\"exiting using exit()\");\n        // instances of ExitError are treated specially by the update function\n        throw new _errors_exit__WEBPACK_IMPORTED_MODULE_4__[\"ExitError\"]();\n    }\n    ///\n    /// EVENTS\n    ///\n    // called when exiting\n    onexit() {\n        this.started = false;\n    }\n    // when volume is set\n    onsetvolume(volume) {\n    }\n    ///\n    /// RENDERING\n    ///\n    updateStatic() {\n        this.resetCanvas(this.staticCtx);\n        this.sortSprites();\n        for (const sprite of this.sprites) {\n            if (sprite.static) {\n                sprite.render(this.staticCtx);\n            }\n        }\n        if (this._DEBUG_STATIC_OUTLINE) {\n            this.staticCtx.strokeStyle = \"orange\";\n            this.staticCtx.lineWidth = 1;\n            this.staticCtx.beginPath();\n            for (const sprite of this.sprites) {\n                this.staticCtx.rect(sprite.x, sprite.y, sprite.width, sprite.height);\n            }\n            this.staticCtx.closePath();\n            this.staticCtx.stroke();\n        }\n    }\n    render() {\n        // clear the canvas\n        this.resetCanvas(this.ctx, this.background);\n        // sort sprites by z\n        this.sortSprites();\n        // render all non static sprites onto our canvas\n        for (const sprite of this.sprites) {\n            if (sprite.gameState && !sprite.gameState.renderingEnabled) {\n                continue;\n            }\n            if (!sprite.static) {\n                sprite.render(this.ctx);\n            }\n        }\n        if (this.canvas.style.cursor !== this.cursor) {\n            this.canvas.style.cursor = this.cursor;\n        }\n        if (this._DEBUG_NON_STATIC_OUTLINE) {\n            this.ctx.strokeStyle = \"red\";\n            this.ctx.lineWidth = 1;\n            this.ctx.beginPath();\n            for (const sprite of this.sprites) {\n                if (sprite.gameState && !sprite.gameState.renderingEnabled) {\n                    continue;\n                }\n                if (!sprite.static) {\n                    this.ctx.rect(sprite.x, sprite.y, sprite.width, sprite.height);\n                }\n            }\n            this.ctx.closePath();\n            this.ctx.stroke();\n        }\n    }\n    sortSprites() {\n        // if the sprites list isn't sorted anymore, then sort it\n        const end = this.sprites.length - 1;\n        for (let i = 0; i < end; i++) {\n            const thisSprite = this.sprites[i];\n            const nextSprite = this.sprites[i + 1];\n            if (thisSprite.z > nextSprite.z) {\n                this.sprites.stableSort((a, b) => a.position.z - b.position.z);\n                break;\n            }\n        }\n    }\n    // clears the canvas and sets the background or makes it transparent\n    resetCanvas(ctx, background = \"rgba(0, 0, 0, 0)\") {\n        const width = ctx.canvas.width;\n        const height = ctx.canvas.height;\n        ctx.clearRect(0, 0, width, height);\n        ctx.fillStyle = background;\n        ctx.fillRect(0, 0, width, height);\n    }\n    createCanvas(options) {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = CANVAS_WIDTH;\n        canvas.height = CANVAS_HEIGHT;\n        const ctx = canvas.getContext(\"2d\", options);\n        ctx.imageSmoothingEnabled = false;\n        return { canvas, ctx };\n    }\n    ///\n    /// ACCESSORS\n    ///\n    get volume() {\n        return this._volume;\n    }\n    set volume(volume) {\n        for (const sound of this.sounds.values()) {\n            sound.volume = volume;\n        }\n        this._volume = volume;\n        this.onsetvolume(volume);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/runtime.ts?");

/***/ }),

/***/ "./src/engine/sprite.ts":
/*!******************************!*\
  !*** ./src/engine/sprite.ts ***!
  \******************************/
/*! exports provided: AbstractSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractSprite\", function() { return AbstractSprite; });\n/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./task */ \"./src/engine/task.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/engine/utils.ts\");\n/* harmony import */ var _vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _vector2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vector2d */ \"./src/engine/vector2d.ts\");\n\n\n\n\nclass AbstractSprite extends _task__WEBPACK_IMPORTED_MODULE_0__[\"TaskRunner\"] {\n    constructor(options) {\n        super();\n        this.runtime = AbstractSprite.runtime;\n        // disable pass by reference for positions\n        if (options.position instanceof _vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"]) {\n            this.position = new _vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](options.position);\n        }\n        else {\n            this.position = options.position;\n        }\n        this.width = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.width, 0);\n        this.height = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.height, 0);\n        this.scale = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.scale, new _vector2d__WEBPACK_IMPORTED_MODULE_3__[\"Vector2D\"](1, 1));\n        this.persistent = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.persistent, false);\n        this.visible = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.visible, true);\n        this.rotation = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.rotation, 0);\n        this.opacity = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.opacity, 1);\n        this.rotationPoint = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.rotationPoint, new _vector2d__WEBPACK_IMPORTED_MODULE_3__[\"Vector2D\"](0.5, 0.5));\n        this.static = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.static, false);\n        this.gameState = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.gameState, this.runtime.defaultState);\n        this.runtime.sprites.push(this);\n    }\n    update() {\n        this.runTasks();\n    }\n    destroy() {\n        this._removeFromList(this.runtime.sprites);\n        this.resetTasks(); // stop all future things from running\n        // removed from all lists, should be effectively invisible\n        // allows some nightlight optimizations to not ruin things\n        this.visible = false;\n    }\n    _removeFromList(list) {\n        const index = list.indexOf(this);\n        if (index > -1) {\n            list.splice(index, 1);\n        }\n    }\n    // TODO: rotation\n    intersects(thing) {\n        if (thing instanceof AbstractSprite) {\n            return this.x < thing.x + thing.width &&\n                this.x + this.width > thing.x &&\n                this.y < thing.y + thing.height &&\n                this.y + this.height > thing.y;\n        }\n        else {\n            for (const sprite of thing) {\n                if (this.intersects(sprite)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    }\n    containsPoint(point) {\n        return this.x < point.x &&\n            this.x + this.width > point.x &&\n            this.y < point.y &&\n            this.y + this.height > point.y;\n    }\n    _setRenderValues(ctx) {\n        ctx.globalAlpha = this.opacity;\n        if (this.rotation !== 0) {\n            // terrible code\n            // rotation is difficult\n            // https://stackoverflow.com/a/4650102\n            const translateX = this.x + this.width * this.rotationPoint.x;\n            const translateY = this.y + this.height * this.rotationPoint.y;\n            ctx.translate(translateX, translateY);\n            ctx.rotate(Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"degreeToRadians\"])(this.rotation));\n            ctx.translate(-translateX, -translateY);\n        }\n        if (this.scale.x !== 1 || this.scale.y !== 1) {\n            const translateX = this.x + this.width / 2;\n            const translateY = this.y + this.height / 2;\n            ctx.translate(translateX, translateY);\n            ctx.scale(this.scale.x, this.scale.y);\n            ctx.translate(-translateX, -translateY);\n        }\n    }\n    // moves in the direction being faced X pixels\n    moveForward(steps) {\n        const angle = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"degreeToRadians\"])(this.rotation);\n        const sin = Math.sin(angle);\n        const cos = Math.cos(angle);\n        this.x += sin * steps;\n        this.y += cos * steps;\n    }\n    distanceTo(point) {\n        return Math.sqrt(Math.pow((point.x - this.centerX), 2) + Math.pow((point.y - this.centerY), 2));\n    }\n    get x() {\n        return this.position.x;\n    }\n    set x(x) {\n        this.position.x = x;\n    }\n    get y() {\n        return this.position.y;\n    }\n    set y(y) {\n        this.position.y = y;\n    }\n    get z() {\n        return this.position.z;\n    }\n    set z(z) {\n        this.position.z = z;\n    }\n    get centerX() {\n        return this.x + (this.width / 2);\n    }\n    get centerY() {\n        return this.y + (this.height / 2);\n    }\n    get centerPosition() {\n        return new _vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.centerX, this.centerY);\n    }\n    // Tests if a \"complex\" (fancy rendering/non square) sprite is touching a simple (square) sprite\n    complexIntersectsSimple(sprite) {\n        const canvas = this.runtime.collisionCanvas;\n        const ctx = this.runtime.collisionCtx;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        this.render(ctx);\n        const data = ctx.getImageData(sprite.x, sprite.y, sprite.width, sprite.height).data;\n        // some browsers are funny (specifically tor)\n        // TODO: warning message?\n        if (!data) {\n            return false;\n        }\n        const length = data.length;\n        for (let i = 3; i < length; i += 4) {\n            if (data[i]) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/sprite.ts?");

/***/ }),

/***/ "./src/engine/sprites/imagesprite.ts":
/*!*******************************************!*\
  !*** ./src/engine/sprites/imagesprite.ts ***!
  \*******************************************/
/*! exports provided: ImageSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImageSprite\", function() { return ImageSprite; });\n/* harmony import */ var _sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"./src/engine/utils.ts\");\n\n\nclass ImageSprite extends _sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\n    constructor(options) {\n        super(options);\n        this.texture = options.texture;\n        this.width = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.width, this.texture.width);\n        this.height = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.height, this.texture.height);\n        this.rotation = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.rotation, 0);\n        this.opacity = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(options.opacity, 1);\n    }\n    render(ctx) {\n        if (!this.visible) {\n            return;\n        }\n        ctx.save();\n        this._setRenderValues(ctx);\n        const x = this.x;\n        const y = this.y;\n        ctx.drawImage(this.texture, x, y, this.width, this.height);\n        ctx.restore();\n    }\n    updateDimensions() {\n        this.width = this.texture.width;\n        this.height = this.texture.height;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/sprites/imagesprite.ts?");

/***/ }),

/***/ "./src/engine/state.ts":
/*!*****************************!*\
  !*** ./src/engine/state.ts ***!
  \*****************************/
/*! exports provided: GameState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameState\", function() { return GameState; });\nclass GameState {\n    constructor() {\n        this.renderingEnabled = true;\n        this.updatingEnabled = true;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/state.ts?");

/***/ }),

/***/ "./src/engine/staticRenderer.ts":
/*!**************************************!*\
  !*** ./src/engine/staticRenderer.ts ***!
  \**************************************/
/*! exports provided: StaticRendererSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StaticRendererSprite\", function() { return StaticRendererSprite; });\n/* harmony import */ var _sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sprite */ \"./src/engine/sprite.ts\");\n\nclass StaticRendererSprite extends _sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\n    render(ctx) {\n        ctx.drawImage(this.runtime.staticCanvas, 0, 0);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/staticRenderer.ts?");

/***/ }),

/***/ "./src/engine/task.ts":
/*!****************************!*\
  !*** ./src/engine/task.ts ***!
  \****************************/
/*! exports provided: Task, TaskRunner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Task\", function() { return Task; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TaskRunner\", function() { return TaskRunner; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/engine/utils.ts\");\n\n// a task is something to be run at a certain time, maybe repeating\nclass Task {\n    constructor(options) {\n        this.repeatCount = 0;\n        const runnable = options.run;\n        const delay = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getOrDefault\"])(options.delay, 0);\n        const repeatEvery = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getOrDefault\"])(options.repeatEvery, -1);\n        const repeatMax = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getOrDefault\"])(options.repeatMax, Infinity);\n        const onend = Object(_utils__WEBPACK_IMPORTED_MODULE_0__[\"getOrDefault\"])(options.onend, null);\n        this.originalOptions = options;\n        this.runnable = runnable;\n        this.delay = delay;\n        this.repeatEvery = repeatEvery;\n        this.repeatMax = repeatMax;\n        this.onend = onend;\n    }\n    run() {\n        // pass this task to the function so that it can call things like task.stop();\n        this.runnable(this);\n    }\n    stop() {\n        this.delay = -1;\n    }\n}\n// the things that runs tasks\n// adds everything tasks use\n// most methods prefixed with _ to avoid as many collisions as possible\n// almost EVERYTHING extends this (and as such can have tasks on it)\nclass TaskRunner {\n    constructor() {\n        this._tasks = [];\n        this._newTasks = [];\n    }\n    runTasks() {\n        if (this._newTasks.length > 0) {\n            for (const newTask of this._newTasks) {\n                this._tasks.push(newTask);\n            }\n            this._newTasks = [];\n        }\n        for (const task of this._tasks) {\n            if (task.delay <= 0) {\n                task.run();\n                task.repeatCount++;\n                if (task.delay === -1) {\n                    // called task.stop();\n                }\n                else if (task.repeatEvery >= 0 && task.repeatCount < task.repeatMax) {\n                    task.delay = task.repeatEvery;\n                }\n                else {\n                    task.delay = -1;\n                }\n            }\n            else {\n                task.delay--;\n            }\n        }\n        this._tasks = this._tasks.filter((task) => {\n            if (task.delay === -1) {\n                if (task.onend) {\n                    task.onend();\n                }\n                return false;\n            }\n            return true;\n        });\n    }\n    resetTasks() {\n        this._tasks = [];\n    }\n    stopAllTasks() {\n        this._tasks = [];\n        this._newTasks = [];\n    }\n    // add a task\n    // can either be a task or a function\n    // if it is a task it is added as you would expect\n    // if it is a function it will repeat every frame\n    addTask(task) {\n        if (typeof task === \"function\") {\n            return this.addTask(new Task({\n                run: task,\n                repeatEvery: 0,\n            }));\n        }\n        else {\n            this._newTasks.push(task);\n            return task;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/task.ts?");

/***/ }),

/***/ "./src/engine/utils.ts":
/*!*****************************!*\
  !*** ./src/engine/utils.ts ***!
  \*****************************/
/*! exports provided: isMobile, getOrDefault, toHex, radiansToDegree, degreeToRadians */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"isMobile\", function() { return isMobile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getOrDefault\", function() { return getOrDefault; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toHex\", function() { return toHex; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"radiansToDegree\", function() { return radiansToDegree; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"degreeToRadians\", function() { return degreeToRadians; });\n// https://stackoverflow.com/a/3540295\n// tests if the device is probably a mobile phone\nfunction isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n}\n// if obj is defined, return obj\n// else return def\n// used as less verbose option defaulting without neglecting falsy values (|| does that)\nfunction getOrDefault(obj, def) {\n    if (typeof obj === \"undefined\") {\n        return def;\n    }\n    else {\n        return obj;\n    }\n}\n// https://stackoverflow.com/a/697841\nfunction toHex(number) {\n    return number.toString(16).toUpperCase();\n}\nfunction radiansToDegree(rad) {\n    return rad * 180 / Math.PI;\n}\nfunction degreeToRadians(deg) {\n    return deg * Math.PI / 180;\n}\n\n\n//# sourceURL=webpack:///./src/engine/utils.ts?");

/***/ }),

/***/ "./src/engine/vector.ts":
/*!******************************!*\
  !*** ./src/engine/vector.ts ***!
  \******************************/
/*! exports provided: Vector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector\", function() { return Vector; });\n/* harmony import */ var _vector2d__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vector2d */ \"./src/engine/vector2d.ts\");\n\n/*\n * A 3D Vector: (x, y, z)\n *\n * z is optional when creating Vectors\n */\n// a simple position class that removes some verbosity from code\n// can make for some nicer code sometimes\nclass Vector extends _vector2d__WEBPACK_IMPORTED_MODULE_0__[\"Vector2D\"] {\n    constructor(x = 0, y = 0, z = 0) {\n        super(x, y);\n        if (typeof x === \"object\") {\n            this.z = x.z;\n        }\n        else {\n            this.z = z;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/vector.ts?");

/***/ }),

/***/ "./src/engine/vector2d.ts":
/*!********************************!*\
  !*** ./src/engine/vector2d.ts ***!
  \********************************/
/*! exports provided: Vector2D */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector2D\", function() { return Vector2D; });\n/*\n * A 2D Vector: (x, y)\n *\n * Used for scale and other only 2D stuff\n */\nclass Vector2D {\n    constructor(x = 0, y = 0) {\n        if (typeof x === \"object\") {\n            this.x = x.x;\n            this.y = x.y;\n        }\n        else {\n            this.x = x;\n            this.y = y;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/engine/vector2d.ts?");

/***/ }),

/***/ "./src/game/game.ts":
/*!**************************!*\
  !*** ./src/game/game.ts ***!
  \**************************/
/*! exports provided: Nightlight */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Nightlight\", function() { return Nightlight; });\n/* harmony import */ var _blockmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../blockmap */ \"./src/blockmap.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../engine/runtime */ \"./src/engine/runtime.ts\");\n/* harmony import */ var _engine_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../engine/state */ \"./src/engine/state.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _engine_vector2d__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../engine/vector2d */ \"./src/engine/vector2d.ts\");\n/* harmony import */ var _levelcode__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../levelcode */ \"./src/levelcode.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _levels__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./levels */ \"./src/game/levels.ts\");\n/* harmony import */ var _sprites_bosses_final_finalboss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sprites/bosses/final/finalboss */ \"./src/game/sprites/bosses/final/finalboss.ts\");\n/* harmony import */ var _sprites_bosses_noss_noss__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./sprites/bosses/noss/noss */ \"./src/game/sprites/bosses/noss/noss.ts\");\n/* harmony import */ var _sprites_bosses_sword_sword__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./sprites/bosses/sword/sword */ \"./src/game/sprites/bosses/sword/sword.ts\");\n/* harmony import */ var _sprites_jumplight__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./sprites/jumplight */ \"./src/game/sprites/jumplight.ts\");\n/* harmony import */ var _sprites_pause_PauseSprite__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./sprites/pause/PauseSprite */ \"./src/game/sprites/pause/PauseSprite.ts\");\n/* harmony import */ var _sprites_player_player__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./sprites/player/player */ \"./src/game/sprites/player/player.ts\");\n/* harmony import */ var _sprites_stars__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./sprites/stars */ \"./src/game/sprites/stars.ts\");\n/* harmony import */ var _sprites_text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./sprites/text/StaticNightlightTextSprite */ \"./src/game/sprites/text/StaticNightlightTextSprite.ts\");\n/* harmony import */ var _sprites_zindex__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./sprites/zindex */ \"./src/game/sprites/zindex.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SPOTLIGHT_SIZE = 75;\nconst TOTAL_BACKGROUND_STARS = 100;\nclass Nightlight extends _engine_runtime__WEBPACK_IMPORTED_MODULE_2__[\"GameRuntime\"] {\n    constructor() {\n        super(Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getElementById\"])(\"canvas\"));\n        this.level = 0;\n        this.levelData = \"\";\n        this.levels = [];\n        this.background = \"black\";\n        this.backgroundMusic = [];\n        this.darkLevel = false;\n        this.ordereredBlocks = [];\n        this.blocks = [];\n        this.playState = this.defaultState;\n        this.pauseState = new _engine_state__WEBPACK_IMPORTED_MODULE_3__[\"GameState\"]();\n        (Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getElementById\"])(\"volume\")).oninput = (e) => {\n            const volume = Number(e.target.value);\n            this.updateVolume(volume);\n        };\n        this.updateVolume(Number(Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getElementById\"])(\"volume\").value));\n        window.runtime = this;\n    }\n    updateVolume(volume) {\n        this.volume = volume / 100;\n    }\n    //\n    // Utilities and Init\n    //\n    setBackgroundMusic(music) {\n        // for (const sound of this.backgroundMusic) {\n        //   this.stopSound(sound);\n        //   sound.loop = false;\n        //   sound.onended = () => {};\n        // }\n        // this.backgroundMusic = music;\n        // for (const sound of music) {\n        //   sound.onended = () => this.nextBackgroundMusic();\n        // }\n        // if (music.length > 0) {\n        //   this.playSound(music[0]);\n        // }\n    }\n    nextBackgroundMusic() {\n        if (this.backgroundMusic.length > 1) {\n            this.backgroundMusic.shift();\n        }\n        this.playSound(this.backgroundMusic[0]);\n    }\n    createPlayer() {\n        this.player = new _sprites_player_player__WEBPACK_IMPORTED_MODULE_14__[\"PlayerSprite\"]({\n            texture: this.getImage(\"player/idle\"),\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0, _sprites_zindex__WEBPACK_IMPORTED_MODULE_17__[\"ZIndexes\"].Player),\n            width: _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"],\n            height: _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"],\n            persistent: true,\n        });\n    }\n    createStarBackground() {\n        const positions = [];\n        for (let i = 0; i < TOTAL_BACKGROUND_STARS; i++) {\n            const x = Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getRandomInt\"])(0, this.canvas.width);\n            const y = Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getRandomInt\"])(0, this.canvas.height);\n            positions.push(new _engine_vector2d__WEBPACK_IMPORTED_MODULE_5__[\"Vector2D\"](x, y));\n        }\n        this.backgroundStars = new _sprites_stars__WEBPACK_IMPORTED_MODULE_15__[\"BackgroundStarsSprite\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0, _sprites_zindex__WEBPACK_IMPORTED_MODULE_17__[\"ZIndexes\"].Stars),\n            width: 2,\n            height: 2,\n            persistent: true,\n        }, positions);\n    }\n    //\n    // Overrides\n    //\n    start(levels) {\n        super.start();\n        new _sprites_pause_PauseSprite__WEBPACK_IMPORTED_MODULE_13__[\"PauseSprite\"]({\n            texture: this.getImage(\"pause\"),\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0),\n            persistent: true,\n        });\n        this.castleBackground = this.ctx.createPattern(this.getImage(\"brick\"), \"repeat\");\n        if (levels) {\n            this.levels = levels;\n        }\n        else {\n            this.levels = Object(_levels__WEBPACK_IMPORTED_MODULE_8__[\"getLevels\"])(this);\n        }\n        this.createPlayer();\n        this.createStarBackground();\n        this.renderLevel();\n    }\n    render() {\n        super.render();\n        if (this.darkLevel) {\n            // https://stackoverflow.com/a/6271865\n            const { canvas: coverCanvas, ctx: coverCtx } = this.createCanvas();\n            coverCtx.fillStyle = \"black\";\n            this.resetCanvas(coverCtx, \"black\");\n            coverCtx.globalCompositeOperation = \"xor\";\n            const player = this.player;\n            const centerX = player.x + (player.width / 2);\n            const centerY = player.y + (player.height / 2);\n            coverCtx.arc(centerX, centerY, SPOTLIGHT_SIZE, 0, 2 * Math.PI);\n            coverCtx.fill();\n            this.ctx.drawImage(coverCanvas, 0, 0);\n        }\n    }\n    //\n    // Levels\n    //\n    destroyLevel() {\n        const sprites = Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"clone\"])(this.sprites);\n        for (const sprite of sprites) {\n            if (!sprite.persistent) {\n                sprite.destroy();\n            }\n        }\n    }\n    createBlock(position, char, index) {\n        const blockType = _blockmap__WEBPACK_IMPORTED_MODULE_0__[\"blockMap\"][char];\n        if (typeof blockType === \"undefined\") {\n            throw new Error(`Could not find block metadata for ${char}`);\n        }\n        const texture = this.getImage(blockType.texture);\n        const spriteConstructor = blockType.type;\n        if (!texture) {\n            console.error(`Could not find block texture for ${blockType}, skipping`);\n            return;\n        }\n        const opts = {\n            width: texture.width,\n            height: texture.height,\n            position,\n            texture,\n            levelIndex: index,\n        };\n        const block = new spriteConstructor(opts);\n        return block;\n    }\n    renderLevel(d = this.level) {\n        this.destroyLevel();\n        const level = typeof d === \"object\" ? d : this.levels[d];\n        const levelData = level.levelData;\n        this.levelData = levelData;\n        let x = 0;\n        let y = this.canvas.height - _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"];\n        for (let i = 0; i < levelData.length; i++) {\n            const char = levelData[i];\n            if (char !== \".\") {\n                const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](x, y);\n                this.createBlock(position, char, i);\n            }\n            x += _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_WIDTH\"];\n            if (x >= this.canvas.width) {\n                x = 0;\n                y -= _config__WEBPACK_IMPORTED_MODULE_1__[\"BLOCK_HEIGHT\"];\n            }\n        }\n        // Level metadata\n        // if a level changes the background\n        if (level.background) {\n            if (level.background === \"castle\") {\n                level.background = this.castleBackground;\n            }\n            this.background = level.background;\n        }\n        // if a level has new background music\n        if (level.backgroundMusic) {\n            // this.setBackgroundMusic(level.backgroundMusic.map((i) => this.getSound(i)));\n        }\n        // if a level has handlers\n        if (level.handlers) {\n            for (const handler of level.handlers) {\n                handler(this);\n            }\n        }\n        // if a level has a boss\n        if (typeof level.boss !== \"undefined\" && level.boss.type !== \"\") {\n            if (level.boss.type === \"sword\") {\n                new _sprites_bosses_sword_sword__WEBPACK_IMPORTED_MODULE_11__[\"SwordBoss\"]({\n                    texture: this.getImage(\"boss/sword/sword\"),\n                    position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0),\n                }, level.boss);\n            }\n            else if (level.boss.type === \"noss1\") {\n                new _sprites_bosses_noss_noss__WEBPACK_IMPORTED_MODULE_10__[\"NossBoss\"]({\n                    texture: this.getImage(\"boss/noss/noss\"),\n                    position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0),\n                });\n            }\n            else if (level.boss.type === \"noss2\") {\n                new _sprites_bosses_final_finalboss__WEBPACK_IMPORTED_MODULE_9__[\"FinalBoss\"]({\n                    texture: this.getImage(\"boss/noss/noss\"),\n                    position: new _engine_vector__WEBPACK_IMPORTED_MODULE_4__[\"Vector\"](0, 0),\n                });\n            }\n            else {\n                throw new Error(\"Unknown boss\");\n            }\n        }\n        if (typeof level.stars !== \"undefined\") {\n            this.backgroundStars.visible = level.stars;\n        }\n        // spawn text\n        if (level.text) {\n            for (const textOption of level.text) {\n                new _sprites_text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_16__[\"StaticNightlightTextSprite\"](textOption);\n            }\n        }\n        // dark rooms\n        this.darkLevel = !!level.dark;\n        // spawn things that you can jump on\n        if (level.jumpLights) {\n            this.spawnJumpLights(level.jumpLights);\n        }\n        // custom spawn handling\n        if (level.spawn) {\n            this.playerSpawn = level.spawn;\n        }\n        else {\n            this.playerSpawn = {\n                type: \"default\",\n            };\n        }\n        // render static things that were just created\n        this.updateStatic();\n        this.levelCode = Object(_levelcode__WEBPACK_IMPORTED_MODULE_6__[\"getContinueCodeForLevel\"])(this.level);\n        this.player.reset();\n    }\n    spawnJumpLights(positions) {\n        const texture = this.getImage(\"jumplight\");\n        for (const position of positions) {\n            new _sprites_jumplight__WEBPACK_IMPORTED_MODULE_12__[\"JumpLight\"]({\n                texture,\n                position,\n            });\n        }\n    }\n    onsetvolume(volume) {\n        Object(_utils__WEBPACK_IMPORTED_MODULE_7__[\"getElementById\"])(\"volume-level\").textContent = Math.round(volume * 100) + \"%\";\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/game.ts?");

/***/ }),

/***/ "./src/game/levels.ts":
/*!****************************!*\
  !*** ./src/game/levels.ts ***!
  \****************************/
/*! exports provided: getLevels */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLevels\", function() { return getLevels; });\n/* harmony import */ var _engine_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine/runtime */ \"./src/engine/runtime.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./src/utils.ts\");\n/* harmony import */ var _sprites_ending_EndingSprite__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sprites/ending/EndingSprite */ \"./src/game/sprites/ending/EndingSprite.ts\");\n\n\n\n\n/*\n * It's level data\n */\nfunction goodbye() {\n    new _sprites_ending_EndingSprite__WEBPACK_IMPORTED_MODULE_3__[\"EndingSprite\"]({\n        position: new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](0, 0),\n    });\n}\n// This is terrible and should be changed.\nfunction getLevels(game) {\n    return [\n        /* tslint:disable:max-line-length */\n        // 0\n        {\n            levelData: \"eaaaaaaaaafeaaaafeaaaaaaaaaaaaeaaaaaaaaafbccccdeaaaaaaaaaaaaeaaaaaaaaafooooooeaaaaaaaaaaaaeaaaaaaaaaf......eaaaaaaaaaaaaeaaaaaaaaaf......eaaaaaaaaaaaabcccccccccd......bcccmaaaaaaaajkpppkkpqkl......jkqpeaaaaaaaa.....................eaaaaaaaa.....................eamccccnc.....................bcdkpkq.k.....................qpl..............................................................................................................................................................................................................................................................................................................................................................................\",\n            background: \"black\",\n            backgroundMusic: [\"music/exploration\"],\n            text: [{\n                    text: \"Small challenges\",\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-214, -26),\n                }],\n            stars: true,\n        },\n        // 1\n        {\n            levelData: \"aaaaaaaaaafr.r.r.r.r.r.eaaaaaaaaaaaaaaaafo.o.o.o.o.o.eaaaaaaaaaaaaaaaaf............eaaaaaaaaaaaaaaaaf............eaaaaaaaaaaaaaaaaf............eaaaaaaaaaaaaaaaaf.gi.........eaaaaaaaaaaaaaaaaf.jl.........eaaaaaaaaaaaaaaaaf.......gi...eaaaaaaccccccccccd.......jl...eaaaaaaqkkpkpqqkkl...........gmaaaaaa.....................gmaaaaaaa.....................bcmaaaaaa.....................kqeaaaaaa............ghhhhi.....eaaaaaa............jpqqkl.....eaaaaaa......ghi..............eaaaaaa......qkp..............eaaaaaa.......................eaaaaaa.............ghhhhi....bccnccc.............jqkkpl....pkq.kqk..........................................................................................\",\n            text: [{\n                    text: \"Higher Hills!\",\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-40, -124),\n                }],\n        },\n        // 2\n        {\n            levelData: \"aaaaaaf..............srrrrrrrraaaaaaf..............srrrrrrrraaaaaaf..............srrrrrrrraaaaaaf..............sssssrrrraaaaaaf..................srrrraaaaaaf..t....t..........srrrraaaaaaf..................srrrraaaaaaf..................ssnssaaaaaaf.......................ccccccd.......................kpkqqkl....gi............................ef.........ghhhhhhh...........ef.......ghmaaaaaaa...........ef......gmaaaaaaaaa...........emhhhhhhmaaaaaaaaaa...........eaaaaaaaaaaaaaaaaaa.........ghmaaaaaaaaaaaaaaaaaa.......ghmaaaaaaaaaaaaaaaaaaaa.....ghmaaaaaaaaaaaaaaaaaaaaaa...ghmaaaaaaaaaaaaaaaaaaaaaaaa..gmaaaaaaaaaaaaaaaaaaaaaaaaaa.gmaaaaaaaaaaaaaaaaaaaaaaaaaaa.eaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n            text: [{\n                    text: \"They crumble beneath you!\",\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-112, -144),\n                }],\n        },\n        // 3\n        {\n            levelData: \"rrrrrs...................srrrrrrrrrs...................srrrrrrrrrs...................srrrrrrrrrs...................srrrrrrssss...................ssnssrrs......t...t................rrs...........................sss..............t...................................................gi............................emhi.................hi......gmaaf.................amhi...gmaaami...............gaaamhhhmaaaaamhi...........ghmaaaaaaaaaaaaaaamhhi.....ghhmaaaaaaaaaaaaaaaaaaaamhhhhhmaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n            text: [{\n                    text: \"Watch your faces...\",\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-80, 92),\n                }, {\n                    text: \"All six of them\",\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-64, 84),\n                },\n            ],\n        },\n        // 4\n        {\n            levelData: \"aaaaaf.............t....eaaaaaaaaaaf...t..............bcmaaaaaaaaf........t...........bmaaaaamcd.....................bcmmccd.........................ef...........................gmf.....ghhhvvvvvvhhhi.......gmami...gmmcdoo..oobccmhhi....peafp..gmaf...........bcmmhhi..eaf...qeaf.............bmafp..eami...em]i.............emd...eaami..efpp..ghhhi......ef...gmaafq..ef....pqncmi....gmd...eaaaf...bmi.......ef....bd....eaaaf....ef.......ef....w....gmaaami...ef.ghhhhhmmi...w....eaaaaami..emhmccuccmamhi.w..ghmaaaaaaf..bccd.....bmaamhhhhmaaaaaaaaf............eaaaaaaaaaaaaaaaami..........gmaaaaaaaaaaaaaaaaami.......ghmaaaaaaaaaaaaaaaaaaamhhhhhhhmaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n        },\n        // 5\n        {\n            levelData: \"aaaaaaaaaaafbccccdeaaaaaaaaaaaaaaaaaaaaaafooooooeaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaaaaaaaaaaaaaf......eaaaaaaaaaaacccccccccccd......bccccccccccckkpppkkqpkkl......jkqkqkkpqqpp....................................................................................................................................................................................................................................................................................................................................................................................................................................\",\n            boss: {\n                type: \"sword\"\n            },\n            backgroundMusic: [\"music/boss/1\", \"music/boss/2\"],\n        },\n        // 6\n        {\n            levelData: \"aaaaaa5...................4aaaaaaaaa5...........y.......4aaaaaaaaa5...................4aaaaaaaaa5.....y.zzz.........1222aaaaaa5............zzz......x.aaaaaa5.......................2222223..zzz..............................................................................................................y..........................................................................................................................y678...........................4a5..........67778............123...t......4aaa5......68..............t..12n23......13....................................................................................................................................................\",\n            backgroundMusic: [\"music/blackroad/1\", \"music/blackroad/2\"],\n        },\n        // 7\n        {\n            levelData: \"aaaaaaaaaaaaaaaa5..!!!!!4aa5..aaaaaaaaaaaaaaaa5.....x.4aa98.aaaaaaaaaaaaaaaa5.......4aaa5.a9222222222229aa5.......4aaa98a5...w..w....4aa5..!!!!!122223a5...w.......4aa5.......aaaa..a5...w.......4aa5.......aaaa..a5.........!!4aa5!!!!!!!6778!.a5...........4aa5ooooooo4aa5..a978.........1223.......1223..aaa978........................aaaaa98.......................aaaaaa98......................aaaaaaa9778!!!!!..............229a9222223....................z1u3z.........................z...z......68ww68.............z...z......45!!45.............zzzzz......45..45........................45..45........................45..45........................497@95........................4aaaa5............\",\n        },\n        // 8\n        {\n            levelData: \"aaaa5...ooo45.45..45..soo4aaaaaaaa5......13.13..13..s..4aaaaaaaa5....s............s..4aaaa22223....s..#s$.......s..12222.........s..#ssss%s...s.......8........s..#ssssss!!!s.......978.....ss..#ss.......s.......aa98.....s...s$.sssssss@s.....aaa98....s...s$.s.......s.....aaaa98...s$..s$!s.......s.....aaaa93...s$..s$.s.......s.....aaaa5....s$..s$.s.......s.....aaaa5....s$..s$.s.......s.....aaaa5....s...s$!s.......s.....aaaa5...ss...s$.s.......s.....aaaa5....s..#s$.s!!!!!!!s.....aaaa5....s..#s$.sooooooos.....aaaa5....s..#s$!s......!s.....aaaa5.......#s$...............aaaa5.......ss$...............aaaa97778...ss$...............aaaaaaaa97778.................aaaaaaaaaaaa5.................\",\n        },\n        // 9\n        {\n            levelData: \"aaaaaaaaa5oooooooo4aa5......4aaaaaaaaaa5........4aa5......4aaaaaaaaaa5........1223......4a22222229a5..................4a.......4a5..................4a.......4a5..................4a.......4a5.............%....4a8ss....4a5.............o....4a5oo....4a5..................4a5......4a5..................4a5......4a5..................4a5......4a5...678............4a5....ss4a5...4a5.......%....4a5....oo4a5...4a5.......o....4a5......4a5...4a5............4a5......4a5...4a5............4a5......4a5...4a5............4a5s.....4a5...4a5............4a5o.....123...4a5.......%....4a5............4a5.......o....1n5............4a5..............5............4a5..............5............4a5..............\",\n            text: [{\n                    text: \"Touch a dot, jump again!\",\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-56, -108),\n                }],\n            jumpLights: [\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-168, -60),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-184, 20),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-168, 100),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-56, 36),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(136, -132),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(184, -76),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(136, -20),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(88, 20),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(136, 76),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(184, 116),\n            ],\n        },\n        // 10\n        {\n            levelData: \"4aaaaaaaaaaaaa5............4aa4aaaaaaaaaaaaa5............4aa4aaaaaaaaaaaaa5............4aa4aaaaaaaaaaaaa5............1n2122222222222223............w........y....................w........y.............zzz....w..$..#ss$.#s..........z.z....w..$...#s$.#s..........z.z....w..$....s$.#s....%.....zzz....w..s$...s$.#s...#s$...........w..ss$..s$.#s...#s$...........w..sss!!s$.#s...#s$...........w..sx...s$.#s...#s$...........w..s....s$.#s...#s$...........w.......su!ss...#s$...........w.......s...s...#s$...........w.......s...s...#s$...........w.......s...s...#s$...........w.......s!!!s...#s$..........#s$..............#s$..........#s$..............#s$..........#s$..............#s$..........#s$.\",\n            jumpLights: [\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-200, 116),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(104, -52),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-120, -44),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-120, 36),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-200, -28),\n            ],\n        },\n        // 11\n        {\n            levelData: \"aaaaaa5....................4aaaaa92n3....................4aaaaa5......................69aaaaa5.....................6aaaaaaa9778..................129aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aaaaaaaa5....................4aa2222223[[[[[[[[[[[[[[[[[[[[1u2..............................................................................................................................................................................................................................................................................\",\n            jumpLights: [\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(104, -28),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-80, -116),\n            ],\n        },\n        // 12\n        {\n            levelData: \"2222222222229aaaa9222222222222............4aaaa5........................4aaaa5........................122223......................................._=+...........................)^-...........................)^-...........................)^-......6778.................)^-......1223.................)^-...........................)^-...........................)^-...........................)^-.......................6777)^-.......................1222)^-...........................)^-...........................)^-...67778...................)^-...12223...................)^-...........................)^-.........................._`^-..........................&**(..............................\",\n            boss: {\n                type: \"noss1\"\n            },\n            backgroundMusic: [\"music/boss/1\", \"music/boss/2\"],\n            jumpLights: [\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, -44),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, 20),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, 84),\n            ],\n        },\n        // 13\n        {\n            levelData: \"^^^-..........................^^^-..........................***(...t...................................t.............................................................................................t.....................................................................................t.......t................t..............................................................................u.......................................t.....%%%..........................%_=+%........................#_`^`+$.......................#)^^^-$.......................#&*n*($........%%%..............w.w.........._=+..............www..........)^-...........................)^-...........................)^-.\",\n            background: \"castle\",\n            backgroundMusic: [\"music/netherslament\"],\n            text: [{\n                    text: \"Your final challenges.\",\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(56, -127),\n                }],\n            stars: false,\n        },\n        // 14\n        {\n            levelData: \"^^^^-......................)^^^^^^-......................)^^****(...t...t...t...t..t..t)^^...........................)^^...........................)^^...........................&**....._==================+..........)`*****************(.....=====`-oooooooooooooooooo.....******(..t...t...t...t...t.....................................................................t.............................._=======================......&*******************`^^^......oooooooooooooooooooo)^^^......t....t....t....t....&*n*........................................................................................................................==============================^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\",\n        },\n        // 15\n        {\n            levelData: \"^^^^-....................)^^^^^^^^-....................)^^^^****(....................&*u**.....................................................................................................................................................................................................................................................................................................................................%%%%%====+...................._====^^^^-....................)^^^^****(....................&*n**..x......................zw.wz.........................zwwwz.........................zzzzz..........................................................................................\",\n            text: [{\n                    text: \"Timing is everything\",\n                    position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-80, -130),\n                }],\n            jumpLights: [\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-144, -60),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-144, 0),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-144, 60),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, -44),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(144, -60),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(144, 0),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(144, 60),\n            ],\n        },\n        // 16\n        {\n            levelData: \"^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^`****************************`-...........................#)-...........................#)-...........................#)-!!_+......y.....zww..._+z..#)-..)-..................)-...#)-..)-..................)-...#)-%.)-..................)-...#)-sz)-......y.......zww.)-z..#)-..)-..................)-...#)-..)-..................)-...#)-.%)-..................)-...#)-zs)-......y.....wwz...)-z..#)-..)-..................)-...#)-..)-..................)-...#)-%.)-......s........._=`-s..#)-uz&(......x.........&n`-x..#)-....................w.)-...#)-....................w.)-...#)`======================``====`^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\",\n        },\n        // 17\n        {\n            levelData: \"^^^^^^^^^^^^-....)^^^^^^^-....^^^^^^^^^^^^-....)^^^^^^^-....************(....&*******(................................................................................................yyy......................t.................................................................y..........ss............................x..............t.................................w............................w.w..........................._@+....................t......)^-................t..........&u(...t...t...t.................................................................................................................................................................................................\",\n            dark: true,\n            backgroundMusic: [\"music/challenge\"],\n        },\n        // 18\n        {\n            levelData: \"^^^^^^^^-oooooooooooo)^^^^^^^^^^^^^^^^-............)^^^^^^^^^^^^^^^^-............)^^^^^^^^********(............&********................................................................................................................................................................................................................................................==================+$..........^^^^^^^^^^^^^^^^^^-$..........`*****************($..........-.............................-.............................-.............................-.............................-.............................-.............................`=@=======+...................^^^^^^^^^^-...................\",\n            dark: true,\n            jumpLights: [\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(0, -52),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(104, 20),\n                Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(176, -35),\n            ],\n        },\n        // 19\n        {\n            levelData: \"..)^^^^^^^^^^^^^^^^^^^^^^^^-....)^^^^^^^^^^^^^^^^^^^^^^^^-....&************************(..........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................\",\n            backgroundMusic: [\"music/finalboss/1\", \"music/finalboss/2\"],\n            boss: {\n                type: \"noss2\",\n            },\n            spawn: {\n                type: \"range\",\n                minX: 0,\n                maxX: _engine_runtime__WEBPACK_IMPORTED_MODULE_0__[\"CANVAS_WIDTH\"],\n            },\n            background: \"black\",\n            stars: true,\n        },\n        // Goodbye\n        {\n            levelData: \"\",\n            backgroundMusic: [],\n            handlers: [goodbye],\n            stars: false,\n        },\n    ];\n}\n\n\n//# sourceURL=webpack:///./src/game/levels.ts?");

/***/ }),

/***/ "./src/game/physics.ts":
/*!*****************************!*\
  !*** ./src/game/physics.ts ***!
  \*****************************/
/*! exports provided: runPhysics */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"runPhysics\", function() { return runPhysics; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../engine/utils */ \"./src/engine/utils.ts\");\n\n\nfunction runPhysics(sprite, opts = {}) {\n    opts.collision = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.collision, true);\n    opts.restrictPositionValues = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.restrictPositionValues, true);\n    opts.friction = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.friction, _config__WEBPACK_IMPORTED_MODULE_0__[\"FRICTION\"]);\n    opts.midAirFriction = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.midAirFriction, true);\n    opts.roundValues = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_1__[\"getOrDefault\"])(opts.roundValues, true);\n    sprite.x += sprite.xv;\n    if (opts.collision && handleCollision(sprite, true)) {\n        sprite.xv = 0;\n    }\n    if (opts.restrictPositionValues) {\n        if (sprite.x < 0) {\n            sprite.x = 0;\n            sprite.xv = 0;\n        }\n        else if (sprite.x + sprite.width > sprite.runtime.canvas.width) {\n            sprite.x = sprite.runtime.canvas.width - sprite.width;\n            sprite.xv = 0;\n        }\n    }\n    let onGround = false;\n    sprite.yv -= _config__WEBPACK_IMPORTED_MODULE_0__[\"GRAVITY\"];\n    sprite.y -= sprite.yv;\n    if (opts.collision && handleCollision(sprite, false)) {\n        if (sprite.yv < 0) {\n            onGround = true;\n        }\n        sprite.yv = 0;\n    }\n    if (opts.friction !== false) {\n        if (onGround || opts.midAirFriction) {\n            sprite.xv *= opts.friction;\n        }\n    }\n    if (opts.roundValues) {\n        sprite.x = Math.round(sprite.x);\n        sprite.y = Math.round(sprite.y);\n    }\n    return onGround;\n}\nfunction handleCollision(sprite, horizontal) {\n    const center = sprite.centerPosition;\n    const blocksFromLeft = Math.floor(center.x / _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"]);\n    const blocksFromBottom = Math.floor((sprite.runtime.canvas.height - center.y) / _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"]);\n    const centerLevelIndex = blocksFromBottom * _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + blocksFromLeft;\n    const ordereredBlocks = sprite.runtime.ordereredBlocks;\n    const blocks = [\n        // For each block a 3x3 grid is shown, centered around the player\n        // O represents the block this selects\n        /*\n        X X X\n        X X X\n        O X X\n        */\n        ordereredBlocks[centerLevelIndex - _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1],\n        /*\n        X X X\n        X X X\n        X O X\n        */\n        ordereredBlocks[centerLevelIndex - _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"]],\n        /*\n        X X X\n        X X X\n        X X O\n        */\n        ordereredBlocks[centerLevelIndex - _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1],\n        /*\n        X X X\n        X X O\n        X X X\n        */\n        ordereredBlocks[centerLevelIndex + 1],\n        /*\n        X X X\n        X O X\n        X X X\n        */\n        ordereredBlocks[centerLevelIndex],\n        /*\n        X X X\n        O X X\n        X X X\n        */\n        ordereredBlocks[centerLevelIndex - 1],\n        /*\n        X O X\n        X X X\n        X X X\n        */\n        ordereredBlocks[centerLevelIndex + _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"]],\n        /*\n        X X O\n        X X X\n        X X X\n        */\n        ordereredBlocks[centerLevelIndex + _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1],\n        /*\n        O X X\n        X X X\n        X X X\n        */\n        ordereredBlocks[centerLevelIndex + _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1],\n    ];\n    const intersecting = [];\n    // Create a list of blocks that intersect the sprite\n    for (const block of blocks) {\n        if (!block) {\n            continue;\n        }\n        if (block.solid && block.visible && block.intersects(sprite)) {\n            intersecting.push(block);\n        }\n    }\n    // Sort the sprites so that those that are \"intersectingDeferred\" come last\n    intersecting.sort((a, b) => {\n        if (a.intersectingDeferred && !b.intersectingDeferred) {\n            return 1;\n        }\n        if (b.intersectingDeferred && !a.intersectingDeferred) {\n            return -1;\n        }\n        return 0;\n    });\n    // Loop through all the sorted blocks in order and attempt collision with them.\n    for (const block of intersecting) {\n        if (block.handleIntersect(sprite, horizontal ? sprite.xv : sprite.yv, horizontal) !== false) {\n            return true;\n        }\n    }\n    return false;\n}\n\n\n//# sourceURL=webpack:///./src/game/physics.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/black.ts":
/*!******************************************!*\
  !*** ./src/game/sprites/blocks/black.ts ***!
  \******************************************/
/*! exports provided: BlackBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlackBlock\", function() { return BlackBlock; });\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\nclass BlackBlock extends _block__WEBPACK_IMPORTED_MODULE_0__[\"PseudoSolidBlock\"] {\n    constructor() {\n        super(...arguments);\n        this.static = true;\n    }\n    render(ctx) {\n        ctx.fillStyle = \"black\";\n        ctx.fillRect(this.x, this.y, this.width, this.height);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/black.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/block.ts":
/*!******************************************!*\
  !*** ./src/game/sprites/blocks/block.ts ***!
  \******************************************/
/*! exports provided: Block, SolidBlock, StaticSolidBlock, PseudoSolidBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Block\", function() { return Block; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SolidBlock\", function() { return SolidBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StaticSolidBlock\", function() { return StaticSolidBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PseudoSolidBlock\", function() { return PseudoSolidBlock; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n\n\nclass Block extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__[\"ImageSprite\"] {\n    constructor(opts) {\n        super(opts);\n        this.solid = false;\n        this.intersectingDeferred = false;\n        this.levelIndex = typeof opts.levelIndex !== \"undefined\" ? opts.levelIndex : -1;\n        this.runtime.blocks.push(this);\n        if (typeof opts.levelIndex !== \"undefined\") {\n            this.runtime.ordereredBlocks[opts.levelIndex] = this;\n        }\n        if (this.needsReinstantiate) {\n            this.spawningOptions = opts;\n        }\n    }\n    // Ugly duplication but it works\n    // Align the sprite to the floor and centered horizontally\n    floorAlign() {\n        this.centerAlign(true, false);\n        this.y += _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"] - this.height;\n        this.y = Math.floor(this.y);\n    }\n    // Align the sprite to the left and centered vertically\n    leftAlign() {\n        this.centerAlign(false, true);\n        this.x += _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] - this.width;\n        this.x = Math.floor(this.x);\n    }\n    // Center the sprite\n    centerAlign(centerX = true, centerY = true) {\n        if (centerX) {\n            this.x += (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] - this.width) / 2;\n            this.x = Math.floor(this.x);\n        }\n        if (centerY) {\n            this.y += (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"] - this.height) / 2;\n            this.y = Math.floor(this.y);\n        }\n    }\n    /**\n     * Moves the sprite off of this block\n     * Return values:\n     * true or undefined - collision handled\n     * false - collision was not handled, this is used by other blocks that replace this method\n     */\n    handleIntersect(sprite, velocity, horizontal) {\n        if (horizontal) {\n            if (velocity > 0) {\n                sprite.x = this.x - sprite.width;\n            }\n            else if (velocity < 0) {\n                sprite.x = this.x + this.width;\n            }\n        }\n        else {\n            if (velocity > 0) {\n                sprite.y = this.y + this.height;\n            }\n            else if (velocity < 0) {\n                sprite.y = this.y - sprite.height;\n            }\n        }\n        return true;\n    }\n    destroy() {\n        super.destroy();\n        this._removeFromList(this.runtime.blocks);\n        if (this.levelIndex > -1) {\n            this.runtime.ordereredBlocks[this.levelIndex] = undefined;\n        }\n    }\n    get needsReinstantiate() {\n        return false;\n    }\n    get type() {\n        console.warn(\"unimplemented getType()?\");\n        return Block;\n    }\n}\n// Block with solid = true by default\n// Note that just because solid = true does not actually mean it is solid, just likely that it is solid\n// Some blocks extend this then in handleIntersect have special behavior\nclass SolidBlock extends Block {\n    constructor() {\n        super(...arguments);\n        this.solid = true;\n    }\n}\n// Block with solid = true and staic = true by default\n// Setting static = true can greatly improve performance by not rendering things more than they need to be\nclass StaticSolidBlock extends SolidBlock {\n    constructor() {\n        super(...arguments);\n        this.static = true;\n    }\n}\n// Block that is solid but doesn't handle intersecting\n// Used for blocks that shouldn't be solid but needed for player.reset() to work\nclass PseudoSolidBlock extends StaticSolidBlock {\n    handleIntersect() {\n        return false;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/block.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/blockswitchspawner.ts":
/*!*******************************************************!*\
  !*** ./src/game/sprites/blocks/blockswitchspawner.ts ***!
  \*******************************************************/
/*! exports provided: BlockSwitchSpawnerBlock, RedGreenBlockSwitchSpawner, AquaOrangeBlockSwitchSpawner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlockSwitchSpawnerBlock\", function() { return BlockSwitchSpawnerBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RedGreenBlockSwitchSpawner\", function() { return RedGreenBlockSwitchSpawner; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AquaOrangeBlockSwitchSpawner\", function() { return AquaOrangeBlockSwitchSpawner; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _blockswitch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../blockswitch */ \"./src/game/sprites/blockswitch.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _falling__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./falling */ \"./src/game/sprites/blocks/falling.ts\");\n\n\n\n\n\n// Block that spawns a switch\nclass BlockSwitchSpawnerBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\n    constructor(opts, group, textureFolder) {\n        super(opts);\n        const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\n        position.y -= _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\n        new _blockswitch__WEBPACK_IMPORTED_MODULE_2__[\"BlockSwitch\"]({\n            texture: this.runtime.getImage(\"blocks/button/redgreen/button\"),\n            position,\n            spawner: this,\n            group,\n            textureFolder,\n        });\n    }\n}\nclass RedGreenBlockSwitchSpawner extends BlockSwitchSpawnerBlock {\n    constructor(opts) {\n        super(opts, _falling__WEBPACK_IMPORTED_MODULE_4__[\"FallingBlockGroups\"].RedGreen, \"redgreen\");\n    }\n}\nclass AquaOrangeBlockSwitchSpawner extends BlockSwitchSpawnerBlock {\n    constructor(opts) {\n        super(opts, _falling__WEBPACK_IMPORTED_MODULE_4__[\"FallingBlockGroups\"].AquaOrange, \"aquaorange\");\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/blockswitchspawner.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/coinspawner.ts":
/*!************************************************!*\
  !*** ./src/game/sprites/blocks/coinspawner.ts ***!
  \************************************************/
/*! exports provided: AboveLevelUpCoinSpawnerBlock, BelowLevelUpCoinSpawnerBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AboveLevelUpCoinSpawnerBlock\", function() { return AboveLevelUpCoinSpawnerBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BelowLevelUpCoinSpawnerBlock\", function() { return BelowLevelUpCoinSpawnerBlock; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _coin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../coin */ \"./src/game/sprites/coin.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\n\n\n\n/*\n * Spawns the level up coin\n * The level up coin itself is not part of the level code,\n * only the spawner.\n *\n * Different types becasue that's how the level codes are. (and I really don't want to touch those)\n */\nclass LevelUpCoinSpawnerBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\n    constructor(opts) {\n        super(opts);\n        this.static = true;\n        const position = this.getCoinPosition();\n        new _coin__WEBPACK_IMPORTED_MODULE_2__[\"LevelUpCoinSprite\"]({\n            position,\n            texture: this.runtime.getImage(\"coin/1\"),\n        });\n    }\n}\n// Spawns the coin above the block\nclass AboveLevelUpCoinSpawnerBlock extends LevelUpCoinSpawnerBlock {\n    getCoinPosition() {\n        return new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.x, this.y - _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"]);\n    }\n}\n// Spawns the coin below the block\nclass BelowLevelUpCoinSpawnerBlock extends LevelUpCoinSpawnerBlock {\n    getCoinPosition() {\n        return new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.x, this.y + _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"]);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/coinspawner.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/corner.ts":
/*!*******************************************!*\
  !*** ./src/game/sprites/blocks/corner.ts ***!
  \*******************************************/
/*! exports provided: RotatedCornerBlock, CastleCornerBlock, SolidRotatedCornerBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RotatedCornerBlock\", function() { return RotatedCornerBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CastleCornerBlock\", function() { return CastleCornerBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SolidRotatedCornerBlock\", function() { return SolidRotatedCornerBlock; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\n\n\n\n/*\n * A block that is in the corner\n */\nconst AIR = [\n    \".\",\n    \"l\", \"k\", \"j\",\n    \"p\", \"q\",\n    \"%\", \"#\", \"$\", \"o\",\n];\nclass CornerBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"Block\"] {\n    constructor(opts) {\n        super(opts);\n        this.levelIndex = opts.levelIndex || 0;\n        // queue deletion after other stuff runs\n        this.destroy();\n    }\n    /**\n     * If the block that is X distance from this one is air,\n     * then create a new sprite with the texture, rotation, x offset, and y offset as provided\n     */\n    testCorner(offset, texture, rotation, x, y) {\n        const charAtOffset = this.runtime.levelData[this.levelIndex + offset];\n        const isAir = AIR.indexOf(charAtOffset) > -1;\n        if (isAir) {\n            const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.x + x * (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] / 2), this.y + y * (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"] / 2));\n            // these should be static, but that seems to cause problems that i don't want to debug\n            const sprite = new _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__[\"ImageSprite\"]({\n                position,\n                texture,\n                rotation,\n                static: true,\n            });\n        }\n    }\n}\n// A normal corner block that spawns rotations of itself\n// Used in all zones but castle\nclass RotatedCornerBlock extends CornerBlock {\n    constructor(opts) {\n        super(opts);\n        // black background\n        new _block__WEBPACK_IMPORTED_MODULE_3__[\"Block\"]({\n            texture: this.runtime.getImage(\"blocks/a\"),\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.x, this.y, -1),\n            static: true,\n        });\n        const offset = this.width === _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] ? 0 : 1;\n        // if spawned on far left edge then don't check for things that will wrap around to other side of screen\n        if (this.levelIndex % _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] !== 0) {\n            this.testCorner(_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1, this.texture, -90, 0, 0);\n            this.testCorner(-_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1, this.texture, 180, 0, offset);\n        }\n        // if spawned on far right edge then don't check for things that will wrap around to other side of screen\n        // untested but should work\n        if (this.levelIndex % _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] !== _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1) {\n            this.testCorner(_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1, this.texture, 0, offset, 0);\n            this.testCorner(-_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1, this.texture, 90, offset, offset);\n        }\n    }\n}\n// The corner blocks in the castle are special\n// I believe this block actually only shows up like once in the whole game\nclass CastleCornerBlock extends CornerBlock {\n    constructor(opts) {\n        super(opts);\n        if (this.levelIndex % _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] !== 0) {\n            this.testCorner(_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1, this.runtime.getImage(\"blocks/castlecorner/topleft\"), 0, 0, 0);\n            this.testCorner(-_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1, this.runtime.getImage(\"blocks/castlecorner/bottomleft\"), 0, 0, 0);\n        }\n        if (this.levelIndex % _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] !== _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] - 1) {\n            this.testCorner(_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1, this.runtime.getImage(\"blocks/castlecorner/topright\"), 0, 0, 0);\n            this.testCorner(-_config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"] + 1, this.runtime.getImage(\"blocks/castlecorner/bottomright\"), 0, 0, 0);\n        }\n    }\n}\n// I fix an OOB glitch in ONE level in the game!\n// So useful!\nclass SolidRotatedCornerBlock extends RotatedCornerBlock {\n    constructor(options) {\n        super(options);\n        const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.position);\n        position.z = this.z - 1;\n        new _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"]({\n            texture: this.runtime.getImage(\"blocks/c\"),\n            position,\n            static: true,\n            levelIndex: this.levelIndex,\n        });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/corner.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/crumble.ts":
/*!********************************************!*\
  !*** ./src/game/sprites/blocks/crumble.ts ***!
  \********************************************/
/*! exports provided: CrumblingBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CrumblingBlock\", function() { return CrumblingBlock; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _player_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../player/player */ \"./src/game/sprites/player/player.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\n\n\n\n/*\n * A block that crumbles beneath you as you stand on it\n * Will reappear after a few seconds\n */\n// The amount of frames in the crumbling animation\nconst CRUMBLE_FRAMES = 9;\n// The length of each frame in the crumbling animation\nconst CRUMBLE_FRAME_LENGTH = 5;\n// How long before the block will reappear\nconst CRUMBLE_RESPAWN = 60 * 3;\nclass CrumblingBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\n    constructor(opts) {\n        super(opts);\n        this.crumbling = false;\n        this.crumbleProgress = 1;\n        this.yv = 0;\n        this.xv = 0;\n        this.startingX = this.x;\n        this.startingY = this.y;\n    }\n    handleIntersect(sprite, velocity, horizontal) {\n        super.handleIntersect(sprite, velocity, horizontal);\n        if (!this.crumbling && !horizontal && velocity < 0 && sprite instanceof _player_player__WEBPACK_IMPORTED_MODULE_2__[\"PlayerSprite\"]) {\n            this.crumbling = true;\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n                run: (task) => this.crumble(task),\n                repeatEvery: CRUMBLE_FRAME_LENGTH,\n            }));\n        }\n    }\n    updateVisual() {\n        this.texture = this.runtime.getImage(`blocks/crumble/${this.crumbleProgress}`);\n        this.updateDimensions();\n    }\n    respawn() {\n        this.x = this.startingX;\n        this.y = this.startingY;\n        this.crumbling = false;\n        this.yv = 0;\n        this.crumbleProgress = 1;\n        this.solid = true;\n        this.updateVisual();\n    }\n    crumble(task) {\n        this.crumbleProgress++;\n        this.updateVisual();\n        this.runtime.playSound(\"blocks/break\", true);\n        if (this.crumbleProgress === CRUMBLE_FRAMES) {\n            task.stop();\n            this.solid = false;\n            this.runtime.playSound(\"blocks/fall\");\n            this.addTask((task2) => this.fall(task2));\n        }\n    }\n    fall(task) {\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_1__[\"runPhysics\"])(this, {\n            collision: false,\n        });\n        if (this.y >= this.runtime.canvas.height) {\n            task.stop();\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n                run: () => this.respawn(),\n                delay: CRUMBLE_RESPAWN,\n            }));\n        }\n    }\n    get needsReinstantiate() {\n        return true;\n    }\n    get type() {\n        return CrumblingBlock;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/crumble.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/falling.ts":
/*!********************************************!*\
  !*** ./src/game/sprites/blocks/falling.ts ***!
  \********************************************/
/*! exports provided: FallingBlockGroups, AbstractFallingBlock, InstantFallingBlock, VibratingFallingBlock, RedGreenInstantFallingBlock, RedGreenVibratingFallingBlock, AquaOrangeInstantFallingBlock, AquaOrangeVibratingFallingBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FallingBlockGroups\", function() { return FallingBlockGroups; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractFallingBlock\", function() { return AbstractFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"InstantFallingBlock\", function() { return InstantFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VibratingFallingBlock\", function() { return VibratingFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RedGreenInstantFallingBlock\", function() { return RedGreenInstantFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RedGreenVibratingFallingBlock\", function() { return RedGreenVibratingFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AquaOrangeInstantFallingBlock\", function() { return AquaOrangeInstantFallingBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AquaOrangeVibratingFallingBlock\", function() { return AquaOrangeVibratingFallingBlock; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\n\n\n\n/*\n * A block that falls when you hit the switch.\n *\n * Will vibrate for a bit before disappearing.\n */\n// Time between each vibration before falling\nconst VIBRATE_EVERY = 3;\n// The distance to move when vibrating\nconst VIBRATE_RANGE = 2;\n// How many times to vibrate\nconst VIBRATE_TIMES = 20;\n// Delay before block will fall after vibrating\n// Makes blocks from the bottom fall before the ones on the top, which looks nice\nconst FALL_DELAY_PER_Y = 0.25;\nvar FallingBlockGroups;\n(function (FallingBlockGroups) {\n    FallingBlockGroups[FallingBlockGroups[\"RedGreen\"] = 0] = \"RedGreen\";\n    FallingBlockGroups[FallingBlockGroups[\"AquaOrange\"] = 1] = \"AquaOrange\";\n})(FallingBlockGroups || (FallingBlockGroups = {}));\nclass AbstractFallingBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\n    constructor(opts, group) {\n        super(opts);\n        this.xv = 0;\n        this.yv = 0;\n        this.group = group;\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\n    }\n    playSound() {\n        this.runtime.playSound(\"blocks/smash\");\n    }\n    fall(task) {\n        this.solid = false;\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_2__[\"runPhysics\"])(this, {\n            collision: false,\n        });\n        if (this.y >= this.runtime.canvas.height) {\n            task.stop();\n        }\n    }\n    get needsReinstantiate() {\n        return true;\n    }\n}\nclass InstantFallingBlock extends AbstractFallingBlock {\n    trigger() {\n        this.playSound();\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: (task) => this.fall(task),\n            repeatEvery: 0,\n        }));\n    }\n}\nclass VibratingFallingBlock extends InstantFallingBlock {\n    constructor() {\n        super(...arguments);\n        this.vibrateProgress = 0;\n        this.frame = 0;\n    }\n    get needsReinstantiate() {\n        return true;\n    }\n    trigger() {\n        this.x -= VIBRATE_RANGE / 2;\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: (task) => this.vibrate(task),\n            repeatEvery: 3,\n        }));\n    }\n    vibrate(task) {\n        this.vibrateProgress++;\n        if (this.vibrateProgress === VIBRATE_TIMES) {\n            const fromBottom = this.runtime.canvas.height - this.y;\n            task.stop();\n            this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.startingPosition);\n            const delay = fromBottom * FALL_DELAY_PER_Y;\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n                run: (task2) => this.fall(task2),\n                delay,\n                repeatEvery: 0,\n            }));\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n                run: () => this.playSound(),\n                delay,\n            }));\n        }\n        else if (this.vibrateProgress % 2 === 0) {\n            this.x -= VIBRATE_RANGE;\n        }\n        else {\n            this.x += VIBRATE_RANGE;\n        }\n    }\n}\nclass RedGreenInstantFallingBlock extends InstantFallingBlock {\n    constructor(opts) {\n        super(opts, FallingBlockGroups.RedGreen);\n    }\n    get type() { return RedGreenInstantFallingBlock; }\n}\nclass RedGreenVibratingFallingBlock extends VibratingFallingBlock {\n    constructor(opts) {\n        super(opts, FallingBlockGroups.RedGreen);\n    }\n    get type() { return RedGreenVibratingFallingBlock; }\n}\nclass AquaOrangeInstantFallingBlock extends InstantFallingBlock {\n    constructor(opts) {\n        super(opts, FallingBlockGroups.AquaOrange);\n    }\n    get type() { return AquaOrangeInstantFallingBlock; }\n}\nclass AquaOrangeVibratingFallingBlock extends VibratingFallingBlock {\n    constructor(opts) {\n        super(opts, FallingBlockGroups.AquaOrange);\n    }\n    get type() { return AquaOrangeVibratingFallingBlock; }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/falling.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/grass.ts":
/*!******************************************!*\
  !*** ./src/game/sprites/blocks/grass.ts ***!
  \******************************************/
/*! exports provided: GrassBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GrassBlock\", function() { return GrassBlock; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _zindex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../zindex */ \"./src/game/sprites/zindex.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\n\n\n/*\n * It's a grass block.\n *\n * It is spawned on top of the regular blocks and moves itself down onto the block below.\n */\nclass GrassBlock extends _block__WEBPACK_IMPORTED_MODULE_2__[\"Block\"] {\n    constructor(opts) {\n        super(opts);\n        this.static = true;\n        this.z = _zindex__WEBPACK_IMPORTED_MODULE_1__[\"ZIndexes\"].Grass;\n        // Move ourselves down\n        this.y += _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/grass.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/lightblock.ts":
/*!***********************************************!*\
  !*** ./src/game/sprites/blocks/lightblock.ts ***!
  \***********************************************/
/*! exports provided: LightBlockGroups, LightBlock, AbstractEnabledLightBlock, AbstractDisabledLightBlock, EnabledLightBlock1, DisabledLightBlock1, EnabledLightBlock2, DisabledLightBlock2, EnabledLightBlock3, DisabledLightBlock3, EnabledLightBlock4, DisabledLightBlock4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LightBlockGroups\", function() { return LightBlockGroups; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LightBlock\", function() { return LightBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractEnabledLightBlock\", function() { return AbstractEnabledLightBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractDisabledLightBlock\", function() { return AbstractDisabledLightBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnabledLightBlock1\", function() { return EnabledLightBlock1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DisabledLightBlock1\", function() { return DisabledLightBlock1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnabledLightBlock2\", function() { return EnabledLightBlock2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DisabledLightBlock2\", function() { return DisabledLightBlock2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnabledLightBlock3\", function() { return EnabledLightBlock3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DisabledLightBlock3\", function() { return DisabledLightBlock3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnabledLightBlock4\", function() { return EnabledLightBlock4; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DisabledLightBlock4\", function() { return DisabledLightBlock4; });\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\n/*\n * A block that is toggled solid/not solid when a switch is hit.\n */\nvar LightBlockGroups;\n(function (LightBlockGroups) {\n    LightBlockGroups[LightBlockGroups[\"RedGreen\"] = 0] = \"RedGreen\";\n})(LightBlockGroups || (LightBlockGroups = {}));\nclass LightBlock extends _block__WEBPACK_IMPORTED_MODULE_0__[\"Block\"] {\n    constructor(options, group, lit, dark = \"blocks/y\") {\n        super(options);\n        this.solid = true;\n        this.group = 0;\n        this.litTexture = lit;\n        this.darkTexture = dark;\n        this.group = group;\n    }\n    setSolid(solid) {\n        this.solid = solid;\n        if (this.solid) {\n            this.texture = this.runtime.getImage(this.litTexture);\n        }\n        else {\n            this.texture = this.runtime.getImage(this.darkTexture);\n        }\n    }\n    get needsReinstantiate() {\n        return true;\n    }\n    toggleSolid() {\n        this.setSolid(!this.solid);\n    }\n}\nclass AbstractEnabledLightBlock extends LightBlock {\n    constructor(options, group, lit, dark) {\n        super(options, group, lit, dark);\n        this.setSolid(true);\n    }\n}\nclass AbstractDisabledLightBlock extends LightBlock {\n    constructor(options, group, lit, dark) {\n        super(options, group, lit, dark);\n        this.setSolid(false);\n    }\n}\nclass EnabledLightBlock1 extends AbstractEnabledLightBlock {\n    constructor(opts) {\n        super(opts, LightBlockGroups.RedGreen, \"blocks/z\");\n    }\n    get type() { return EnabledLightBlock1; }\n}\nclass DisabledLightBlock1 extends AbstractDisabledLightBlock {\n    constructor(opts) {\n        super(opts, LightBlockGroups.RedGreen, \"blocks/z\");\n    }\n    get type() { return DisabledLightBlock1; }\n}\nclass EnabledLightBlock2 extends AbstractEnabledLightBlock {\n    constructor(opts) {\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalz\");\n    }\n    get type() { return EnabledLightBlock2; }\n}\nclass DisabledLightBlock2 extends AbstractDisabledLightBlock {\n    constructor(opts) {\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalz\");\n    }\n    get type() { return DisabledLightBlock2; }\n}\nclass EnabledLightBlock3 extends AbstractEnabledLightBlock {\n    constructor(opts) {\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalp\");\n    }\n    get type() { return EnabledLightBlock3; }\n}\nclass DisabledLightBlock3 extends AbstractDisabledLightBlock {\n    constructor(opts) {\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalp\");\n    }\n    get type() { return DisabledLightBlock3; }\n}\nclass EnabledLightBlock4 extends AbstractEnabledLightBlock {\n    constructor(opts) {\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalq\");\n    }\n    get type() { return EnabledLightBlock4; }\n}\nclass DisabledLightBlock4 extends AbstractDisabledLightBlock {\n    constructor(opts) {\n        super(opts, LightBlockGroups.RedGreen, \"blocks/capitalq\");\n    }\n    get type() { return DisabledLightBlock4; }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/lightblock.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/lightswitch.ts":
/*!************************************************!*\
  !*** ./src/game/sprites/blocks/lightswitch.ts ***!
  \************************************************/
/*! exports provided: LightSwitchBlock, RedGreenLightSwitchBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LightSwitchBlock\", function() { return LightSwitchBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RedGreenLightSwitchBlock\", function() { return RedGreenLightSwitchBlock; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _player_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../player/player */ \"./src/game/sprites/player/player.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _lightblock__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lightblock */ \"./src/game/sprites/blocks/lightblock.ts\");\n\n\n\n\n\n/*\n * A block that toggles the solidity of LightBlocks\n */\n// Frames to be played in the animation\nconst ANIMATION_FRAMES = [\n    \"blocks/lightbutton/1\",\n    \"blocks/lightbutton/2\",\n];\n// The length of each animation frame\nconst ANIMATION_FRAME_LENGTH = 5;\n// How long the switch will remaing as pressed before hiding\nconst HIDE_DELAY = 30;\nclass LightSwitchBlock extends _block__WEBPACK_IMPORTED_MODULE_3__[\"SolidBlock\"] {\n    constructor(opts, group) {\n        super(opts);\n        this.activated = false;\n        this.animationProgress = 0;\n        this.group = group;\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\n        this.show();\n    }\n    get needsReinstantiate() {\n        return true;\n    }\n    show() {\n        // reset variables\n        this.animationProgress = 0;\n        this.activated = false;\n        // reset texture and position\n        this.texture = this.runtime.getImage(ANIMATION_FRAMES[0]);\n        this.updateDimensions();\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.startingPosition);\n        this.visible = true;\n        // start animating\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: (task) => this.animate(task),\n            repeatEvery: ANIMATION_FRAME_LENGTH,\n        }));\n    }\n    animate(task) {\n        if (this.activated) {\n            task.stop();\n            return;\n        }\n        this.animationProgress++;\n        if (this.animationProgress === ANIMATION_FRAMES.length) {\n            this.animationProgress = 0;\n        }\n        this.texture = this.runtime.getImage(ANIMATION_FRAMES[this.animationProgress]);\n    }\n    activate() {\n        this.activated = true;\n        const sprites = this.runtime.sprites;\n        const lightBlocks = sprites\n            .filter((s) => s instanceof _lightblock__WEBPACK_IMPORTED_MODULE_4__[\"LightBlock\"])\n            .filter((s) => s.group === this.group);\n        for (const block of lightBlocks) {\n            block.toggleSolid();\n        }\n        const otherSwitches = sprites\n            .filter((s) => s instanceof LightSwitchBlock && s !== this)\n            .filter((s) => s.group === this.group);\n        for (const block of otherSwitches) {\n            if (block.activated) {\n                block.show();\n            }\n        }\n        this.texture = this.runtime.getImage(\"blocks/lightbutton/down\");\n        this.updateDimensions();\n        this.floorAlign();\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.hide(),\n            delay: HIDE_DELAY,\n        }));\n        this.runtime.playSound(\"blocks/fds\");\n    }\n    hide() {\n        this.visible = false;\n    }\n    handleIntersect(sprite, velocity, horizontal) {\n        const res = super.handleIntersect(sprite, velocity, horizontal);\n        if (!this.activated && sprite.y + sprite.height === this.y && sprite instanceof _player_player__WEBPACK_IMPORTED_MODULE_2__[\"PlayerSprite\"]) {\n            this.activate();\n            return false;\n        }\n        return res;\n    }\n}\nclass RedGreenLightSwitchBlock extends LightSwitchBlock {\n    constructor(opts) {\n        super(opts, _lightblock__WEBPACK_IMPORTED_MODULE_4__[\"LightBlockGroups\"].RedGreen);\n    }\n    get type() { return RedGreenLightSwitchBlock; }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/lightswitch.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/oneway.ts":
/*!*******************************************!*\
  !*** ./src/game/sprites/blocks/oneway.ts ***!
  \*******************************************/
/*! exports provided: OneWayBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OneWayBlock\", function() { return OneWayBlock; });\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\n/*\n * A block that allows things to go up but not down.\n */\nclass OneWayBlock extends _block__WEBPACK_IMPORTED_MODULE_0__[\"SolidBlock\"] {\n    constructor() {\n        super(...arguments);\n        this.static = true;\n        this.intersectsPlayer = false;\n    }\n    handleIntersect(sprite, velocity, horizontal) {\n        // Horizontally these have no collision\n        if (horizontal) {\n            return false;\n        }\n        else {\n            const previousY = sprite.y + velocity;\n            // If below then not solid\n            // Otherwise use normal behavior when above\n            if (previousY + sprite.height > this.y) {\n                return false;\n            }\n            else {\n                return super.handleIntersect(sprite, velocity, horizontal);\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/oneway.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/spike.ts":
/*!******************************************!*\
  !*** ./src/game/sprites/blocks/spike.ts ***!
  \******************************************/
/*! exports provided: UpSpikeBlock, DownSpikeBlock, LeftSpikeBlock, RightSpikeBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UpSpikeBlock\", function() { return UpSpikeBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DownSpikeBlock\", function() { return DownSpikeBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LeftSpikeBlock\", function() { return LeftSpikeBlock; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RightSpikeBlock\", function() { return RightSpikeBlock; });\n/* harmony import */ var _player_player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../player/player */ \"./src/game/sprites/player/player.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n\n\n/*\n * It's a spike. It kills the player.\n */\n// Spikes share pretty much all of their code\n// So an abstract class is made and extended\nclass SpikeBlock extends _block__WEBPACK_IMPORTED_MODULE_1__[\"SolidBlock\"] {\n    constructor() {\n        super(...arguments);\n        this.static = true;\n        this.intersectingDeferred = true;\n    }\n    handleIntersect(sprite, velocity, horizontal) {\n        super.handleIntersect(sprite, velocity, horizontal);\n        if (this.canKill(sprite) && sprite instanceof _player_player__WEBPACK_IMPORTED_MODULE_0__[\"PlayerSprite\"]) {\n            sprite.kill();\n            return false;\n        }\n        return true;\n    }\n}\nclass UpSpikeBlock extends SpikeBlock {\n    constructor(opts) {\n        super(opts);\n        this.floorAlign();\n    }\n    canKill(sprite) {\n        return sprite.y + sprite.height === this.y;\n    }\n}\nclass DownSpikeBlock extends SpikeBlock {\n    // Already aligned due to spawning\n    canKill(sprite) {\n        return sprite.y === this.y + this.height;\n    }\n}\nclass LeftSpikeBlock extends SpikeBlock {\n    constructor(opts) {\n        super(opts);\n        this.leftAlign();\n    }\n    canKill(sprite) {\n        return sprite.x + sprite.width === this.x;\n    }\n}\nclass RightSpikeBlock extends SpikeBlock {\n    // Already aligned due to spawning\n    canKill(sprite) {\n        return sprite.x === this.x + this.width;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/spike.ts?");

/***/ }),

/***/ "./src/game/sprites/blocks/tallgrass.ts":
/*!**********************************************!*\
  !*** ./src/game/sprites/blocks/tallgrass.ts ***!
  \**********************************************/
/*! exports provided: TallGrassBlock */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TallGrassBlock\", function() { return TallGrassBlock; });\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _grass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./grass */ \"./src/game/sprites/blocks/grass.ts\");\n\n\n\n/*\n * It's a tall grass block.\n *\n * It is spawned like normal grass blocks but also shows a taller grass on top of the block\n * It creates a normal grass to go below it\n */\nclass TallGrassBlock extends _block__WEBPACK_IMPORTED_MODULE_1__[\"Block\"] {\n    constructor(opts) {\n        super(opts);\n        this.static = true;\n        new _grass__WEBPACK_IMPORTED_MODULE_2__[\"GrassBlock\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](this.position),\n            texture: this.runtime.getImage(\"blocks/k\"),\n        });\n        this.floorAlign();\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blocks/tallgrass.ts?");

/***/ }),

/***/ "./src/game/sprites/blockswitch.ts":
/*!*****************************************!*\
  !*** ./src/game/sprites/blockswitch.ts ***!
  \*****************************************/
/*! exports provided: BlockSwitch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BlockSwitch\", function() { return BlockSwitch; });\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _blocks_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _blocks_falling__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blocks/falling */ \"./src/game/sprites/blocks/falling.ts\");\n\n\n\nclass BlockSwitch extends _blocks_block__WEBPACK_IMPORTED_MODULE_1__[\"Block\"] {\n    constructor(opts) {\n        super(opts);\n        this.triggered = false;\n        this.group = opts.group;\n        this.textureFolder = opts.textureFolder;\n        this.spawner = opts.spawner;\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](this.position);\n        this.floorAlign();\n        this.addTask(() => this.run());\n        this.spawner.texture = this.getImage(\"spawner\");\n        this.texture = this.getImage(\"button\");\n    }\n    getImage(str) {\n        return this.runtime.getImage(`blocks/button/${this.textureFolder}/${str}`);\n    }\n    get needsReinstantiate() {\n        return true;\n    }\n    get type() {\n        return BlockSwitch;\n    }\n    trigger() {\n        const allSprites = this.runtime.sprites;\n        const fallingBlocks = allSprites\n            .filter((sprite) => sprite instanceof _blocks_falling__WEBPACK_IMPORTED_MODULE_2__[\"AbstractFallingBlock\"])\n            .filter((sprite) => sprite.group === this.group);\n        for (const sprite of fallingBlocks) {\n            sprite.trigger();\n        }\n        this.spawner.texture = this.getImage(\"spawner2\");\n        this.texture = this.getImage(\"button2\");\n        this.updateDimensions();\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](this.startingPosition);\n        this.floorAlign();\n        this.triggered = true;\n        this.runtime.playSound(\"blocks/button\");\n    }\n    run() {\n        if (!this.triggered && this.intersects(this.runtime.player)) {\n            this.trigger();\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/blockswitch.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/boss.ts":
/*!*****************************************!*\
  !*** ./src/game/sprites/bosses/boss.ts ***!
  \*****************************************/
/*! exports provided: AbstractBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractBoss\", function() { return AbstractBoss; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _coin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../coin */ \"./src/game/sprites/coin.ts\");\n/* harmony import */ var _hiteffect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./hiteffect */ \"./src/game/sprites/bosses/hiteffect.ts\");\n\n\n\n\nconst PLAYER_JUMP_YV = 3;\nclass AbstractBoss extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(options) {\n        super(options);\n        this.phaseDelay = 0;\n    }\n    // call super.startRoutine() in implementations!!!\n    startRoutine() {\n        this.phaseDelay = 0;\n    }\n    addPhase(task, afterDelay = 0) {\n        task.delay += this.phaseDelay;\n        if (task.repeatEvery > -1) {\n            this.phaseDelay += task.repeatMax * (task.repeatEvery + 1);\n        }\n        this.phaseDelay += (task.originalOptions.delay) || 0;\n        this.phaseDelay += afterDelay;\n        this.addTask(task);\n    }\n    playerJumpedOn() {\n        return this.intersects(this.runtime.player) && this.runtime.player.yv < -1;\n    }\n    bouncePlayer() {\n        this.runtime.playSound(\"boss/ouch\");\n        this.runtime.player.yv = PLAYER_JUMP_YV;\n    }\n    spawnLevelUpCoin(position) {\n        const texture = this.runtime.getImage(\"coin/1\");\n        new _coin__WEBPACK_IMPORTED_MODULE_2__[\"LevelUpCoinSprite\"]({\n            texture,\n            position,\n        });\n    }\n    spawnHitEffect(type) {\n        const texture = this.runtime.getImage(`hit/${type}`);\n        const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.centerX, this.y);\n        position.y -= texture.height;\n        position.x -= texture.width / 2;\n        new _hiteffect__WEBPACK_IMPORTED_MODULE_3__[\"HitEffectSprite\"]({\n            texture, position,\n        });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/boss.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/final/finalboss.ts":
/*!****************************************************!*\
  !*** ./src/game/sprites/bosses/final/finalboss.ts ***!
  \****************************************************/
/*! exports provided: FinalBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"FinalBoss\", function() { return FinalBoss; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _zindex__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../zindex */ \"./src/game/sprites/zindex.ts\");\n/* harmony import */ var _noss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../noss */ \"./src/game/sprites/bosses/noss.ts\");\n\n\n\n\n\n\nconst HEALTH = 3;\n// seen in scratch as \"Attack2\"\nconst SLIDE_ATTACK_SPEED = 8;\n// todo: can't figure out how to get the canvas width from outside a sprite\n// so just hard coding a value for now\nconst SLIDE_ATTACK_REPEAT = Math.ceil(480 / SLIDE_ATTACK_SPEED);\nconst SLIDE_ATTACK_SIZE_CHANGE = 0.2 / 2;\nconst SLIDE_ATTACK_MIN = 5;\nconst SLIDE_ATTACK_MAX = 7;\n// any size changes during thet slide attack are replaced with this for consistency\nconst DROP_ATTACK_SCALE = 3;\nconst DROP_ATTACK_GRAVITY = 14;\nconst DROP_ATTACK_FALL_LENGTH = 23;\nconst DROP_ATTACK_END = 264;\nconst DROP_ATTACK_REPEAT = 4; // +1 for the last one where the boss becomes vulnerable\nconst REST_TEXTURE = \"boss/noss/rest\";\nclass FinalBoss extends _noss__WEBPACK_IMPORTED_MODULE_5__[\"AbstractNossBoss\"] {\n    constructor(opts) {\n        super(opts);\n        this.canKillPlayer = false;\n        this.health = HEALTH;\n        this.wasHit = false;\n        this.animationProgress = 0;\n        this.sizeScale = 1;\n        this.z = _zindex__WEBPACK_IMPORTED_MODULE_4__[\"ZIndexes\"].FinalBoss;\n        this.visible = false;\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.startRoutine(),\n            delay: 60,\n        }));\n        this.addTask(() => this.testForPlayer());\n    }\n    testForPlayer() {\n        if (this.canKillPlayer && this.intersects(this.runtime.player)) {\n            this.runtime.player.kill();\n        }\n    }\n    startRoutine() {\n        super.startRoutine();\n        this.canKillPlayer = true;\n        this.wasHit = false;\n        this.setScale(1, false);\n        this.visible = false;\n        const repeatSlideAttack = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(SLIDE_ATTACK_MIN, SLIDE_ATTACK_MAX);\n        for (let i = 0; i < repeatSlideAttack; i++) {\n            const addSpinAttack = (direction) => {\n                this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                    run: () => this.prepareSlideAttack(direction),\n                }), Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(0, 60));\n                this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                    run: () => this.slideAttack(direction),\n                    repeatEvery: 0,\n                    repeatMax: SLIDE_ATTACK_REPEAT,\n                }));\n            };\n            addSpinAttack(1);\n            addSpinAttack(-1);\n        }\n        const addDropAttack = (endDelay = true) => {\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.prepareDropAttack(),\n            }));\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.dropAttack(),\n                repeatEvery: 0,\n                repeatMax: DROP_ATTACK_FALL_LENGTH,\n            }), endDelay ? 33 : 0); // 33: 0.05 sec + 30 frames (repeat 15)\n        };\n        for (let i = 0; i < DROP_ATTACK_REPEAT; i++) {\n            addDropAttack();\n        }\n        addDropAttack(false);\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: (task) => this.vulnerableAfterDropAttack(task),\n            repeatEvery: 0,\n            repeatMax: 120,\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.endRoutine(this.wasHit),\n        }));\n    }\n    endRoutine(wasHit = false) {\n        if (wasHit) {\n            return;\n        }\n        this.poof();\n        this.visible = false;\n        this.texture = this.runtime.getImage(_noss__WEBPACK_IMPORTED_MODULE_5__[\"BASE_TEXTURE\"]);\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.startRoutine(),\n            delay: 120,\n        }));\n    }\n    prepareSlideAttack(direction) {\n        this.runtime.playSound(\"boss/noss/shadow3\");\n        this.visible = false;\n        this.setScale((Math.abs(this.sizeScale) + SLIDE_ATTACK_SIZE_CHANGE) * direction);\n        if (direction === 1) {\n            this.x = 0;\n        }\n        else if (direction === -1) {\n            this.x = this.runtime.canvas.width;\n        }\n        this.y = this.runtime.player.y - ((this.width - this.runtime.player.width) / 2);\n    }\n    slideAttack(direction) {\n        this.visible = true;\n        this.canKillPlayer = true;\n        this.x += SLIDE_ATTACK_SPEED * direction;\n    }\n    prepareDropAttack() {\n        this.visible = true;\n        this.runtime.playSound(\"boss/noss/shadow2\");\n        this.setScale(DROP_ATTACK_SCALE);\n        this.y = -this.height;\n        this.x = this.runtime.player.x - ((this.width - this.runtime.player.width) / 2);\n    }\n    dropAttack() {\n        this.y += DROP_ATTACK_GRAVITY;\n        if (this.y > DROP_ATTACK_END) {\n            this.y = DROP_ATTACK_END;\n        }\n    }\n    vulnerableAfterDropAttack(task) {\n        this.canKillPlayer = false;\n        this.texture = this.runtime.getImage(REST_TEXTURE);\n        if (this.playerJumpedOn()) {\n            this.bouncePlayer();\n            this.spawnHitEffect(\"-1\");\n            this.health--;\n            this.wasHit = true;\n            this.animationProgress = 0;\n            task.stop();\n            if (this.health === 0) {\n                this.playDeadAnimation();\n            }\n            else {\n                this.playHitAnimation();\n                this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                    run: () => this.endRoutine(),\n                    delay: _noss__WEBPACK_IMPORTED_MODULE_5__[\"HIT_ANIMATION_TOTAL_LENGTH\"],\n                }));\n            }\n        }\n    }\n    kill() {\n        const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.x + _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"], this.y + _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"]);\n        this.spawnLevelUpCoin(position);\n        this.destroy();\n    }\n    setScale(s, center = true) {\n        const oldScale = this.sizeScale;\n        const oldHeight = this.height;\n        const oldWidth = this.width;\n        const as = Math.abs(s);\n        this.sizeScale = as;\n        this.width = this.texture.width * as;\n        this.height = this.texture.height * as;\n        if (center) {\n            const widthChange = this.width - oldWidth;\n            this.x -= (widthChange / 2);\n            const heightChange = this.height - oldHeight;\n            this.y -= (heightChange / 2);\n        }\n        if (s < 0) {\n            this.scale.x = -1;\n        }\n        else {\n            this.scale.x = 1;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/final/finalboss.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/hiteffect.ts":
/*!**********************************************!*\
  !*** ./src/game/sprites/bosses/hiteffect.ts ***!
  \**********************************************/
/*! exports provided: HitEffectSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HitEffectSprite\", function() { return HitEffectSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n\n\n/*\n * Health events for bosses\n *\n * +0, +1, -1\n */\nconst LIFESPAN = 60;\nconst OPACITY_PER_FRAME = 1 / LIFESPAN;\nconst SIZE_CHANGE = 0.025;\nconst Y_CHANGE = 0.5;\nclass HitEffectSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(opts) {\n        super(opts);\n        this.lifespan = 0;\n        this.addTask(() => this.run());\n        this.startingHeight = this.height;\n        this.startingWidth = this.width;\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](this.position);\n    }\n    run() {\n        this.lifespan++;\n        if (this.lifespan >= LIFESPAN) {\n            this.destroy();\n        }\n        this.opacity -= OPACITY_PER_FRAME;\n        // adjust the size accordingly\n        const mult = (1 + (this.lifespan * SIZE_CHANGE));\n        this.height = this.startingHeight * mult;\n        this.width = this.startingWidth * mult;\n        this.x = this.startingPosition.x - ((this.width - this.startingWidth) / 2);\n        this.y = this.startingPosition.y - ((this.height - this.startingHeight) / 2);\n        // this is terrible\n        this.startingPosition.y -= Y_CHANGE;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/hiteffect.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/noss.ts":
/*!*****************************************!*\
  !*** ./src/game/sprites/bosses/noss.ts ***!
  \*****************************************/
/*! exports provided: BASE_TEXTURE, HIT_ANIMATION_REPEAT, HIT_ANIMATION_REPEAT2, HIT_ANIMATION_TOTAL_LENGTH, HIT_ANIMATION_TOTAL_LENGTH2, AbstractNossBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BASE_TEXTURE\", function() { return BASE_TEXTURE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIT_ANIMATION_REPEAT\", function() { return HIT_ANIMATION_REPEAT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIT_ANIMATION_REPEAT2\", function() { return HIT_ANIMATION_REPEAT2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIT_ANIMATION_TOTAL_LENGTH\", function() { return HIT_ANIMATION_TOTAL_LENGTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIT_ANIMATION_TOTAL_LENGTH2\", function() { return HIT_ANIMATION_TOTAL_LENGTH2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbstractNossBoss\", function() { return AbstractNossBoss; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _boss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./boss */ \"./src/game/sprites/bosses/boss.ts\");\n\n\n\nconst PARTICLE_LIFESPAN = 20;\nconst PARTICLE_STEP = 1;\nconst POOF_PARTICLE_COUNT = 8;\nconst POOF_PARTICLE_ANGLE = 360 / POOF_PARTICLE_COUNT;\nconst BASE_TEXTURE = \"boss/noss/noss\";\nconst HIT_ANIMATION_FRAMES = [\n    \"boss/noss/hit\",\n    BASE_TEXTURE,\n];\nconst HIT_ANIMATION_LENGTH = 2;\nconst HIT_ANIMATION_REPEAT = 12;\nconst HIT_ANIMATION_REPEAT2 = 35; // for dead\nconst HIT_ANIMATION_TOTAL_LENGTH = HIT_ANIMATION_LENGTH *\n    HIT_ANIMATION_REPEAT *\n    HIT_ANIMATION_FRAMES.length +\n    HIT_ANIMATION_LENGTH;\nconst HIT_ANIMATION_TOTAL_LENGTH2 = HIT_ANIMATION_LENGTH *\n    HIT_ANIMATION_REPEAT2 *\n    HIT_ANIMATION_FRAMES.length +\n    HIT_ANIMATION_LENGTH;\nclass NossBossDustSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(options) {\n        super(options);\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.destroy(),\n            delay: PARTICLE_LIFESPAN,\n        }));\n        this.addTask(() => this.move());\n    }\n    move() {\n        this.moveForward(PARTICLE_STEP);\n    }\n}\nclass AbstractNossBoss extends _boss__WEBPACK_IMPORTED_MODULE_2__[\"AbstractBoss\"] {\n    poof() {\n        const position = this.centerPosition;\n        const texture = this.runtime.getImage(\"boss/noss/dust\");\n        position.x -= texture.width / 2;\n        position.y -= texture.height / 2;\n        for (let i = 0; i < POOF_PARTICLE_COUNT; i++) {\n            new NossBossDustSprite({\n                rotation: i * POOF_PARTICLE_ANGLE,\n                position,\n                texture,\n            });\n        }\n    }\n    playDeadAnimation() {\n        this.playHitAnimation(HIT_ANIMATION_REPEAT2);\n        this.runtime.playSound(\"boss/shadow5\");\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.kill(),\n            delay: HIT_ANIMATION_TOTAL_LENGTH2 + 60,\n        }));\n    }\n    kill() {\n        this.runtime.playSound(\"boss/noss/shadow1\");\n        this.poof();\n        this.spawnLevelUpCoin(this.position);\n        this.destroy();\n    }\n    playHitAnimation(repeat = HIT_ANIMATION_REPEAT) {\n        for (let i = 0; i < HIT_ANIMATION_FRAMES.length; i++) {\n            const frame = HIT_ANIMATION_FRAMES[i];\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.texture = this.runtime.getImage(frame),\n                repeatEvery: HIT_ANIMATION_LENGTH * 2,\n                delay: i * HIT_ANIMATION_LENGTH,\n                repeatMax: repeat,\n            }));\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/noss.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/noss/bullet.ts":
/*!************************************************!*\
  !*** ./src/game/sprites/bosses/noss/bullet.ts ***!
  \************************************************/
/*! exports provided: MOVE_TIME, NossBossBulletSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MOVE_TIME\", function() { return MOVE_TIME; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NossBossBulletSprite\", function() { return NossBossBulletSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../engine/utils */ \"./src/engine/utils.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils */ \"./src/utils.ts\");\n\n\n\n\n\nconst GLIDE_TIME = 30;\nconst SPEED_GAIN = 0.2;\nconst TURN_SPEED = 7.5;\nconst MOVE_TIME = 180;\nclass NossBossBulletSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(options) {\n        super(options);\n        this.speed = 0;\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.glideToCenter(),\n            repeatEvery: 0,\n            repeatMax: GLIDE_TIME,\n        }));\n        const canvasX = (this.runtime.canvas.width / 2) - (this.width / 2);\n        const canvasY = (this.runtime.canvas.height / 2) - (this.height / 2);\n        const center = new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](canvasX, canvasY);\n        // figure out what rotation should be in order to glide to the center\n        const distance = this.distanceTo(center);\n        this.glideMoveSpeed = distance / GLIDE_TIME;\n        const heightDifference = this.centerY - canvasY;\n        this.rotation = -Object(_engine_utils__WEBPACK_IMPORTED_MODULE_2__[\"radiansToDegree\"])(Math.acos(heightDifference / distance));\n        if (this.centerX > canvasX) {\n            this.rotation *= -1;\n        }\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.move(),\n            delay: GLIDE_TIME,\n            repeatEvery: 0,\n            repeatMax: MOVE_TIME,\n        }));\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.destroy(),\n            delay: MOVE_TIME,\n        }));\n        this.addTask(() => this.testIntersects());\n    }\n    glideToCenter() {\n        this.moveForward(-this.glideMoveSpeed);\n    }\n    testIntersects() {\n        if (this.intersects(this.runtime.player)) {\n            this.runtime.player.kill();\n        }\n    }\n    move() {\n        this.speed += SPEED_GAIN;\n        this.rotation -= TURN_SPEED;\n        this.moveForward(this.speed);\n        this.x = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"clamp\"])(this.x, 0, this.runtime.canvas.width);\n        this.y = Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"clamp\"])(this.y, 0, this.runtime.canvas.height);\n    }\n    render() {\n        const rotation = this.rotation;\n        this.rotation = 0;\n        super.render.apply(this, arguments);\n        this.rotation = rotation;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/noss/bullet.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/noss/noss.ts":
/*!**********************************************!*\
  !*** ./src/game/sprites/bosses/noss/noss.ts ***!
  \**********************************************/
/*! exports provided: NossBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NossBoss\", function() { return NossBoss; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _noss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../noss */ \"./src/game/sprites/bosses/noss.ts\");\n/* harmony import */ var _bullet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./bullet */ \"./src/game/sprites/bosses/noss/bullet.ts\");\n\n\n\n\n\nconst POSITIONS = [\n    {\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-156, 136),\n    },\n    {\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-116, -8),\n    },\n    {\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(156, 72),\n        direction: -1,\n    },\n];\nconst VULNERABLE_TEXTURE = \"boss/noss/rest\";\nconst STARTING_POS = Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"scratchCoordinate\"])(-4, -104); // original (0, -108)\nconst HEALTH = 3;\nclass NossBoss extends _noss__WEBPACK_IMPORTED_MODULE_3__[\"AbstractNossBoss\"] {\n    constructor(options) {\n        super(options);\n        this.health = HEALTH;\n        this.shouldEndRoutine = false;\n        this.alreadyHit = false;\n        this.visible = false;\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](STARTING_POS);\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.start(),\n            delay: 60,\n        }));\n    }\n    start() {\n        this.audiblePoof(true);\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.startRoutine(),\n            delay: 90,\n        }));\n    }\n    //\n    // ROUTINE\n    //\n    startRoutine() {\n        super.startRoutine();\n        this.alreadyHit = false;\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.poof(),\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.runtime.playSound(\"boss/noss/shadow1\"),\n        }), 60);\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.runtime.playSound(\"boss/noss/shadow3\"),\n        }), 90);\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.teleport(),\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.audiblePoof(),\n        }), 60);\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.spawnBullets(),\n            repeatEvery: 1,\n            repeatMax: 10,\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.afterSpawnBullets(),\n        }), _bullet__WEBPACK_IMPORTED_MODULE_4__[\"MOVE_TIME\"]);\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.texture = this.runtime.getImage(VULNERABLE_TEXTURE),\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            // note: this.rest() does its own endRoutine(), task.stop()\n            run: (task) => this.rest(task),\n            repeatEvery: 0,\n        }));\n    }\n    endRoutine() {\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.startRoutine(),\n            delay: 0,\n        }));\n    }\n    teleport() {\n        const position = POSITIONS[Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"getRandomInt\"])(0, POSITIONS.length - 1)];\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](position.position);\n        this.scale.x = position.direction || 1;\n        this.texture = this.runtime.getImage(_noss__WEBPACK_IMPORTED_MODULE_3__[\"BASE_TEXTURE\"]);\n    }\n    rest(task) {\n        if (this.shouldEndRoutine || (!this.alreadyHit && task.repeatCount >= 300)) {\n            this.endRoutine();\n            task.stop();\n            return;\n        }\n        if (!this.alreadyHit && this.playerJumpedOn()) {\n            this.alreadyHit = true;\n            this.bouncePlayer();\n            this.spawnHitEffect(\"-1\");\n            this.health--;\n            if (this.health === 0) {\n                this.dead();\n            }\n            else {\n                this.damage();\n            }\n        }\n    }\n    damage() {\n        this.playHitAnimation();\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.shouldEndRoutine = true,\n            delay: _noss__WEBPACK_IMPORTED_MODULE_3__[\"HIT_ANIMATION_TOTAL_LENGTH\"],\n        }));\n    }\n    dead() {\n        this.playDeadAnimation();\n    }\n    spawnBullets() {\n        new _bullet__WEBPACK_IMPORTED_MODULE_4__[\"NossBossBulletSprite\"]({\n            position: this.position,\n            texture: this.runtime.getImage(\"boss/noss/bullet\"),\n        });\n    }\n    afterSpawnBullets() {\n        this.runtime.playSound(\"boss/noss/shadow4\");\n        this.shouldEndRoutine = false;\n    }\n    poof(newVisibility = !this.visible) {\n        super.poof();\n        this.visible = newVisibility;\n    }\n    // this function is brought to you by audible\n    audiblePoof(newVisibility) {\n        this.poof(newVisibility);\n        this.runtime.playSound(\"boss/noss/shadow2\");\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/noss/noss.ts?");

/***/ }),

/***/ "./src/game/sprites/bosses/sword/sword.ts":
/*!************************************************!*\
  !*** ./src/game/sprites/bosses/sword/sword.ts ***!
  \************************************************/
/*! exports provided: SwordBoss */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SwordBoss\", function() { return SwordBoss; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _engine_vector2d__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../engine/vector2d */ \"./src/engine/vector2d.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _coin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../coin */ \"./src/game/sprites/coin.ts\");\n/* harmony import */ var _boss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../boss */ \"./src/game/sprites/bosses/boss.ts\");\n\n\n\n\n\n\n\n/*\n * The first boss: A Sword\n */\n// swipe and spin cycle\nconst SPIN_ROTATION_SPEED = 5 / 2;\nconst SPIN_SIZE_CHANGE_RATE = 0.035;\nconst SWIPE_ROTATION_SPEED = 10 / 2;\nconst SWIPE_MOVE_SPEED = 12.5 / 2;\nconst SWIPE_BASE_DELAY = 60;\nconst SWIPE_SIZE_CHANGE_RATE = 0.11;\nconst SWIPE_ANIMATE_TIMES = 25;\nconst SWIPE_ANIMATE_FRAME_LENGTH = 3;\nconst SWIPE_TEXTURES = [\n    \"boss/sword/sword\",\n    \"boss/sword/open\",\n];\nconst SWIPE_DOWN_SPEED = 15 / 2;\nconst SWIPE_UP_SPEED = SWIPE_DOWN_SPEED / 2;\n// getting damaged\nconst DAMAGED_FALL_SPEED = 5;\nconst DAMAGED_RISE_SPEED = DAMAGED_FALL_SPEED / 2;\nconst DAMAGED_ANIMATE_TIMES = 20;\nconst DEAD_ANIMATE_TIMES = 35;\nconst DAMAGED_TEXTURES = [\n    \"boss/sword/open\",\n    \"boss/sword/hurt\",\n];\nconst DAMAGE_ANIMATE_FRAME_LENGTH = 2;\nconst PLAYER_JUMP_YV = 3;\n// death\nconst DEAD_ROTATION_SPEED = 0.742857142857 / 2; // 0.742... is how the game actually defines this.\nconst DEAD_STARTING_VELOCITY = 2;\nconst REST_PHASE_LENGTH = 180;\nclass SwordBoss extends _boss__WEBPACK_IMPORTED_MODULE_6__[\"AbstractBoss\"] {\n    constructor(opts, options = {}) {\n        super(opts);\n        this.hitPlayer = false;\n        this._sizeScale = 1;\n        this.spinDirection = 1;\n        this.testCollision = false;\n        this.yv = DEAD_STARTING_VELOCITY;\n        this.xv = 0;\n        this.blocksFromTop = options.blocksFromTop || 14;\n        this.startingHealth = options.health || 3;\n        this.health = this.startingHealth;\n        this.startingHeight = this.height;\n        this.startingWidth = this.width;\n        this.resetCoordinates();\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.beginSpinAttack(),\n            delay: 60,\n        }));\n        this.addTask(() => this.intersectTest());\n        this.rotationPoint = new _engine_vector2d__WEBPACK_IMPORTED_MODULE_3__[\"Vector2D\"](0.5, 0.05);\n    }\n    //\n    // Utilities\n    //\n    intersectTest() {\n        if (!this.testCollision) {\n            return;\n        }\n        if (this.complexIntersectsSimple(this.runtime.player)) {\n            this.runtime.player.kill();\n            this.hitPlayer = true;\n        }\n    }\n    startRoutine() {\n        super.startRoutine();\n        this.texture = this.runtime.getImage(\"boss/sword/sword\");\n        this.beginSpinAttack();\n    }\n    resetCoordinates() {\n        this.recenter();\n        this.y = this.blocksFromTop * _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\n    }\n    recenter() {\n        this.x = this.runtime.canvas.width / 2 - this.width / 2;\n    }\n    animate(textures, times, length, cb) {\n        for (let i = 0; i < times; i++) {\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => {\n                    this.texture = this.runtime.getImage(textures[i % textures.length]);\n                    if (cb) {\n                        cb();\n                    }\n                },\n                delay: i * length,\n            }));\n        }\n    }\n    //\n    // Spin Attack\n    //\n    beginSpinAttack() {\n        this.testCollision = true;\n        this.spinDirection = -this.multiplier;\n        this.phaseDelay = SWIPE_BASE_DELAY;\n        this.hitPlayer = false;\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: (task) => this.spinAttack(task),\n            repeatEvery: 0,\n            delay: 60,\n        }));\n    }\n    spinAttack(task) {\n        this.rotation += this.spinDirection * SPIN_ROTATION_SPEED;\n        // could be pos or neg\n        if (Math.abs(this.rotation) >= 180) {\n            this.sizeScale -= SPIN_SIZE_CHANGE_RATE;\n        }\n        else {\n            this.sizeScale += SPIN_SIZE_CHANGE_RATE;\n        }\n        // could be pos or neg\n        if (Math.abs(this.rotation) >= 360) {\n            this.rotation = 0;\n            task.stop();\n            this.beginSwipeAttack();\n        }\n        this.resetCoordinates();\n    }\n    //\n    // Swipe Attack\n    //\n    beginSwipeAttack() {\n        // make sure some values are reset properly\n        this.sizeScale = 1;\n        this.rotation = 0;\n        this.phaseDelay = SWIPE_BASE_DELAY;\n        // This is terrible.\n        const multi = this.multiplier;\n        const animate = () => {\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.animate(SWIPE_TEXTURES, SWIPE_ANIMATE_TIMES, SWIPE_ANIMATE_FRAME_LENGTH),\n            }), SWIPE_ANIMATE_TIMES * SWIPE_ANIMATE_FRAME_LENGTH);\n        };\n        const attack = () => {\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.swipeAttack(SWIPE_DOWN_SPEED),\n                repeatEvery: 0,\n                repeatMax: 16,\n            }));\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.swipeAttack(-SWIPE_UP_SPEED),\n                repeatEvery: 0,\n                repeatMax: 32,\n            }));\n        };\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.swipeRotate(-1 * multi),\n            repeatEvery: 0,\n            repeatMax: 36,\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.swipeMove(1),\n            repeatEvery: 0,\n            repeatMax: 24,\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => {\n                this.swipeRotate(-1 * multi);\n                this.swipeSize(1);\n            },\n            repeatEvery: 0,\n            repeatMax: 18,\n        }));\n        animate();\n        attack();\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.swipeRotate(1 * multi),\n            repeatEvery: 0,\n            repeatMax: 36,\n        }));\n        animate();\n        attack();\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => {\n                this.swipeRotate(1 * multi);\n                this.swipeSize(-1);\n            },\n            repeatEvery: 0,\n            repeatMax: 18,\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.swipeMove(-1),\n            repeatEvery: 0,\n            repeatMax: 24,\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.beginRestPhase(),\n        }));\n    }\n    swipeRotate(multi) {\n        this.rotation += SWIPE_ROTATION_SPEED * multi;\n    }\n    swipeMove(multi) {\n        this.y -= SWIPE_MOVE_SPEED * multi;\n    }\n    swipeAttack(speed) {\n        this.y += speed;\n    }\n    swipeSize(multi) {\n        this.sizeScale += SWIPE_SIZE_CHANGE_RATE * multi;\n    }\n    //\n    // Rest Phase\n    //\n    beginRestPhase() {\n        this.testCollision = false;\n        if (this.hitPlayer) {\n            this.texture = this.runtime.getImage(\"boss/sword/heal\");\n            this.spawnHitEffect(this.health === this.startingHealth ? \"+0\" : \"+1\");\n            if (this.health < this.startingHealth) {\n                this.health++;\n            }\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.startRoutine(),\n                delay: 60,\n            }));\n        }\n        else {\n            this.texture = this.runtime.getImage(\"boss/sword/open\");\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: (task) => this.restVulnerable(task),\n                repeatEvery: 0,\n                repeatMax: REST_PHASE_LENGTH,\n            }));\n            const health = this.health;\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => {\n                    if (this.health === health) {\n                        this.startRoutine();\n                    }\n                },\n                delay: 180,\n            }));\n        }\n    }\n    restVulnerable(task) {\n        // use simple intersects for performance reasons\n        if (this.playerJumpedOn()) {\n            this.bouncePlayer();\n            this.damage();\n            task.stop();\n        }\n    }\n    damage() {\n        this.health--;\n        this.spawnHitEffect(\"-1\");\n        this.phaseDelay = 0;\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.runtime.playSound(\"boss/ouch\"),\n        }));\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.y += DAMAGED_FALL_SPEED,\n            repeatEvery: 0,\n            repeatMax: 5,\n        }));\n        if (this.health === 0) {\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.runtime.playSound(\"boss/shadow5\"),\n            }));\n        }\n        else {\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.runtime.playSound(\"boss/sword/rumble\"),\n            }));\n        }\n        this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.animate(DAMAGED_TEXTURES, DAMAGED_ANIMATE_TIMES, DAMAGE_ANIMATE_FRAME_LENGTH),\n        }), DAMAGED_ANIMATE_TIMES * DAMAGE_ANIMATE_FRAME_LENGTH);\n        if (this.health === 0) {\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.animate(DAMAGED_TEXTURES, DEAD_ANIMATE_TIMES, DAMAGE_ANIMATE_FRAME_LENGTH, () => {\n                    this.rotation -= DEAD_ROTATION_SPEED;\n                }),\n            }), DEAD_ANIMATE_TIMES * DAMAGE_ANIMATE_FRAME_LENGTH);\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.runtime.setBackgroundMusic([]),\n            }));\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: (task) => this.deadPhysics(task),\n                repeatEvery: 0,\n            }));\n        }\n        else {\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.animate(DAMAGED_TEXTURES, DAMAGED_ANIMATE_TIMES, DAMAGE_ANIMATE_FRAME_LENGTH),\n            }), DAMAGED_ANIMATE_TIMES * DAMAGE_ANIMATE_FRAME_LENGTH);\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.texture = this.runtime.getImage(\"boss/sword/sword\"),\n            }));\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.y -= DAMAGED_RISE_SPEED,\n                repeatEvery: 0,\n                repeatMax: 10,\n            }));\n            this.addPhase(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.startRoutine(),\n            }));\n        }\n    }\n    //\n    // Dead\n    //\n    deadPhysics(task) {\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_4__[\"runPhysics\"])(this, {\n            collision: false,\n        });\n        if (this.y > this.runtime.canvas.height) {\n            task.stop();\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.spawnCoin(),\n                delay: 30,\n            }));\n        }\n    }\n    spawnCoin() {\n        const texture = this.runtime.getImage(\"coin/1\");\n        const x = (this.runtime.canvas.width / 2) - (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] / 2);\n        const y = this.runtime.canvas.height;\n        new _coin__WEBPACK_IMPORTED_MODULE_5__[\"SwordBossLevelUpCoinSprite\"]({\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](x, y),\n            texture,\n        });\n    }\n    //\n    // Getters and Setters\n    //\n    set sizeScale(scale) {\n        this.height = this.startingHeight * scale;\n        this.width = this.startingWidth * scale;\n        this._sizeScale = scale;\n        this.recenter();\n    }\n    get sizeScale() {\n        return this._sizeScale;\n    }\n    get multiplier() {\n        if ((this.runtime.player.x + this.runtime.player.width / 2) < (this.x + this.width / 2)) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/bosses/sword/sword.ts?");

/***/ }),

/***/ "./src/game/sprites/coin.ts":
/*!**********************************!*\
  !*** ./src/game/sprites/coin.ts ***!
  \**********************************/
/*! exports provided: LevelUpCoinSprite, SwordBossLevelUpCoinSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LevelUpCoinSprite\", function() { return LevelUpCoinSprite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SwordBossLevelUpCoinSprite\", function() { return SwordBossLevelUpCoinSprite; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _blocks_block__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n\n\n\n\n\n/*\n * The coin that levels you up\n */\n// Length of an animation frame\nconst FRAME_LENGTH = 4;\n// The total frames in the animation\nconst TOTAL_FRAMES = 4;\nclass LevelUpCoinSprite extends _blocks_block__WEBPACK_IMPORTED_MODULE_4__[\"Block\"] {\n    constructor(opts) {\n        super(opts);\n        this.animationFrame = 1;\n        this.animated = true;\n        // In order to stay centered after changing position it will recenter using the startingPosition\n        this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.position);\n        this.centerAlign();\n        this.addTask(() => this.run());\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.animate(),\n            repeatEvery: FRAME_LENGTH,\n            delay: FRAME_LENGTH,\n        }));\n    }\n    run() {\n        const touchingPlayer = this.intersects(this.runtime.player);\n        if (touchingPlayer) {\n            this.runtime.playSound(\"blocks/coin\");\n            this.runtime.level++;\n            if (this.runtime.level === this.runtime.levels.length) {\n                this.runtime.level = 0;\n            }\n            this.runtime.renderLevel();\n        }\n    }\n    animate() {\n        if (!this.animated) {\n            return;\n        }\n        this.animationFrame++;\n        if (this.animationFrame > TOTAL_FRAMES) {\n            this.animationFrame = 1;\n        }\n        this.texture = this.runtime.getImage(`coin/${this.animationFrame}`);\n        this.updateDimensions();\n        this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.startingPosition);\n        this.centerAlign();\n    }\n}\nclass SwordBossLevelUpCoinSprite extends LevelUpCoinSprite {\n    constructor(options) {\n        super(options);\n        this.yv = 9;\n        this.xv = 0;\n        this.endY = (this.runtime.canvas.height / 2) - (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] / 2) + this.height;\n        this.hasGoneAbove = false;\n        this.addTask((task) => this.fly(task));\n        this.animated = false;\n    }\n    fly(task) {\n        Object(_physics__WEBPACK_IMPORTED_MODULE_3__[\"runPhysics\"])(this, {\n            collision: false,\n        });\n        if (this.hasGoneAbove) {\n            if (this.y >= this.endY) {\n                this.y = this.endY;\n                this.animated = true;\n                const x = this.x - (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_WIDTH\"] - this.width) / 2;\n                const y = this.y - (_config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"] - this.height) / 2;\n                this.startingPosition = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](x, y);\n                this.position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](x, y);\n                this.centerAlign();\n                task.stop();\n            }\n        }\n        else {\n            if (this.y <= this.endY) {\n                this.hasGoneAbove = true;\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/coin.ts?");

/***/ }),

/***/ "./src/game/sprites/ending/EndingSceneSprite.ts":
/*!******************************************************!*\
  !*** ./src/game/sprites/ending/EndingSceneSprite.ts ***!
  \******************************************************/
/*! exports provided: EndingSceneSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EndingSceneSprite\", function() { return EndingSceneSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n\nconst MOVE_LENGTH = 368;\nclass EndingSceneSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(parent, options) {\n        super(options);\n        this.parent = parent;\n        this.endX = 0;\n        this.endY = this.runtime.canvas.height - this.height + 4;\n        const xDistance = Math.abs(this.endX - this.x);\n        const yDistance = Math.abs(this.endY - this.y);\n        this.moveX = xDistance / MOVE_LENGTH;\n        this.moveY = yDistance / MOVE_LENGTH;\n        this.addTask((task) => this.move(task));\n    }\n    move(task) {\n        this.x += this.moveX;\n        this.y -= this.moveY;\n        this.x = Math.min(this.x, this.endX);\n        this.y = Math.max(this.y, this.endY);\n        if (this.x === this.endX && this.y === this.endY) {\n            this.parent.sceneMoveEnd();\n            task.stop();\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/ending/EndingSceneSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/ending/EndingSprite.ts":
/*!*************************************************!*\
  !*** ./src/game/sprites/ending/EndingSprite.ts ***!
  \*************************************************/
/*! exports provided: EndingSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EndingSprite\", function() { return EndingSprite; });\n/* harmony import */ var _engine_sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _engine_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/utils */ \"./src/engine/utils.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../text/StaticNightlightTextSprite */ \"./src/game/sprites/text/StaticNightlightTextSprite.ts\");\n/* harmony import */ var _EndingSceneSprite__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./EndingSceneSprite */ \"./src/game/sprites/ending/EndingSceneSprite.ts\");\n/* harmony import */ var _EndingThumbSprite__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./EndingThumbSprite */ \"./src/game/sprites/ending/EndingThumbSprite.ts\");\n\n\n\n\n\n\n\n\nconst INITIAL_DELAY = 60;\nconst BACKGROUND_PHASE_LENGTH = 300;\n// #2FB3FF\nconst BACKGROUND_COLOR_RED = 0x2F;\nconst BACKGROUND_COLOR_GREEN = 0xB3;\nconst BACKGROUND_COLOR_BLUE = 0xFF;\nconst TEXT_PHASE_LINE_DELAY = 120;\nconst TEXT = [\n    {\n        text: \"with noss, the cube of darkness' defeat,\",\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-160, 164),\n    },\n    {\n        text: \"the world was relieved to finally see the night pass.\",\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-212, 140),\n    },\n    {\n        text: \"our little hero is just taking in the scenery...\",\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-192, 116),\n    },\n];\nconst FADE_OUT_PHASE_DELAY = 600;\nclass EndingSprite extends _engine_sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\n    constructor(options) {\n        super(options);\n        /**\n         * Well, that's the end.\n         */\n        // get rid of the player\n        this.runtime.player.destroy();\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: (task) => this.backgroundPhase(task),\n            onend: () => this.startTextPhase(),\n            delay: INITIAL_DELAY,\n            repeatMax: BACKGROUND_PHASE_LENGTH,\n            repeatEvery: 0,\n        }));\n    }\n    backgroundPhase(task) {\n        const progress = task.repeatCount / task.repeatMax;\n        const r = Math.floor(BACKGROUND_COLOR_RED * progress);\n        const g = Math.floor(BACKGROUND_COLOR_GREEN * progress);\n        const b = Math.floor(BACKGROUND_COLOR_BLUE * progress);\n        const hex = (val) => {\n            const hexadecimal = Object(_engine_utils__WEBPACK_IMPORTED_MODULE_2__[\"toHex\"])(val);\n            if (hexadecimal.length === 1) {\n                return \"0\" + hexadecimal;\n            }\n            return hexadecimal;\n        };\n        this.runtime.background = `#${hex(r)}${hex(g)}${hex(b)}`;\n    }\n    startTextPhase() {\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.runtime.setBackgroundMusic([this.runtime.getSound(\"music/exploration\")]),\n            delay: TEXT_PHASE_LINE_DELAY,\n        }));\n        for (let i = 0; i < TEXT.length; i++) {\n            const delay = (i + 1) * TEXT_PHASE_LINE_DELAY;\n            const opts = TEXT[i];\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.displayText(opts),\n                delay,\n            }));\n        }\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.spawnEndScene(),\n            delay: (TEXT.length + 1) * TEXT_PHASE_LINE_DELAY,\n        }));\n    }\n    displayText(opts) {\n        new _text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_5__[\"StaticNightlightTextSprite\"](opts);\n        this.runtime.updateStatic();\n    }\n    spawnEndScene() {\n        const image = this.runtime.getImage(\"end/scene\");\n        const x = -image.width * 2;\n        const y = this.runtime.canvas.height;\n        this.endingScene = new _EndingSceneSprite__WEBPACK_IMPORTED_MODULE_6__[\"EndingSceneSprite\"](this, {\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](x, y),\n            width: image.width * 8,\n            height: image.height * 8,\n            texture: image,\n        });\n    }\n    sceneMoveEnd() {\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: () => this.goodbye(),\n            delay: FADE_OUT_PHASE_DELAY,\n        }));\n    }\n    goodbye() {\n        new _EndingThumbSprite__WEBPACK_IMPORTED_MODULE_7__[\"EndingThumbSprite\"](this, {\n            texture: this.runtime.getImage(\"thumb\"),\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_3__[\"Vector\"](0, 0),\n        });\n    }\n    render() {\n        // this sprite doesn't do rendering, it just handles running some things for the ending\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/ending/EndingSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/ending/EndingThumbSprite.ts":
/*!******************************************************!*\
  !*** ./src/game/sprites/ending/EndingThumbSprite.ts ***!
  \******************************************************/
/*! exports provided: EndingThumbSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EndingThumbSprite\", function() { return EndingThumbSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../text/StaticNightlightTextSprite */ \"./src/game/sprites/text/StaticNightlightTextSprite.ts\");\n/* harmony import */ var _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../text/NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils */ \"./src/utils.ts\");\n\n\n\n\n\nconst FADE_LENGTH = 100;\nconst TEXT_DELAY = 120;\nconst TEXT = [\n    {\n        text: \"that's all the base game has to offer\",\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-148, 164),\n    },\n    {\n        text: \"consider trying out the level editor?\",\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-148, 140),\n    },\n    {\n        text: \"click to continue...\",\n        position: Object(_utils__WEBPACK_IMPORTED_MODULE_4__[\"scratchCoordinate\"])(-80, 116),\n    },\n];\nclass EndingThumbSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(parent, options) {\n        super(options);\n        this.parent = parent;\n        this.opacity = 0;\n        this.fadeIn();\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            run: (task) => this.testLevelEditor(task),\n            repeatEvery: 0,\n            delay: FADE_LENGTH,\n        }));\n    }\n    fadeIn() {\n        return new Promise((resolve) => {\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.opacity += 1 / FADE_LENGTH,\n                repeatEvery: 0,\n                repeatMax: FADE_LENGTH,\n                onend: () => {\n                    this.opacity = 1;\n                    resolve();\n                },\n            }));\n        });\n    }\n    fadeOut(amount = 1) {\n        return new Promise((resolve) => {\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => this.opacity -= 1 / FADE_LENGTH,\n                repeatEvery: 0,\n                repeatMax: FADE_LENGTH * amount,\n                onend: () => {\n                    this.opacity = 1 - amount;\n                    resolve();\n                },\n            }));\n        });\n    }\n    testLevelEditor(task) {\n        if (this.runtime.mouse.isClick) {\n            this.startLevelEditor();\n            task.stop();\n        }\n    }\n    startLevelEditor() {\n        // kill our sibling and parent\n        // haha yes\n        this.parent.endingScene.destroy();\n        this.parent.destroy();\n        // remove all text sprites\n        this.runtime.sprites.filter((i) => i instanceof _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_3__[\"NightlightTextSprite\"]).forEach((i) => i.destroy());\n        this.runtime.updateStatic();\n        this.runtime.background = \"black\";\n        this.z = -2; // static renders at -1, we want to be below it for this part\n        this.fadeOut(0.75)\n            .then(() => this.lastSurpriseText())\n            .then(() => this.loadLevelEditor());\n    }\n    lastSurpriseText() {\n        return new Promise((resolve) => {\n            for (let i = 0; i < TEXT.length; i++) {\n                const delay = (i + 1) * TEXT_DELAY;\n                const opts = TEXT[i];\n                this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                    run: () => this.displayText(opts),\n                    delay,\n                }));\n            }\n            this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n                run: () => resolve(),\n                delay: TEXT.length * TEXT_DELAY,\n            }));\n        });\n    }\n    displayText(opts) {\n        new _text_StaticNightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"StaticNightlightTextSprite\"](opts);\n        this.runtime.updateStatic();\n    }\n    loadLevelEditor() {\n        this.addTask((task) => {\n            if (this.runtime.mouse.isClick) {\n                task.stop();\n                this.z = 0;\n                this.fadeIn().then(() => {\n                    location.search = \"?m=leveleditor&welcome=1\";\n                });\n            }\n        });\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/ending/EndingThumbSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/jumplight.ts":
/*!***************************************!*\
  !*** ./src/game/sprites/jumplight.ts ***!
  \***************************************/
/*! exports provided: JumpLight */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"JumpLight\", function() { return JumpLight; });\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/task */ \"./src/engine/task.ts\");\n/* harmony import */ var _blocks_block__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n\n\n/*\n * A light that will allow the player to jump again once while in the air.\n */\nconst HIDE_DURATION = 60 * 3;\nclass JumpLight extends _blocks_block__WEBPACK_IMPORTED_MODULE_1__[\"Block\"] {\n    constructor(opts) {\n        super(opts);\n        this.addTask(() => this.testIntersects());\n    }\n    show() {\n        this.visible = true;\n    }\n    activate(player) {\n        player.hasJumpLight = true;\n        this.visible = false;\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_0__[\"Task\"]({\n            run: () => this.show(),\n            delay: HIDE_DURATION,\n        }));\n    }\n    testIntersects() {\n        if (this.visible && this.intersects(this.runtime.player)) {\n            this.activate(this.runtime.player);\n        }\n    }\n    get needsReinstantiate() {\n        return true;\n    }\n    get type() {\n        return JumpLight;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/jumplight.ts?");

/***/ }),

/***/ "./src/game/sprites/pause/PauseSprite.ts":
/*!***********************************************!*\
  !*** ./src/game/sprites/pause/PauseSprite.ts ***!
  \***********************************************/
/*! exports provided: PauseSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PauseSprite\", function() { return PauseSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../text/NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n/* harmony import */ var _zindex__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../zindex */ \"./src/game/sprites/zindex.ts\");\n\n\n\n\nclass LevelCodeTextSprite extends _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"NightlightTextSprite\"] {\n    get text() {\n        return this.runtime.levelCode;\n    }\n    set text(text) {\n        // lol no\n    }\n}\nclass PauseSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(options) {\n        super(options);\n        this.width *= 2;\n        this.height *= 2;\n        this.gameState = this.runtime.pauseState;\n        this.x = (this.runtime.canvas.width / 2) - (this.width / 2);\n        this.y = this.runtime.canvas.height * 0.2;\n        this.z = _zindex__WEBPACK_IMPORTED_MODULE_3__[\"ZIndexes\"].PauseMenu;\n        this.runtime.pauseState.renderingEnabled = false;\n        const getCenterX = (text) => (this.runtime.canvas.width / 2) - (text.length * _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_WIDTH\"] / 2);\n        const spawnCenteredText = (text, y) => {\n            return new _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"NightlightTextSprite\"]({\n                text,\n                position: new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](getCenterX(text), y, _zindex__WEBPACK_IMPORTED_MODULE_3__[\"ZIndexes\"].PauseMenu),\n                gameState: this.gameState,\n                persistent: true,\n            });\n        };\n        spawnCenteredText(\"hit esc to resume\", this.runtime.canvas.height * 0.4);\n        const levelCodeLabel = spawnCenteredText(\"level code:\", this.runtime.canvas.height * 0.9);\n        new LevelCodeTextSprite({\n            text: \"this will be replaced\",\n            position: new _engine_vector__WEBPACK_IMPORTED_MODULE_1__[\"Vector\"](getCenterX(\"12345678\"), levelCodeLabel.y + _text_NightlightTextSprite__WEBPACK_IMPORTED_MODULE_2__[\"CHAR_HEIGHT\"], _zindex__WEBPACK_IMPORTED_MODULE_3__[\"ZIndexes\"].PauseMenu),\n            persistent: true,\n            gameState: this.gameState,\n        });\n        this.addTask(() => this.keyTest());\n    }\n    keyTest() {\n        // escape key\n        if (this.runtime.keyboard.keys[27].justPressed) {\n            this.runtime.pauseState.renderingEnabled = !this.runtime.pauseState.renderingEnabled;\n            this.runtime.playState.updatingEnabled = !this.runtime.playState.updatingEnabled;\n        }\n    }\n    render(ctx) {\n        ctx.fillStyle = \"#000000AA\";\n        ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n        super.render(ctx);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/pause/PauseSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/player/fragment.ts":
/*!*********************************************!*\
  !*** ./src/game/sprites/player/fragment.ts ***!
  \*********************************************/
/*! exports provided: PlayerFragmentSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerFragmentSprite\", function() { return PlayerFragmentSprite; });\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../physics */ \"./src/game/physics.ts\");\n\n\n/*\n * Fragments of the player that will fly everywhere you when the player dies\n */\n// How long before they will start to go away (opacity up)\nconst LIFESPAN = 300;\n// The rate at which the opacity will go up each frame after the life span is reached\nconst GHOST_RATE = 0.03;\n// The friction value for rotation when on the ground\n// Multiplied by rotation so higher is less, 1 is 0\nconst ROTATION_FRICTION = 0.5;\n// create a high limit to prevent constant death from crashing everything\nconst MAX_FRAGMENTS = 250;\nlet existingFragments = 0;\nclass PlayerFragmentSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_0__[\"ImageSprite\"] {\n    constructor(opts) {\n        super(opts);\n        this.xv = 0;\n        this.yv = 0;\n        this.rv = 0;\n        this.lifespan = 0;\n        existingFragments++;\n        if (existingFragments > MAX_FRAGMENTS) {\n            this.destroy();\n            return;\n        }\n        this.xv = opts.xv;\n        this.yv = opts.yv;\n        this.rv = opts.rv;\n        if (this.y >= this.runtime.canvas.height) {\n            this.y = this.runtime.canvas.height - 1;\n        }\n        this.addTask(() => this.run());\n    }\n    run() {\n        this.lifespan++;\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_1__[\"runPhysics\"])(this, {\n            midAirFriction: false,\n            roundValues: false,\n        });\n        if (physicsResult) {\n            this.rv *= ROTATION_FRICTION;\n        }\n        this.rotation += this.rv;\n        if (this.lifespan >= LIFESPAN) {\n            this.opacity -= GHOST_RATE;\n        }\n        if (this.opacity < 0 || this.y > this.runtime.canvas.height) {\n            this.destroy();\n        }\n    }\n    destroy() {\n        super.destroy();\n        existingFragments--;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/player/fragment.ts?");

/***/ }),

/***/ "./src/game/sprites/player/player.ts":
/*!*******************************************!*\
  !*** ./src/game/sprites/player/player.ts ***!
  \*******************************************/
/*! exports provided: PlayerSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PlayerSprite\", function() { return PlayerSprite; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config */ \"./src/config.ts\");\n/* harmony import */ var _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../engine/sprites/imagesprite */ \"./src/engine/sprites/imagesprite.ts\");\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../engine/vector */ \"./src/engine/vector.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils */ \"./src/utils.ts\");\n/* harmony import */ var _physics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../physics */ \"./src/game/physics.ts\");\n/* harmony import */ var _blocks_block__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../blocks/block */ \"./src/game/sprites/blocks/block.ts\");\n/* harmony import */ var _fragment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./fragment */ \"./src/game/sprites/player/fragment.ts\");\n\n\n\n\n\n\n\n/*\n * It's a player.\n *\n * For now there doesn't seem to be any problems with having the player also be the graphic\n * And until there are problems they will be staying as one\n */\n// How fast the player walks\nconst PLAYER_WALK_SPEED = 0.5 / 2;\n// The velocity gained when jumping\nconst JUMP_HEIGHT = 5.4;\n// Maximum speed the player is allowed to move at\nconst PLAYER_MAX_SPEED = 4 / 2;\n// The player uses a custom friction\n// This is the value used in that friction\nconst PLAYER_FRICTION = 0.8 / 2;\n// Fragment textures that will always be present when dying\nconst FRAGMENT_TEXTURES = [1, 2, 3, 4];\n// The minimum amount of small pieces to create\nconst FRAGMENT_SMALL_PIECE_MIN = 4;\n// The maxiumum amount of small pieces to create\nconst FRAGMENT_SMALL_PIECE_MAX = 6;\n// The texture associated with small pieces\nconst FRAGMENT_SMALL_PIECE_TEXTURE = 5;\n// The range of xv values that pieces will have\nconst FRAGMENT_XV_RANGE = 1;\n// The minimum yv that pieces will have\nconst FRAGMENT_YV_MIN = 3;\n// The maxiumum yv that pieces will have\nconst FRAGMENT_YV_MAX = 6;\n// The range of rotation change that pieces will have\nconst FRAGMENT_RV_RANGE = 10;\n// Frames in the walk animation\nconst WALK_ANIMATION_FRAMES = 4;\n// Length of each frame\nconst WALK_ANIMATION_LENGTH = 4;\nvar MovementDirection;\n(function (MovementDirection) {\n    MovementDirection[MovementDirection[\"Right\"] = 1] = \"Right\";\n    MovementDirection[MovementDirection[\"Left\"] = -1] = \"Left\";\n})(MovementDirection || (MovementDirection = {}));\nclass PlayerSprite extends _engine_sprites_imagesprite__WEBPACK_IMPORTED_MODULE_1__[\"ImageSprite\"] {\n    constructor(opts) {\n        super(opts);\n        this.yv = 0;\n        this.xv = 0;\n        this.lastMovementDirection = MovementDirection.Right;\n        this.onGround = true;\n        this.walkingAnimationProgress = 1;\n        this.currentFrameProgress = 0;\n        this.moving = false;\n        this.hasJumpLight = false;\n        this.addTask(() => this.run());\n        this.addTask(() => this.updateGraphic());\n        if (_config__WEBPACK_IMPORTED_MODULE_0__[\"CHEATS\"]) {\n            this.addTask(() => this.debugTeleport());\n        }\n    }\n    debugTeleport() {\n        if (this.runtime.mouse.isDown) {\n            const position = new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.runtime.mouse.position);\n            position.x -= this.width / 2;\n            position.y -= this.height / 2;\n            position.z = this.z;\n            this.position = position;\n        }\n    }\n    getInputs() {\n        if (this.runtime.isMobile) {\n            return this.getMobileInputs();\n        }\n        else {\n            return this.getComputerInputs();\n        }\n    }\n    getComputerInputs() {\n        const keys = this.runtime.keyboard.keys;\n        const rightDown = keys[39].isPressed || keys[68].isPressed;\n        const leftDown = keys[37].isPressed || keys[65].isPressed;\n        const upDown = keys[38].isPressed || keys[87].isPressed;\n        const upJustPressed = keys[38].justPressed || keys[87].justPressed;\n        return {\n            rightDown,\n            leftDown,\n            upDown,\n            upJustPressed,\n        };\n    }\n    getMobileInputs() {\n        const mouseX = this.runtime.mouse.position.x;\n        const mouseY = this.runtime.mouse.position.y;\n        const mouseDown = this.runtime.mouse.isDown;\n        const grace = this.runtime.canvas.width / 10;\n        const moveLeftMax = this.runtime.canvas.width / 3 + grace;\n        const moveRightMin = this.runtime.canvas.width / 3 * 2 - grace;\n        const moveUpMax = this.runtime.canvas.height / 2;\n        const leftDown = mouseDown && mouseX <= moveLeftMax;\n        const rightDown = mouseDown && mouseX >= moveRightMin;\n        const upDown = mouseDown && mouseY <= moveUpMax;\n        const upJustPressed = this.runtime.mouse.isClick;\n        return {\n            leftDown,\n            rightDown,\n            upDown,\n            upJustPressed,\n        };\n    }\n    run() {\n        const prevXv = this.xv;\n        const prevYv = this.yv;\n        const inputs = this.getInputs();\n        this.moving = false;\n        if (inputs.rightDown && !inputs.leftDown) {\n            this.xv += PLAYER_WALK_SPEED;\n            this.lastMovementDirection = MovementDirection.Right;\n            this.moving = true;\n        }\n        if (inputs.leftDown && !inputs.rightDown) {\n            this.xv -= PLAYER_WALK_SPEED;\n            this.lastMovementDirection = MovementDirection.Left;\n            this.moving = true;\n        }\n        if ((inputs.upDown && this.onGround) || (inputs.upJustPressed && this.hasJumpLight)) {\n            this.runtime.playSound(\"player/jump\");\n            this.hasJumpLight = false;\n            this.yv = JUMP_HEIGHT;\n        }\n        else if (!inputs.upDown && this.yv > 3) {\n            this.yv = 3;\n        }\n        if ((!inputs.leftDown && !inputs.rightDown) || (inputs.leftDown && inputs.rightDown)) {\n            if (this.xv > 0) {\n                this.xv -= PLAYER_FRICTION;\n                this.xv = Math.max(this.xv, 0);\n            }\n            else {\n                this.xv += PLAYER_FRICTION;\n                this.xv = Math.min(this.xv, 0);\n            }\n        }\n        if (this.xv > PLAYER_MAX_SPEED) {\n            this.xv = PLAYER_MAX_SPEED;\n        }\n        else if (this.xv < -PLAYER_MAX_SPEED) {\n            this.xv = -PLAYER_MAX_SPEED;\n        }\n        const physicsResult = Object(_physics__WEBPACK_IMPORTED_MODULE_4__[\"runPhysics\"])(this, {\n            friction: false,\n        });\n        this.onGround = physicsResult;\n        if (this.onGround && prevYv < -1.6) {\n            this.runtime.playSound(\"player/ding\");\n        }\n        if (this.onGround) {\n            this.hasJumpLight = false;\n        }\n        if (this.y >= this.runtime.canvas.height) {\n            this.kill();\n        }\n        // if (this.runtime.mouse.isDown) {\n        //   this.x = this.runtime.mouse.position.x;\n        //   this.y = this.runtime.mouse.position.y;\n        // }\n    }\n    reset() {\n        const sprites = this.runtime.blocks.filter((s) => s.solid || s instanceof _blocks_block__WEBPACK_IMPORTED_MODULE_5__[\"PseudoSolidBlock\"]);\n        this.position.y = this.runtime.canvas.height - _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\n        const spawnType = this.runtime.playerSpawn.type;\n        if (spawnType === \"default\") {\n            this.position.x = 40;\n        }\n        else if (spawnType === \"random\") {\n            const playerSpawn = this.runtime.playerSpawn;\n            var minX = playerSpawn.minX;\n            var maxX = playerSpawn.maxX;\n            var minY = spawnType === \"random\" ? playerSpawn.minY : this.y;\n            var maxY = spawnType === \"random\" ? playerSpawn.maxY : this.y;\n            this.position.x = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(minX, maxX);\n            this.position.y = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(minY, maxY);\n        }\n        else if (spawnType === \"range\") {\n            const playerSpawn = this.runtime.playerSpawn;\n            var minX = playerSpawn.minX;\n            var maxX = playerSpawn.maxX;\n            this.x = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(minX, maxX);\n            // undefined or true act as true\n            if (playerSpawn.requireSolid !== false) {\n                let tries = 0;\n                while (!this.intersects(sprites)) {\n                    tries++;\n                    if (tries > 1000) {\n                        alert(\"Invalid spawn range, can't find solid blocks.\");\n                        break;\n                    }\n                    this.x = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(minX, maxX);\n                }\n            }\n        }\n        else if (spawnType === \"point\") {\n            const playerSpawn = this.runtime.playerSpawn;\n            this.position.x = playerSpawn.x;\n            this.position.y = playerSpawn.y;\n        }\n        this.xv = 0;\n        this.yv = 0;\n        while (this.intersects(sprites)) {\n            this.y -= _config__WEBPACK_IMPORTED_MODULE_0__[\"BLOCK_HEIGHT\"];\n        }\n    }\n    kill() {\n        const fragmentTextures = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"clone\"])(FRAGMENT_TEXTURES);\n        const smallPieces = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(FRAGMENT_SMALL_PIECE_MIN, FRAGMENT_SMALL_PIECE_MAX);\n        for (let i = 0; i < smallPieces; i++) {\n            fragmentTextures.push(FRAGMENT_SMALL_PIECE_TEXTURE);\n        }\n        for (const i of fragmentTextures) {\n            new _fragment__WEBPACK_IMPORTED_MODULE_6__[\"PlayerFragmentSprite\"]({\n                position: new _engine_vector__WEBPACK_IMPORTED_MODULE_2__[\"Vector\"](this.position),\n                texture: this.runtime.getImage(`fragments/${i}`),\n                xv: Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(-FRAGMENT_XV_RANGE * 1000, FRAGMENT_XV_RANGE * 1000) / 1000,\n                yv: Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(FRAGMENT_YV_MIN * 1000, FRAGMENT_YV_MAX * 1000) / 1000,\n                rv: Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getRandomInt\"])(-FRAGMENT_RV_RANGE * 1000, FRAGMENT_RV_RANGE * 1000) / 1000,\n            });\n        }\n        const blocks = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"clone\"])(this.runtime.blocks);\n        for (const block of blocks) {\n            if (block.needsReinstantiate) {\n                const opts = block.spawningOptions;\n                block.destroy();\n                const constructor = block.type;\n                new constructor(opts);\n            }\n        }\n        this.reset();\n        this.runtime.playSound(\"player/death\");\n    }\n    updateGraphic() {\n        this.scale.x = this.lastMovementDirection;\n        if (this.onGround) {\n            if (this.moving) {\n                this.currentFrameProgress++;\n                if (this.currentFrameProgress === WALK_ANIMATION_LENGTH) {\n                    this.currentFrameProgress = 0;\n                    this.walkingAnimationProgress++;\n                }\n                if (this.walkingAnimationProgress > WALK_ANIMATION_FRAMES) {\n                    this.walkingAnimationProgress = 1;\n                }\n                this.texture = this.runtime.getImage(`player/walk${this.walkingAnimationProgress}`);\n            }\n            else {\n                this.texture = this.runtime.getImage(\"player/idle\");\n            }\n        }\n        else {\n            if (this.yv < 0.1) {\n                this.texture = this.runtime.getImage(\"player/down\");\n            }\n            else {\n                this.texture = this.runtime.getImage(\"player/up\");\n            }\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/player/player.ts?");

/***/ }),

/***/ "./src/game/sprites/stars.ts":
/*!***********************************!*\
  !*** ./src/game/sprites/stars.ts ***!
  \***********************************/
/*! exports provided: BackgroundStarsSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BackgroundStarsSprite\", function() { return BackgroundStarsSprite; });\n/* harmony import */ var _engine_sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/sprite */ \"./src/engine/sprite.ts\");\n/* harmony import */ var _engine_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../engine/task */ \"./src/engine/task.ts\");\n\n\n/*\n * The stars in the background.\n */\n// How often to update opacity\nconst UPDATE_EVERY = 6;\n// How many times will it update in each cycle\n// One cycle is Dark -> Bright or Bright -> Dark, not both\nconst ANIMATION_LENGTH = 10;\nclass BackgroundStarsSprite extends _engine_sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\n    constructor(opts, positions) {\n        super(opts);\n        this.progress = 0;\n        this.direction = 1;\n        this.renderCache = [];\n        this.addTask(new _engine_task__WEBPACK_IMPORTED_MODULE_1__[\"Task\"]({\n            repeatEvery: UPDATE_EVERY,\n            run: () => this.animate(),\n        }));\n        const path = new Path2D();\n        for (const position of positions) {\n            path.rect(position.x, position.y, this.width, this.height);\n        }\n        for (let i = 0; i <= ANIMATION_LENGTH; i++) {\n            const { canvas, ctx } = this.runtime.createCanvas();\n            this.renderStarPath(ctx, path, i / ANIMATION_LENGTH);\n            this.renderCache[i] = canvas;\n        }\n    }\n    animate() {\n        this.progress += this.direction;\n        if (this.progress === 0 || this.progress === 10) {\n            this.direction *= -1;\n        }\n    }\n    clamp(x, min, max) {\n        if (x < min) {\n            return min;\n        }\n        else if (x > max) {\n            return max;\n        }\n        else {\n            return x;\n        }\n    }\n    renderStarPath(ctx, path, alpha) {\n        if (!this.visible) {\n            return;\n        }\n        ctx.fillStyle = \"white\";\n        ctx.globalAlpha = alpha;\n        ctx.fill(path);\n    }\n    render(ctx) {\n        if (!this.visible) {\n            return;\n        }\n        const image = this.renderCache[this.progress];\n        ctx.drawImage(image, 0, 0, image.width, image.height);\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/stars.ts?");

/***/ }),

/***/ "./src/game/sprites/text/NightlightTextSprite.ts":
/*!*******************************************************!*\
  !*** ./src/game/sprites/text/NightlightTextSprite.ts ***!
  \*******************************************************/
/*! exports provided: CHAR_WIDTH, CHAR_HEIGHT, CHAR_MAP, NightlightTextSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CHAR_WIDTH\", function() { return CHAR_WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CHAR_HEIGHT\", function() { return CHAR_HEIGHT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CHAR_MAP\", function() { return CHAR_MAP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NightlightTextSprite\", function() { return NightlightTextSprite; });\n/* harmony import */ var _engine_sprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/sprite */ \"./src/engine/sprite.ts\");\n\nconst CHAR_WIDTH = 8;\nconst CHAR_HEIGHT = CHAR_WIDTH;\nconst TEXTURE_FOLDER = \"text/\";\n// map of specially treated letters to their real path or behavior\nconst CHAR_MAP = {\n    \" \": \"skip\",\n    \".\": \"period\",\n    \"'\": \"singlequote\",\n    \":\": \"colon\",\n    \"?\": \"question\",\n};\nclass NightlightTextSprite extends _engine_sprite__WEBPACK_IMPORTED_MODULE_0__[\"AbstractSprite\"] {\n    constructor(options) {\n        super(options);\n        this.static = false;\n        this.text = options.text;\n    }\n    render(ctx) {\n        if (!this.visible) {\n            return;\n        }\n        for (let i = 0; i < this.text.length; i++) {\n            const originalChar = this.text[i].toLowerCase();\n            const char = CHAR_MAP[originalChar] || originalChar;\n            if (char === \"skip\") {\n                continue;\n            }\n            const x = this.x + (i * CHAR_WIDTH);\n            const texture = this.runtime.getImage(TEXTURE_FOLDER + char);\n            ctx.drawImage(texture, x, this.y, Math.max(CHAR_WIDTH, texture.width), CHAR_HEIGHT);\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/text/NightlightTextSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/text/StaticNightlightTextSprite.ts":
/*!*************************************************************!*\
  !*** ./src/game/sprites/text/StaticNightlightTextSprite.ts ***!
  \*************************************************************/
/*! exports provided: StaticNightlightTextSprite */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StaticNightlightTextSprite\", function() { return StaticNightlightTextSprite; });\n/* harmony import */ var _NightlightTextSprite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./NightlightTextSprite */ \"./src/game/sprites/text/NightlightTextSprite.ts\");\n\nclass StaticNightlightTextSprite extends _NightlightTextSprite__WEBPACK_IMPORTED_MODULE_0__[\"NightlightTextSprite\"] {\n    constructor() {\n        super(...arguments);\n        this.static = true;\n    }\n}\n\n\n//# sourceURL=webpack:///./src/game/sprites/text/StaticNightlightTextSprite.ts?");

/***/ }),

/***/ "./src/game/sprites/zindex.ts":
/*!************************************!*\
  !*** ./src/game/sprites/zindex.ts ***!
  \************************************/
/*! exports provided: ZIndexes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ZIndexes\", function() { return ZIndexes; });\n// All z indexes are defined here to avoid magic numbers and using 9999999\n// Reminder: Static stuff renders at -1\nvar ZIndexes;\n(function (ZIndexes) {\n    ZIndexes[ZIndexes[\"Stars\"] = -10] = \"Stars\";\n    ZIndexes[ZIndexes[\"Block\"] = 0] = \"Block\";\n    ZIndexes[ZIndexes[\"Grass\"] = 1] = \"Grass\";\n    ZIndexes[ZIndexes[\"Player\"] = 10] = \"Player\";\n    ZIndexes[ZIndexes[\"FinalBoss\"] = 20] = \"FinalBoss\";\n    ZIndexes[ZIndexes[\"PauseMenu\"] = 100] = \"PauseMenu\";\n})(ZIndexes || (ZIndexes = {}));\n\n\n//# sourceURL=webpack:///./src/game/sprites/zindex.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _editor_editor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./editor/editor */ \"./src/editor/editor.ts\");\n/* harmony import */ var _game_game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game/game */ \"./src/game/game.ts\");\n/* harmony import */ var _levelcode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./levelcode */ \"./src/levelcode.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n\n\n\n\n\n/*\n * The loader.\n *\n * It creates the game object, adds in assets, and starts the game.\n */\nfunction getRuntime() {\n    if (Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getSearchParam\"])(\"m\") === \"leveleditor\") {\n        return new _editor_editor__WEBPACK_IMPORTED_MODULE_0__[\"NightlightLevelEditor\"]();\n    }\n    else {\n        return new _game_game__WEBPACK_IMPORTED_MODULE_1__[\"Nightlight\"]();\n    }\n}\nconst game = getRuntime();\n// later made visibile in run()\ngame.canvas.style.display = \"none\";\n// add in all of our assets\n//\n// Pre sword and core\n//\ngame.addImage(\"player/idle\");\ngame.addImage(\"player/up\");\ngame.addImage(\"player/down\");\ngame.addImage(\"player/walk1\");\ngame.addImage(\"player/walk2\");\ngame.addImage(\"player/walk3\");\ngame.addImage(\"player/walk4\");\ngame.addImage(\"text/a\");\ngame.addImage(\"text/b\");\ngame.addImage(\"text/c\");\ngame.addImage(\"text/d\");\ngame.addImage(\"text/e\");\ngame.addImage(\"text/f\");\ngame.addImage(\"text/g\");\ngame.addImage(\"text/h\");\ngame.addImage(\"text/i\");\ngame.addImage(\"text/j\");\ngame.addImage(\"text/k\");\ngame.addImage(\"text/l\");\ngame.addImage(\"text/m\");\ngame.addImage(\"text/n\");\ngame.addImage(\"text/o\");\ngame.addImage(\"text/p\");\ngame.addImage(\"text/q\");\ngame.addImage(\"text/r\");\ngame.addImage(\"text/s\");\ngame.addImage(\"text/t\");\ngame.addImage(\"text/u\");\ngame.addImage(\"text/v\");\ngame.addImage(\"text/w\");\ngame.addImage(\"text/x\");\ngame.addImage(\"text/y\");\ngame.addImage(\"text/z\");\ngame.addImage(\"text/0\");\ngame.addImage(\"text/1\");\ngame.addImage(\"text/2\");\ngame.addImage(\"text/3\");\ngame.addImage(\"text/4\");\ngame.addImage(\"text/5\");\ngame.addImage(\"text/6\");\ngame.addImage(\"text/7\");\ngame.addImage(\"text/8\");\ngame.addImage(\"text/9\");\ngame.addImage(\"text/period\");\ngame.addImage(\"text/question\");\ngame.addImage(\"text/,\");\ngame.addImage(\"text/!\");\ngame.addImage(\"text/singlequote\");\ngame.addImage(\"text/colon\");\ngame.addImage(\"fragments/1\");\ngame.addImage(\"fragments/2\");\ngame.addImage(\"fragments/3\");\ngame.addImage(\"fragments/4\");\ngame.addImage(\"fragments/5\");\ngame.addImage(\"coin/1\");\ngame.addImage(\"coin/2\");\ngame.addImage(\"coin/3\");\ngame.addImage(\"coin/4\");\ngame.addImage(\"blocks/a\");\ngame.addImage(\"blocks/b\");\ngame.addImage(\"blocks/c\");\ngame.addImage(\"blocks/d\");\ngame.addImage(\"blocks/e\");\ngame.addImage(\"blocks/f\");\ngame.addImage(\"blocks/g\");\ngame.addImage(\"blocks/h\");\ngame.addImage(\"blocks/i\");\ngame.addImage(\"blocks/j\");\ngame.addImage(\"blocks/k\");\ngame.addImage(\"blocks/l\");\ngame.addImage(\"blocks/m\");\ngame.addImage(\"blocks/n\");\ngame.addImage(\"blocks/p\");\ngame.addImage(\"blocks/q\");\ngame.addImage(\"blocks/r\");\ngame.addImage(\"blocks/s\");\ngame.addImage(\"blocks/v\");\ngame.addImage(\"blocks/w\");\ngame.addImage(\"blocks/y\");\ngame.addImage(\"blocks/z\");\ngame.addImage(\"blocks/editory\");\ngame.addImage(\"blocks/capitaly\");\ngame.addImage(\"blocks/capitalz\");\ngame.addImage(\"blocks/capitalo\");\ngame.addImage(\"blocks/capitalp\");\ngame.addImage(\"blocks/capitalq\");\ngame.addImage(\"blocks/capitalr\");\ngame.addImage(\"blocks/closingcurlybracket\");\ngame.addImage(\"blocks/button/redgreen/button\");\ngame.addImage(\"blocks/button/redgreen/button2\");\ngame.addImage(\"blocks/button/redgreen/spawner\");\ngame.addImage(\"blocks/button/redgreen/spawner2\");\ngame.addImage(\"blocks/button/aquaorange/button\");\ngame.addImage(\"blocks/button/aquaorange/button2\");\ngame.addImage(\"blocks/button/aquaorange/spawner\");\ngame.addImage(\"blocks/button/aquaorange/spawner2\");\ngame.addImage(\"blocks/crumble/1\");\ngame.addImage(\"blocks/crumble/2\");\ngame.addImage(\"blocks/crumble/3\");\ngame.addImage(\"blocks/crumble/4\");\ngame.addImage(\"blocks/crumble/5\");\ngame.addImage(\"blocks/crumble/6\");\ngame.addImage(\"blocks/crumble/7\");\ngame.addImage(\"blocks/crumble/8\");\ngame.addImage(\"blocks/crumble/9\");\ngame.addImage(\"blocks/spikes/up\");\ngame.addImage(\"blocks/spikes/down\");\ngame.addImage(\"blocks/spikes/left\");\ngame.addImage(\"blocks/spikes/right\");\ngame.addImage(\"boss/sword/sword\");\ngame.addImage(\"boss/sword/open\");\ngame.addImage(\"boss/sword/heal\");\ngame.addImage(\"boss/sword/hurt\");\ngame.addImage(\"hit/-1\");\ngame.addImage(\"hit/+1\");\ngame.addImage(\"hit/+0\");\n//\n// Post sword\n//\ngame.addImage(\"blocks/1\");\ngame.addImage(\"blocks/2\");\ngame.addImage(\"blocks/3\");\ngame.addImage(\"blocks/4\");\ngame.addImage(\"blocks/5\");\ngame.addImage(\"blocks/6\");\ngame.addImage(\"blocks/7\");\ngame.addImage(\"blocks/8\");\ngame.addImage(\"blocks/9\");\ngame.addImage(\"blocks/!\");\ngame.addImage(\"blocks/singlequote\");\ngame.addImage(\"blocks/lightbutton/1\");\ngame.addImage(\"blocks/lightbutton/2\");\ngame.addImage(\"blocks/lightbutton/down\");\ngame.addImage(\"jumplight\");\ngame.addImage(\"blackjumplight\");\n// Noss\ngame.addImage(\"boss/noss/noss\");\ngame.addImage(\"boss/noss/hit\");\ngame.addImage(\"boss/noss/rest\");\ngame.addImage(\"boss/noss/bullet\");\ngame.addImage(\"boss/noss/dust\");\n//\n// Castle\n//\ngame.addImage(\"brick\");\ngame.addImage(\"blocks/caret\");\ngame.addImage(\"blocks/ampersand\");\ngame.addImage(\"blocks/asterisk\");\ngame.addImage(\"blocks/(\");\ngame.addImage(\"blocks/)\");\ngame.addImage(\"blocks/-\");\ngame.addImage(\"blocks/underscore\");\ngame.addImage(\"blocks/=\");\ngame.addImage(\"blocks/+\");\ngame.addImage(\"blocks/grave\");\ngame.addImage(\"blocks/capitals\");\ngame.addImage(\"blocks/capitalt\");\ngame.addImage(\"blocks/capitalv\");\ngame.addImage(\"blocks/castlecorner/topright\");\ngame.addImage(\"blocks/castlecorner/topleft\");\ngame.addImage(\"blocks/castlecorner/bottomright\");\ngame.addImage(\"blocks/castlecorner/bottomleft\");\ngame.addImage(\"blocks/capitala\");\ngame.addImage(\"blocks/capitalb\");\ngame.addImage(\"blocks/capitalc\");\ngame.addImage(\"blocks/capitald\");\ngame.addImage(\"blocks/capitale\");\ngame.addImage(\"blocks/capitalf\");\ngame.addImage(\"blocks/capitalg\");\ngame.addImage(\"blocks/capitalh\");\ngame.addImage(\"blocks/capitali\");\ngame.addImage(\"blocks/capitalj\");\ngame.addImage(\"blocks/capitalk\");\ngame.addImage(\"blocks/capitall\");\ngame.addImage(\"blocks/capitalm\");\ngame.addImage(\"blocks/capitaln\");\ngame.addImage(\"blocks/capitalw\");\ngame.addImage(\"blocks/pipe\");\n// ending\ngame.addImage(\"end/scene\");\ngame.addImage(\"thumb\");\n// pause\ngame.addImage(\"pause\");\n//\n// Sounds\n//\ngame.addSound(\"blocks/coin\");\ngame.addSound(\"blocks/break\");\ngame.addSound(\"blocks/fall\");\ngame.addSound(\"blocks/smash\");\ngame.addSound(\"blocks/button\");\ngame.addSound(\"blocks/fds\");\ngame.addSound(\"player/death\");\ngame.addSound(\"player/ding\");\ngame.addSound(\"player/jump\");\n// boss\ngame.addSound(\"boss/ouch\");\ngame.addSound(\"boss/sword/rumble\");\ngame.addSound(\"boss/noss/shadow1\");\ngame.addSound(\"boss/noss/shadow2\");\ngame.addSound(\"boss/noss/shadow3\");\ngame.addSound(\"boss/noss/shadow4\");\ngame.addSound(\"boss/shadow5\");\n// background music\n// game.addSound(\"music/exploration\");\n// game.addSound(\"music/netherslament\");\n// game.addSound(\"music/challenge\");\n// game.addSound(\"music/boss/1\");\n// game.addSound(\"music/boss/2\");\n// game.addSound(\"music/blackroad/1\");\n// game.addSound(\"music/blackroad/2\");\n// game.addSound(\"music/finalboss/1\");\n// game.addSound(\"music/finalboss/2\");\n// html elements\nconst progressBar = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"progress-bar\");\nconst menuContainer = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"menu-container\");\nconst loadingScreen = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"loading-screen\");\nconst menuBackground = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"menu-background\");\nconst menuScreen = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"menu-screen\");\nconst playButton = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"play-button\");\nconst loadCodeButton = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"load-code-button\");\nconst loadCodeFromUrlButton = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"load-code-url-button\");\nconst cheatsInterface = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getElementById\"])(\"cheats-interface\");\n// wait for it to load then run our stuff\ngame.waitForAssets((progress) => {\n    // show a progress bar\n    const value = progress * 100;\n    progressBar.style.width = value + \"%\";\n}).then(() => canPlay());\nfunction canPlay() {\n    if (game instanceof _game_game__WEBPACK_IMPORTED_MODULE_1__[\"Nightlight\"]) {\n        const autorun = !!Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getSearchParam\"])(\"autorun\");\n        const urlLevelParam = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getSearchParam\"])(\"level\") || \"\";\n        const loadLevelFromUrl = () => runLevelCode(urlLevelParam);\n        if (autorun) {\n            try {\n                if (urlLevelParam) {\n                    loadLevelFromUrl();\n                }\n                else {\n                    run();\n                }\n                return;\n            }\n            catch (e) {\n                // TODO: handle this\n                throw e;\n            }\n        }\n        playButton.addEventListener(\"click\", () => run());\n        loadCodeButton.addEventListener(\"click\", () => {\n            // chrome (and probably others) limit prompt default value to 2000 or so characters\n            const TOO_LONG_TO_SHOW_MESSAGE = \"(too long to safely show in this box, but enter will still work as expected)\";\n            let defaultValue;\n            if (urlLevelParam.length > 2000) {\n                defaultValue = TOO_LONG_TO_SHOW_MESSAGE;\n            }\n            else {\n                defaultValue = urlLevelParam;\n            }\n            let code = prompt(\"Enter the level code:\", defaultValue);\n            if (code === TOO_LONG_TO_SHOW_MESSAGE) {\n                code = urlLevelParam;\n            }\n            if (code === null) {\n                return;\n            }\n            runLevelCode(code);\n        });\n        if (urlLevelParam) {\n            loadCodeFromUrlButton.addEventListener(\"click\", () => loadLevelFromUrl());\n            loadCodeFromUrlButton.style.display = \"inline\";\n        }\n        menuBackground.classList.add(\"active\");\n        loadingScreen.style.display = \"none\";\n        menuScreen.style.display = \"block\";\n    }\n    else {\n        run();\n    }\n}\nfunction showCanvas() {\n    menuContainer.style.display = \"none\";\n    game.canvas.style.display = \"\";\n}\nfunction runLevelCode(code) {\n    if (!(game instanceof _game_game__WEBPACK_IMPORTED_MODULE_1__[\"Nightlight\"])) {\n        throw new Error(\"not in game\");\n    }\n    const importCode = (str) => {\n        if (code.length === 8) {\n            // resume code\n            const level = Object(_levelcode__WEBPACK_IMPORTED_MODULE_2__[\"getLevelForContinueCode\"])(str);\n            game.level = level;\n            run();\n        }\n        else {\n            // probably a full level code\n            const level = Object(_levelcode__WEBPACK_IMPORTED_MODULE_2__[\"getLevelForCode\"])(code);\n            showCanvas();\n            game.start([level]);\n        }\n    };\n    try {\n        importCode(code);\n    }\n    catch (e) {\n        alert(`Error: ${e.message}`);\n    }\n    Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"setSearchParam\"])(\"level\", code);\n}\nfunction run() {\n    showCanvas();\n    game.start();\n}\ncheatsInterface.style.display = _config__WEBPACK_IMPORTED_MODULE_4__[\"CHEATS\"] ? \"block\" : \"none\";\n\n\n//# sourceURL=webpack:///./src/index.ts?");

/***/ }),

/***/ "./src/levelcode.ts":
/*!**************************!*\
  !*** ./src/levelcode.ts ***!
  \**************************/
/*! exports provided: LEVEL_CODE_LENGTH, getLevelForCode, getLevelForContinueCode, getContinueCodeForLevel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LEVEL_CODE_LENGTH\", function() { return LEVEL_CODE_LENGTH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLevelForCode\", function() { return getLevelForCode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLevelForContinueCode\", function() { return getLevelForContinueCode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getContinueCodeForLevel\", function() { return getContinueCodeForLevel; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n\n\nconst LEVEL_CODE_LENGTH = _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_HEIGHT\"] * _config__WEBPACK_IMPORTED_MODULE_0__[\"LEVEL_WIDTH\"];\nfunction getLevelForCode(str) {\n    const isJson = str.startsWith(\"{\");\n    if (isJson) {\n        try {\n            var json = JSON.parse(str);\n        }\n        catch (e) {\n            throw new Error(\"Invalid JSON input\");\n        }\n        return getJsonLevel(json);\n    }\n    else {\n        return getStringLevel(str);\n    }\n}\nfunction getJsonLevel(json) {\n    if (typeof json.levelData === \"undefined\" || json.levelData.length !== LEVEL_CODE_LENGTH) {\n        throw new Error(\"Invalid level data in JSON input\");\n    }\n    if (typeof json.dark === \"undefined\") {\n        json.dark = false;\n    }\n    if (typeof json.stars === \"undefined\") {\n        json.stars = true;\n    }\n    if (typeof json.background === \"undefined\") {\n        json.background = \"black\";\n    }\n    return json;\n}\nfunction getStringLevel(str) {\n    if (str.length !== LEVEL_CODE_LENGTH) {\n        throw new Error(`Invalid input`);\n    }\n    return {\n        levelData: str,\n        stars: true,\n        dark: false,\n        background: \"black\",\n        backgroundMusic: [\"music/exploration\"],\n    };\n}\nfunction getLevelForContinueCode(code) {\n    if (code.length !== 8) {\n        throw new Error(\"Invalid input\");\n    }\n    if (Math.floor(+code) !== +code) {\n        throw new Error(\"Invalid input\");\n    }\n    const level = +(code[1] + code[4]);\n    if (level < 0) {\n        throw new Error(\"Invalid input\");\n    }\n    if (!isFinite(level)) {\n        throw new Error(\"Invalid input\");\n    }\n    return level;\n}\nfunction getContinueCodeForLevel(nlevel) {\n    let level = nlevel.toString();\n    if (level.length === 1) {\n        level = \"0\" + level;\n    }\n    let result = \"\";\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\n    result += level[0];\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\n    result += level[1];\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\n    result += Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRandomInt\"])(0, 9);\n    return result;\n}\n\n\n//# sourceURL=webpack:///./src/levelcode.ts?");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! exports provided: getRandomInt, clone, scratchCoordinate, clamp, splitToChunks, getElementById, getSearchParam, setSearchParam */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRandomInt\", function() { return getRandomInt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clone\", function() { return clone; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"scratchCoordinate\", function() { return scratchCoordinate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clamp\", function() { return clamp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"splitToChunks\", function() { return splitToChunks; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getElementById\", function() { return getElementById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSearchParam\", function() { return getSearchParam; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setSearchParam\", function() { return setSearchParam; });\n/* harmony import */ var _engine_vector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine/vector */ \"./src/engine/vector.ts\");\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n// Clones an array\n// Allows you to use inplace methods on an array without changing the actual array\n// (eg. sort)\nfunction clone(array) {\n    let i = array.length;\n    const result = [];\n    while (i--) {\n        result[i] = array[i];\n    }\n    return result;\n}\n// Converts Scratch coordinates to coordinates this game will understand\nfunction scratchCoordinate(x, y) {\n    return new _engine_vector__WEBPACK_IMPORTED_MODULE_0__[\"Vector\"](x + 236, (360 - y) - 184);\n}\nfunction clamp(x, min, max) {\n    if (x < min) {\n        return min;\n    }\n    else if (x > max) {\n        return max;\n    }\n    else {\n        return x;\n    }\n}\n// https://stackoverflow.com/a/6259536\nfunction splitToChunks(str, chunkSize) {\n    const chunks = [];\n    for (let i = 0; i < str.length; i += chunkSize) {\n        chunks.push(str.substring(i, i + chunkSize));\n    }\n    return chunks;\n}\nfunction getElementById(id) {\n    const el = document.getElementById(id);\n    if (el === null) {\n        throw new Error(\"No element with id \" + id);\n    }\n    return el;\n}\nfunction getSearchParam(target) {\n    const allParams = location.search.substr(1).split(\"&\");\n    for (const param of allParams) {\n        const name = param.substr(0, param.indexOf(\"=\"));\n        const val = param.substr(param.indexOf(\"=\") + 1);\n        if (name === target) {\n            return unescape(val);\n        }\n    }\n    return null;\n}\nfunction setSearchParam(name, newVal) {\n    const map = new Map();\n    const allParams = location.search.substr(1).split(\"&\");\n    for (const param of allParams) {\n        const k = param.substr(0, param.indexOf(\"=\"));\n        const v = param.substr(param.indexOf(\"=\") + 1);\n        map.set(k, v);\n    }\n    map.set(name, escape(newVal));\n    let newSearch = \"\";\n    for (const key of map.keys()) {\n        if (key === \"\") {\n            continue;\n        }\n        const val = map.get(key);\n        if (val === \"\") {\n            continue;\n        }\n        const divider = newSearch.length === 0 ? \"?\" : \"&\";\n        newSearch += `${divider}${key}=${val}`;\n    }\n    history.pushState({}, \"\", newSearch);\n}\n\n\n//# sourceURL=webpack:///./src/utils.ts?");

/***/ })

/******/ });